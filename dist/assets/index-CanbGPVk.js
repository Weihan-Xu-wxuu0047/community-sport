const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-BQ7TB1wk.js","assets/ProgramCard-DRo14RWZ.js","assets/DataService-z2Ih9ngB.js","assets/FindSportsPage-BLppDuf9.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/FindSportsPage-BYtmUxsp.css","assets/ProgramDetailsPage-D133ivVW.js","assets/mapbox-gl-CQxWPcX7.js","assets/mapbox-gl-BfrFMvqD.css","assets/ProgramDetailsPage-Bz2IEOLg.css","assets/SupportPage-Dth3CZx2.js","assets/SupportPage-Dd07TgQp.css","assets/LoginPage-0Nr9KN8D.js","assets/LoginPage-Cw81WVB6.css","assets/RegisterPage-DTW4usU7.js","assets/RegisterPage-C7ZqfK0J.css","assets/MemberAccountPage-m7AlVd8b.js","assets/index-BXs5ZZQj.js","assets/RoleSwitcher-BNbkLzKh.js","assets/RoleSwitcher-DnG7-S_n.css","assets/MemberAccountPage-BJ0KbeaS.css","assets/OrganizerAccountPage-BTBf6fEs.js","assets/OrganizerAccountPage-Bg_CmHI2.css","assets/MemberAppointmentPage-CdlGExU7.js","assets/MemberAppointmentPage-WmVNu5GX.css","assets/LaunchProgramPage-p2_0xE_d.js","assets/LaunchProgramPage-L2ZWY2Oh.css","assets/EditProgramPage-CPp65JS1.js","assets/EditProgramPage-BQBSjFj-.css","assets/NotificationPage-CgDsHN8y.js","assets/NotificationPage-Xk_DuVzc.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Nh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ke={},Ks=[],vn=()=>{},g_=()=>!1,Kc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Oh=t=>t.startsWith("onUpdate:"),vt=Object.assign,Dh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Lw=Object.prototype.hasOwnProperty,Pe=(t,e)=>Lw.call(t,e),ce=Array.isArray,zs=t=>Ko(t)==="[object Map]",Ti=t=>Ko(t)==="[object Set]",tp=t=>Ko(t)==="[object Date]",de=t=>typeof t=="function",Ge=t=>typeof t=="string",Nn=t=>typeof t=="symbol",Me=t=>t!==null&&typeof t=="object",__=t=>(Me(t)||de(t))&&de(t.then)&&de(t.catch),y_=Object.prototype.toString,Ko=t=>y_.call(t),Mw=t=>Ko(t).slice(8,-1),E_=t=>Ko(t)==="[object Object]",kh=t=>Ge(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,lo=Nh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zc=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},xw=/-(\w)/g,Jt=zc(t=>t.replace(xw,(e,n)=>n?n.toUpperCase():"")),Fw=/\B([A-Z])/g,Ur=zc(t=>t.replace(Fw,"-$1").toLowerCase()),Gc=zc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Yl=zc(t=>t?`on${Gc(t)}`:""),Tr=(t,e)=>!Object.is(t,e),Ha=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},v_=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},hc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let np;const Yc=()=>np||(np=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vh(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ge(r)?jw(r):Vh(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ge(t)||Me(t))return t}const Uw=/;(?![^(]*\))/g,$w=/:([^]+)/,Bw=/\/\*[^]*?\*\//g;function jw(t){const e={};return t.replace(Bw,"").split(Uw).forEach(n=>{if(n){const r=n.split($w);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function mr(t){let e="";if(Ge(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=mr(t[n]);r&&(e+=r+" ")}else if(Me(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Hw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qw=Nh(Hw);function T_(t){return!!t||t===""}function Ww(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=us(t[r],e[r]);return n}function us(t,e){if(t===e)return!0;let n=tp(t),r=tp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Nn(t),r=Nn(e),n||r)return t===e;if(n=ce(t),r=ce(e),n||r)return n&&r?Ww(t,e):!1;if(n=Me(t),r=Me(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!us(t[o],e[o]))return!1}}return String(t)===String(e)}function Lh(t,e){return t.findIndex(n=>us(n,e))}const w_=t=>!!(t&&t.__v_isRef===!0),qa=t=>Ge(t)?t:t==null?"":ce(t)||Me(t)&&(t.toString===y_||!de(t.toString))?w_(t)?qa(t.value):JSON.stringify(t,A_,2):String(t),A_=(t,e)=>w_(e)?A_(t,e.value):zs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ql(r,i)+" =>"]=s,n),{})}:Ti(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ql(n))}:Nn(e)?Ql(e):Me(e)&&!ce(e)&&!E_(e)?String(e):e,Ql=(t,e="")=>{var n;return Nn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nt;class Kw{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nt,!e&&Nt&&(this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Nt;try{return Nt=this,e()}finally{Nt=n}}}on(){++this._on===1&&(this.prevScope=Nt,Nt=this)}off(){this._on>0&&--this._on===0&&(Nt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function zw(){return Nt}let Ve;const Xl=new WeakSet;class I_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nt&&Nt.active&&Nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xl.has(this)&&(Xl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||S_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rp(this),C_(this);const e=Ve,n=on;Ve=this,on=!0;try{return this.fn()}finally{R_(this),Ve=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fh(e);this.deps=this.depsTail=void 0,rp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lu(this)&&this.run()}get dirty(){return Lu(this)}}let b_=0,uo,ho;function S_(t,e=!1){if(t.flags|=8,e){t.next=ho,ho=t;return}t.next=uo,uo=t}function Mh(){b_++}function xh(){if(--b_>0)return;if(ho){let e=ho;for(ho=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;uo;){let e=uo;for(uo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function C_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function R_(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Fh(r),Gw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Lu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(P_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function P_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Po)||(t.globalVersion=Po,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Lu(t))))return;t.flags|=2;const e=t.dep,n=Ve,r=on;Ve=t,on=!0;try{C_(t);const s=t.fn(t._value);(e.version===0||Tr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ve=n,on=r,R_(t),t.flags&=-3}}function Fh(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Fh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Gw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const N_=[];function Gn(){N_.push(on),on=!1}function Yn(){const t=N_.pop();on=t===void 0?!0:t}function rp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ve;Ve=void 0;try{e()}finally{Ve=n}}}let Po=0;class Yw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Uh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ve||!on||Ve===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ve)n=this.activeLink=new Yw(Ve,this),Ve.deps?(n.prevDep=Ve.depsTail,Ve.depsTail.nextDep=n,Ve.depsTail=n):Ve.deps=Ve.depsTail=n,O_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ve.depsTail,n.nextDep=void 0,Ve.depsTail.nextDep=n,Ve.depsTail=n,Ve.deps===n&&(Ve.deps=r)}return n}trigger(e){this.version++,Po++,this.notify(e)}notify(e){Mh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xh()}}}function O_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)O_(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Mu=new WeakMap,as=Symbol(""),xu=Symbol(""),No=Symbol("");function gt(t,e,n){if(on&&Ve){let r=Mu.get(t);r||Mu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Uh),s.map=r,s.key=n),s.track()}}function Un(t,e,n,r,s,i){const o=Mu.get(t);if(!o){Po++;return}const c=l=>{l&&l.trigger()};if(Mh(),e==="clear")o.forEach(c);else{const l=ce(t),u=l&&kh(n);if(l&&n==="length"){const h=Number(r);o.forEach((d,m)=>{(m==="length"||m===No||!Nn(m)&&m>=h)&&c(d)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(No)),e){case"add":l?u&&c(o.get("length")):(c(o.get(as)),zs(t)&&c(o.get(xu)));break;case"delete":l||(c(o.get(as)),zs(t)&&c(o.get(xu)));break;case"set":zs(t)&&c(o.get(as));break}}xh()}function Rs(t){const e=Re(t);return e===t?e:(gt(e,"iterate",No),Yt(t)?e:e.map(lt))}function Qc(t){return gt(t=Re(t),"iterate",No),t}const Qw={__proto__:null,[Symbol.iterator](){return Jl(this,Symbol.iterator,lt)},concat(...t){return Rs(this).concat(...t.map(e=>ce(e)?Rs(e):e))},entries(){return Jl(this,"entries",t=>(t[1]=lt(t[1]),t))},every(t,e){return Mn(this,"every",t,e,void 0,arguments)},filter(t,e){return Mn(this,"filter",t,e,n=>n.map(lt),arguments)},find(t,e){return Mn(this,"find",t,e,lt,arguments)},findIndex(t,e){return Mn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Mn(this,"findLast",t,e,lt,arguments)},findLastIndex(t,e){return Mn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Mn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Zl(this,"includes",t)},indexOf(...t){return Zl(this,"indexOf",t)},join(t){return Rs(this).join(t)},lastIndexOf(...t){return Zl(this,"lastIndexOf",t)},map(t,e){return Mn(this,"map",t,e,void 0,arguments)},pop(){return Yi(this,"pop")},push(...t){return Yi(this,"push",t)},reduce(t,...e){return sp(this,"reduce",t,e)},reduceRight(t,...e){return sp(this,"reduceRight",t,e)},shift(){return Yi(this,"shift")},some(t,e){return Mn(this,"some",t,e,void 0,arguments)},splice(...t){return Yi(this,"splice",t)},toReversed(){return Rs(this).toReversed()},toSorted(t){return Rs(this).toSorted(t)},toSpliced(...t){return Rs(this).toSpliced(...t)},unshift(...t){return Yi(this,"unshift",t)},values(){return Jl(this,"values",lt)}};function Jl(t,e,n){const r=Qc(t),s=r[e]();return r!==t&&!Yt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Xw=Array.prototype;function Mn(t,e,n,r,s,i){const o=Qc(t),c=o!==t&&!Yt(t),l=o[e];if(l!==Xw[e]){const d=l.apply(t,i);return c?lt(d):d}let u=n;o!==t&&(c?u=function(d,m){return n.call(this,lt(d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const h=l.call(o,u,r);return c&&s?s(h):h}function sp(t,e,n,r){const s=Qc(t);let i=n;return s!==t&&(Yt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,lt(c),l,t)}),s[e](i,...r)}function Zl(t,e,n){const r=Re(t);gt(r,"iterate",No);const s=r[e](...n);return(s===-1||s===!1)&&jh(n[0])?(n[0]=Re(n[0]),r[e](...n)):s}function Yi(t,e,n=[]){Gn(),Mh();const r=Re(t)[e].apply(t,n);return xh(),Yn(),r}const Jw=Nh("__proto__,__v_isRef,__isVue"),D_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nn));function Zw(t){Nn(t)||(t=String(t));const e=Re(this);return gt(e,"has",t),e.hasOwnProperty(t)}class k_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?lA:x_:i?M_:L_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ce(e);if(!s){let l;if(o&&(l=Qw[n]))return l;if(n==="hasOwnProperty")return Zw}const c=Reflect.get(e,n,Et(e)?e:r);return(Nn(n)?D_.has(n):Jw(n))||(s||gt(e,"get",n),i)?c:Et(c)?o&&kh(n)?c:c.value:Me(c)?s?U_(c):Xc(c):c}}class V_ extends k_{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Sr(i);if(!Yt(r)&&!Sr(r)&&(i=Re(i),r=Re(r)),!ce(e)&&Et(i)&&!Et(r))return l||(i.value=r),!0}const o=ce(e)&&kh(n)?Number(n)<e.length:Pe(e,n),c=Reflect.set(e,n,r,Et(e)?e:s);return e===Re(s)&&(o?Tr(r,i)&&Un(e,"set",n,r):Un(e,"add",n,r)),c}deleteProperty(e,n){const r=Pe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Un(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Nn(n)||!D_.has(n))&&gt(e,"has",n),r}ownKeys(e){return gt(e,"iterate",ce(e)?"length":as),Reflect.ownKeys(e)}}class eA extends k_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const tA=new V_,nA=new eA,rA=new V_(!0);const Fu=t=>t,Aa=t=>Reflect.getPrototypeOf(t);function sA(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=zs(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?Fu:e?fc:lt;return!e&&gt(i,"iterate",l?xu:as),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function Ia(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function iA(t,e){const n={get(s){const i=this.__v_raw,o=Re(i),c=Re(s);t||(Tr(s,c)&&gt(o,"get",s),gt(o,"get",c));const{has:l}=Aa(o),u=e?Fu:t?fc:lt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&gt(Re(s),"iterate",as),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Re(i),c=Re(s);return t||(Tr(s,c)&&gt(o,"has",s),gt(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=Re(c),u=e?Fu:t?fc:lt;return!t&&gt(l,"iterate",as),c.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return vt(n,t?{add:Ia("add"),set:Ia("set"),delete:Ia("delete"),clear:Ia("clear")}:{add(s){!e&&!Yt(s)&&!Sr(s)&&(s=Re(s));const i=Re(this);return Aa(i).has.call(i,s)||(i.add(s),Un(i,"add",s,s)),this},set(s,i){!e&&!Yt(i)&&!Sr(i)&&(i=Re(i));const o=Re(this),{has:c,get:l}=Aa(o);let u=c.call(o,s);u||(s=Re(s),u=c.call(o,s));const h=l.call(o,s);return o.set(s,i),u?Tr(i,h)&&Un(o,"set",s,i):Un(o,"add",s,i),this},delete(s){const i=Re(this),{has:o,get:c}=Aa(i);let l=o.call(i,s);l||(s=Re(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Un(i,"delete",s,void 0),u},clear(){const s=Re(this),i=s.size!==0,o=s.clear();return i&&Un(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=sA(s,t,e)}),n}function $h(t,e){const n=iA(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Pe(n,s)&&s in r?n:r,s,i)}const oA={get:$h(!1,!1)},aA={get:$h(!1,!0)},cA={get:$h(!0,!1)};const L_=new WeakMap,M_=new WeakMap,x_=new WeakMap,lA=new WeakMap;function uA(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hA(t){return t.__v_skip||!Object.isExtensible(t)?0:uA(Mw(t))}function Xc(t){return Sr(t)?t:Bh(t,!1,tA,oA,L_)}function F_(t){return Bh(t,!1,rA,aA,M_)}function U_(t){return Bh(t,!0,nA,cA,x_)}function Bh(t,e,n,r,s){if(!Me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=hA(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function Gs(t){return Sr(t)?Gs(t.__v_raw):!!(t&&t.__v_isReactive)}function Sr(t){return!!(t&&t.__v_isReadonly)}function Yt(t){return!!(t&&t.__v_isShallow)}function jh(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function fA(t){return!Pe(t,"__v_skip")&&Object.isExtensible(t)&&v_(t,"__v_skip",!0),t}const lt=t=>Me(t)?Xc(t):t,fc=t=>Me(t)?U_(t):t;function Et(t){return t?t.__v_isRef===!0:!1}function Wa(t){return $_(t,!1)}function dA(t){return $_(t,!0)}function $_(t,e){return Et(t)?t:new pA(t,e)}class pA{constructor(e,n){this.dep=new Uh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:lt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Yt(e)||Sr(e);e=r?e:Re(e),Tr(e,n)&&(this._rawValue=e,this._value=r?e:lt(e),this.dep.trigger())}}function Ys(t){return Et(t)?t.value:t}const mA={get:(t,e,n)=>e==="__v_raw"?t:Ys(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Et(s)&&!Et(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function B_(t){return Gs(t)?t:new Proxy(t,mA)}class gA{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Uh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Po-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return S_(this,!0),!0}get value(){const e=this.dep.track();return P_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _A(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new gA(r,s,n)}const ba={},dc=new WeakMap;let ts;function yA(t,e=!1,n=ts){if(n){let r=dc.get(n);r||dc.set(n,r=[]),r.push(t)}}function EA(t,e,n=ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=U=>s?U:Yt(U)||s===!1||s===0?$n(U,1):$n(U);let h,d,m,_,S=!1,C=!1;if(Et(t)?(d=()=>t.value,S=Yt(t)):Gs(t)?(d=()=>u(t),S=!0):ce(t)?(C=!0,S=t.some(U=>Gs(U)||Yt(U)),d=()=>t.map(U=>{if(Et(U))return U.value;if(Gs(U))return u(U);if(de(U))return l?l(U,2):U()})):de(t)?e?d=l?()=>l(t,2):t:d=()=>{if(m){Gn();try{m()}finally{Yn()}}const U=ts;ts=h;try{return l?l(t,3,[_]):t(_)}finally{ts=U}}:d=vn,e&&s){const U=d,X=s===!0?1/0:s;d=()=>$n(U(),X)}const O=zw(),L=()=>{h.stop(),O&&O.active&&Dh(O.effects,h)};if(i&&e){const U=e;e=(...X)=>{U(...X),L()}}let M=C?new Array(t.length).fill(ba):ba;const j=U=>{if(!(!(h.flags&1)||!h.dirty&&!U))if(e){const X=h.run();if(s||S||(C?X.some((Z,w)=>Tr(Z,M[w])):Tr(X,M))){m&&m();const Z=ts;ts=h;try{const w=[X,M===ba?void 0:C&&M[0]===ba?[]:M,_];M=X,l?l(e,3,w):e(...w)}finally{ts=Z}}}else h.run()};return c&&c(j),h=new I_(d),h.scheduler=o?()=>o(j,!1):j,_=U=>yA(U,!1,h),m=h.onStop=()=>{const U=dc.get(h);if(U){if(l)l(U,4);else for(const X of U)X();dc.delete(h)}},e?r?j(!0):M=h.run():o?o(j.bind(null,!0),!0):h.run(),L.pause=h.pause.bind(h),L.resume=h.resume.bind(h),L.stop=L,L}function $n(t,e=1/0,n){if(e<=0||!Me(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Et(t))$n(t.value,e,n);else if(ce(t))for(let r=0;r<t.length;r++)$n(t[r],e,n);else if(Ti(t)||zs(t))t.forEach(r=>{$n(r,e,n)});else if(E_(t)){for(const r in t)$n(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&$n(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zo(t,e,n,r){try{return r?t(...r):t()}catch(s){Jc(s,e,n)}}function On(t,e,n,r){if(de(t)){const s=zo(t,e,n,r);return s&&__(s)&&s.catch(i=>{Jc(i,e,n)}),s}if(ce(t)){const s=[];for(let i=0;i<t.length;i++)s.push(On(t[i],e,n,r));return s}}function Jc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ke;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const h=c.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}c=c.parent}if(i){Gn(),zo(i,null,10,[t,l,u]),Yn();return}}vA(t,n,s,r,o)}function vA(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const St=[];let gn=-1;const Qs=[];let fr=null,Vs=0;const j_=Promise.resolve();let pc=null;function Hh(t){const e=pc||j_;return t?e.then(this?t.bind(this):t):e}function TA(t){let e=gn+1,n=St.length;for(;e<n;){const r=e+n>>>1,s=St[r],i=Oo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function qh(t){if(!(t.flags&1)){const e=Oo(t),n=St[St.length-1];!n||!(t.flags&2)&&e>=Oo(n)?St.push(t):St.splice(TA(e),0,t),t.flags|=1,H_()}}function H_(){pc||(pc=j_.then(W_))}function wA(t){ce(t)?Qs.push(...t):fr&&t.id===-1?fr.splice(Vs+1,0,t):t.flags&1||(Qs.push(t),t.flags|=1),H_()}function ip(t,e,n=gn+1){for(;n<St.length;n++){const r=St[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;St.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function q_(t){if(Qs.length){const e=[...new Set(Qs)].sort((n,r)=>Oo(n)-Oo(r));if(Qs.length=0,fr){fr.push(...e);return}for(fr=e,Vs=0;Vs<fr.length;Vs++){const n=fr[Vs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fr=null,Vs=0}}const Oo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function W_(t){try{for(gn=0;gn<St.length;gn++){const e=St[gn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;gn<St.length;gn++){const e=St[gn];e&&(e.flags&=-2)}gn=-1,St.length=0,q_(),pc=null,(St.length||Qs.length)&&W_()}}let $t=null,K_=null;function mc(t){const e=$t;return $t=t,K_=t&&t.type.__scopeId||null,e}function rn(t,e=$t,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ep(-1);const i=mc(e);let o;try{o=t(...s)}finally{mc(i),r._d&&Ep(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function yx(t,e){if($t===null)return t;const n=nl($t),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=ke]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&$n(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Zr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Gn(),On(l,n,8,[t.el,c,t,e]),Yn())}}const z_=Symbol("_vte"),AA=t=>t.__isTeleport,fo=t=>t&&(t.disabled||t.disabled===""),op=t=>t&&(t.defer||t.defer===""),ap=t=>typeof SVGElement<"u"&&t instanceof SVGElement,cp=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Uu=(t,e)=>{const n=t&&t.to;return Ge(n)?e?e(n):null:n},G_={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,c,l,u){const{mc:h,pc:d,pbc:m,o:{insert:_,querySelector:S,createText:C,createComment:O}}=u,L=fo(e.props);let{shapeFlag:M,children:j,dynamicChildren:U}=e;if(t==null){const X=e.el=C(""),Z=e.anchor=C("");_(X,n,r),_(Z,n,r);const w=(E,b)=>{M&16&&(s&&s.isCE&&(s.ce._teleportTarget=E),h(j,E,b,s,i,o,c,l))},y=()=>{const E=e.target=Uu(e.props,S),b=Y_(E,e,C,_);E&&(o!=="svg"&&ap(E)?o="svg":o!=="mathml"&&cp(E)&&(o="mathml"),L||(w(E,b),Ka(e,!1)))};L&&(w(n,Z),Ka(e,!0)),op(e.props)?(e.el.__isMounted=!1,bt(()=>{y(),delete e.el.__isMounted},i)):y()}else{if(op(e.props)&&t.el.__isMounted===!1){bt(()=>{G_.process(t,e,n,r,s,i,o,c,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const X=e.anchor=t.anchor,Z=e.target=t.target,w=e.targetAnchor=t.targetAnchor,y=fo(t.props),E=y?n:Z,b=y?X:w;if(o==="svg"||ap(Z)?o="svg":(o==="mathml"||cp(Z))&&(o="mathml"),U?(m(t.dynamicChildren,U,E,s,i,o,c),Yh(t,e,!0)):l||d(t,e,E,b,s,i,o,c,!1),L)y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Sa(e,n,X,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=Uu(e.props,S);I&&Sa(e,I,null,u,0)}else y&&Sa(e,Z,w,u,1);Ka(e,L)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:c,anchor:l,targetStart:u,targetAnchor:h,target:d,props:m}=t;if(d&&(s(u),s(h)),i&&s(l),o&16){const _=i||!fo(m);for(let S=0;S<c.length;S++){const C=c[S];r(C,e,n,_,!!C.dynamicChildren)}}},move:Sa,hydrate:IA};function Sa(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:c,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||fo(h))&&l&16)for(let m=0;m<u.length;m++)s(u[m],e,n,2);d&&r(c,e,n)}function IA(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:c,querySelector:l,insert:u,createText:h}},d){const m=e.target=Uu(e.props,l);if(m){const _=fo(e.props),S=m._lpa||m.firstChild;if(e.shapeFlag&16)if(_)e.anchor=d(o(t),e,c(t),n,r,s,i),e.targetStart=S,e.targetAnchor=S&&o(S);else{e.anchor=o(t);let C=S;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}C=o(C)}e.targetAnchor||Y_(m,e,h,u),d(S&&o(S),e,m,n,r,s,i)}Ka(e,_)}return e.anchor&&o(e.anchor)}const Ex=G_;function Ka(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Y_(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[z_]=i,t&&(r(s,t),r(i,t)),i}const bA=Symbol("_leaveCb");function Wh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Wh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Q_(t,e){return de(t)?vt({name:t.name},e,{setup:t}):t}function X_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function po(t,e,n,r,s=!1){if(ce(t)){t.forEach((S,C)=>po(S,e&&(ce(e)?e[C]:e),n,r,s));return}if(mo(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&po(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?nl(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,h=c.refs===ke?c.refs={}:c.refs,d=c.setupState,m=Re(d),_=d===ke?g_:S=>Pe(m,S);if(u!=null&&u!==l){if(Ge(u))h[u]=null,_(u)&&(d[u]=null);else if(Et(u)){u.value=null;const S=e;S.k&&(h[S.k]=null)}}if(de(l))zo(l,c,12,[o,h]);else{const S=Ge(l),C=Et(l);if(S||C){const O=()=>{if(t.f){const L=S?_(l)?d[l]:h[l]:l.value;if(s)ce(L)&&Dh(L,i);else if(ce(L))L.includes(i)||L.push(i);else if(S)h[l]=[i],_(l)&&(d[l]=h[l]);else{const M=[i];l.value=M,t.k&&(h[t.k]=M)}}else S?(h[l]=o,_(l)&&(d[l]=o)):C&&(l.value=o,t.k&&(h[t.k]=o))};o?(O.id=-1,bt(O,n)):O()}}}Yc().requestIdleCallback;Yc().cancelIdleCallback;const mo=t=>!!t.type.__asyncLoader,J_=t=>t.type.__isKeepAlive;function SA(t,e){Z_(t,"a",e)}function CA(t,e){Z_(t,"da",e)}function Z_(t,e,n=yt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Zc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)J_(s.parent.vnode)&&RA(r,e,n,s),s=s.parent}}function RA(t,e,n,r){const s=Zc(e,t,r,!0);Kh(()=>{Dh(r[e],s)},n)}function Zc(t,e,n=yt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Gn();const c=Go(n),l=On(e,n,t,o);return c(),Yn(),l});return r?s.unshift(i):s.push(i),i}}const tr=t=>(e,n=yt)=>{(!ko||t==="sp")&&Zc(t,(...r)=>e(...r),n)},PA=tr("bm"),ey=tr("m"),NA=tr("bu"),OA=tr("u"),DA=tr("bum"),Kh=tr("um"),kA=tr("sp"),VA=tr("rtg"),LA=tr("rtc");function MA(t,e=yt){Zc("ec",t,e)}const xA="components";function lp(t,e){return UA(xA,t,!0,e)||t}const FA=Symbol.for("v-ndc");function UA(t,e,n=!0,r=!1){const s=$t||yt;if(s){const i=s.type;{const c=CI(i,!1);if(c&&(c===e||c===Jt(e)||c===Gc(Jt(e))))return i}const o=up(s[t]||i[t],e)||up(s.appContext[t],e);return!o&&r?i:o}}function up(t,e){return t&&(t[e]||t[Jt(e)]||t[Gc(Jt(e))])}function vx(t,e,n,r){let s;const i=n,o=ce(t);if(o||Ge(t)){const c=o&&Gs(t);let l=!1,u=!1;c&&(l=!Yt(t),u=Sr(t),t=Qc(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(l?u?fc(lt(t[h])):lt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Me(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const h=c[l];s[l]=e(t[h],h,l,i)}}else s=[];return s}const $u=t=>t?Ey(t)?nl(t):$u(t.parent):null,go=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$u(t.parent),$root:t=>$u(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ny(t),$forceUpdate:t=>t.f||(t.f=()=>{qh(t.update)}),$nextTick:t=>t.n||(t.n=Hh.bind(t.proxy)),$watch:t=>oI.bind(t)}),eu=(t,e)=>t!==ke&&!t.__isScriptSetup&&Pe(t,e),$A={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(eu(r,e))return o[e]=1,r[e];if(s!==ke&&Pe(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Pe(u,e))return o[e]=3,i[e];if(n!==ke&&Pe(n,e))return o[e]=4,n[e];Bu&&(o[e]=0)}}const h=go[e];let d,m;if(h)return e==="$attrs"&&gt(t.attrs,"get",""),h(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(n!==ke&&Pe(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,Pe(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return eu(s,e)?(s[e]=n,!0):r!==ke&&Pe(r,e)?(r[e]=n,!0):Pe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==ke&&c[0]!=="$"&&Pe(t,c)||eu(e,c)||(l=i[0])&&Pe(l,c)||Pe(r,c)||Pe(go,c)||Pe(s.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function hp(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Bu=!0;function BA(t){const e=ny(t),n=t.proxy,r=t.ctx;Bu=!1,e.beforeCreate&&fp(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:_,updated:S,activated:C,deactivated:O,beforeDestroy:L,beforeUnmount:M,destroyed:j,unmounted:U,render:X,renderTracked:Z,renderTriggered:w,errorCaptured:y,serverPrefetch:E,expose:b,inheritAttrs:I,components:R,directives:v,filters:Oe}=e;if(u&&jA(u,r,null),o)for(const pe in o){const me=o[pe];de(me)&&(r[pe]=me.bind(n))}if(s){const pe=s.call(n,n);Me(pe)&&(t.data=Xc(pe))}if(Bu=!0,i)for(const pe in i){const me=i[pe],He=de(me)?me.bind(n,n):de(me.get)?me.get.bind(n,n):vn,wt=!de(me)&&de(me.set)?me.set.bind(n):vn,it=Ft({get:He,set:wt});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>it.value,set:$e=>it.value=$e})}if(c)for(const pe in c)ty(c[pe],r,n,pe);if(l){const pe=de(l)?l.call(n):l;Reflect.ownKeys(pe).forEach(me=>{za(me,pe[me])})}h&&fp(h,t,"c");function Ae(pe,me){ce(me)?me.forEach(He=>pe(He.bind(n))):me&&pe(me.bind(n))}if(Ae(PA,d),Ae(ey,m),Ae(NA,_),Ae(OA,S),Ae(SA,C),Ae(CA,O),Ae(MA,y),Ae(LA,Z),Ae(VA,w),Ae(DA,M),Ae(Kh,U),Ae(kA,E),ce(b))if(b.length){const pe=t.exposed||(t.exposed={});b.forEach(me=>{Object.defineProperty(pe,me,{get:()=>n[me],set:He=>n[me]=He,enumerable:!0})})}else t.exposed||(t.exposed={});X&&t.render===vn&&(t.render=X),I!=null&&(t.inheritAttrs=I),R&&(t.components=R),v&&(t.directives=v),E&&X_(t)}function jA(t,e,n=vn){ce(t)&&(t=ju(t));for(const r in t){const s=t[r];let i;Me(s)?"default"in s?i=an(s.from||r,s.default,!0):i=an(s.from||r):i=an(s),Et(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function fp(t,e,n){On(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ty(t,e,n,r){let s=r.includes(".")?py(n,r):()=>n[r];if(Ge(t)){const i=e[t];de(i)&&Ga(s,i)}else if(de(t))Ga(s,t.bind(n));else if(Me(t))if(ce(t))t.forEach(i=>ty(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&Ga(s,i,t)}}function ny(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>gc(l,u,o,!0)),gc(l,e,o)),Me(e)&&i.set(e,l),l}function gc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&gc(t,i,n,!0),s&&s.forEach(o=>gc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=HA[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const HA={data:dp,props:pp,emits:pp,methods:no,computed:no,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:no,directives:no,watch:WA,provide:dp,inject:qA};function dp(t,e){return e?t?function(){return vt(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function qA(t,e){return no(ju(t),ju(e))}function ju(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function It(t,e){return t?[...new Set([].concat(t,e))]:e}function no(t,e){return t?vt(Object.create(null),t,e):e}function pp(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:vt(Object.create(null),hp(t),hp(e??{})):e}function WA(t,e){if(!t)return e;if(!e)return t;const n=vt(Object.create(null),t);for(const r in e)n[r]=It(t[r],e[r]);return n}function ry(){return{app:null,config:{isNativeTag:g_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let KA=0;function zA(t,e){return function(r,s=null){de(r)||(r=vt({},r)),s!=null&&!Me(s)&&(s=null);const i=ry(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:KA++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:PI,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&de(h.install)?(o.add(h),h.install(u,...d)):de(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!l){const _=u._ceVNode||Fe(r,s);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,h,m),l=!0,u._container=h,h.__vue_app__=u,nl(_.component)}},onUnmount(h){c.push(h)},unmount(){l&&(On(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=Xs;Xs=u;try{return h()}finally{Xs=d}}};return u}}let Xs=null;function za(t,e){if(yt){let n=yt.provides;const r=yt.parent&&yt.parent.provides;r===n&&(n=yt.provides=Object.create(r)),n[t]=e}}function an(t,e,n=!1){const r=wI();if(r||Xs){let s=Xs?Xs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}const sy={},iy=()=>Object.create(sy),oy=t=>Object.getPrototypeOf(t)===sy;function GA(t,e,n,r=!1){const s={},i=iy();t.propsDefaults=Object.create(null),ay(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:F_(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function YA(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Re(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(el(t.emitsOptions,m))continue;const _=e[m];if(l)if(Pe(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const S=Jt(m);s[S]=Hu(l,c,S,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{ay(t,e,s,i)&&(u=!0);let h;for(const d in c)(!e||!Pe(e,d)&&((h=Ur(d))===d||!Pe(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=Hu(l,c,d,void 0,t,!0)):delete s[d]);if(i!==c)for(const d in i)(!e||!Pe(e,d))&&(delete i[d],u=!0)}u&&Un(t.attrs,"set","")}function ay(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(lo(l))continue;const u=e[l];let h;s&&Pe(s,h=Jt(l))?!i||!i.includes(h)?n[h]=u:(c||(c={}))[h]=u:el(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Re(n),u=c||ke;for(let h=0;h<i.length;h++){const d=i[h];n[d]=Hu(s,l,d,u[d],t,!Pe(u,d))}}return o}function Hu(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=Pe(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&de(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Go(s);r=u[n]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Ur(n))&&(r=!0))}return r}const QA=new WeakMap;function cy(t,e,n=!1){const r=n?QA:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!de(t)){const h=d=>{l=!0;const[m,_]=cy(d,e,!0);vt(o,m),_&&c.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Me(t)&&r.set(t,Ks),Ks;if(ce(i))for(let h=0;h<i.length;h++){const d=Jt(i[h]);mp(d)&&(o[d]=ke)}else if(i)for(const h in i){const d=Jt(h);if(mp(d)){const m=i[h],_=o[d]=ce(m)||de(m)?{type:m}:vt({},m),S=_.type;let C=!1,O=!0;if(ce(S))for(let L=0;L<S.length;++L){const M=S[L],j=de(M)&&M.name;if(j==="Boolean"){C=!0;break}else j==="String"&&(O=!1)}else C=de(S)&&S.name==="Boolean";_[0]=C,_[1]=O,(C||Pe(_,"default"))&&c.push(d)}}const u=[o,c];return Me(t)&&r.set(t,u),u}function mp(t){return t[0]!=="$"&&!lo(t)}const zh=t=>t==="_"||t==="_ctx"||t==="$stable",Gh=t=>ce(t)?t.map(En):[En(t)],XA=(t,e,n)=>{if(e._n)return e;const r=rn((...s)=>Gh(e(...s)),n);return r._c=!1,r},ly=(t,e,n)=>{const r=t._ctx;for(const s in t){if(zh(s))continue;const i=t[s];if(de(i))e[s]=XA(s,i,r);else if(i!=null){const o=Gh(i);e[s]=()=>o}}},uy=(t,e)=>{const n=Gh(e);t.slots.default=()=>n},hy=(t,e,n)=>{for(const r in e)(n||!zh(r))&&(t[r]=e[r])},JA=(t,e,n)=>{const r=t.slots=iy();if(t.vnode.shapeFlag&32){const s=e._;s?(hy(r,e,n),n&&v_(r,"_",s,!0)):ly(e,r)}else e&&uy(t,e)},ZA=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ke;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:hy(s,e,n):(i=!e.$stable,ly(e,s)),o=e}else e&&(uy(t,e),o={default:1});if(i)for(const c in s)!zh(c)&&o[c]==null&&delete s[c]},bt=dI;function eI(t){return tI(t)}function tI(t,e){const n=Yc();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:_=vn,insertStaticContent:S}=t,C=(T,A,P,x=null,$=null,V=null,Q=void 0,K=null,H=!!A.dynamicChildren)=>{if(T===A)return;T&&!Xi(T,A)&&(x=k(T),$e(T,$,V,!0),T=null),A.patchFlag===-2&&(H=!1,A.dynamicChildren=null);const{type:q,ref:se,shapeFlag:J}=A;switch(q){case tl:O(T,A,P,x);break;case Cr:L(T,A,P,x);break;case Ya:T==null&&M(A,P,x,Q);break;case yn:R(T,A,P,x,$,V,Q,K,H);break;default:J&1?X(T,A,P,x,$,V,Q,K,H):J&6?v(T,A,P,x,$,V,Q,K,H):(J&64||J&128)&&q.process(T,A,P,x,$,V,Q,K,H,ne)}se!=null&&$?po(se,T&&T.ref,V,A||T,!A):se==null&&T&&T.ref!=null&&po(T.ref,null,V,T,!0)},O=(T,A,P,x)=>{if(T==null)r(A.el=c(A.children),P,x);else{const $=A.el=T.el;A.children!==T.children&&u($,A.children)}},L=(T,A,P,x)=>{T==null?r(A.el=l(A.children||""),P,x):A.el=T.el},M=(T,A,P,x)=>{[T.el,T.anchor]=S(T.children,A,P,x,T.el,T.anchor)},j=({el:T,anchor:A},P,x)=>{let $;for(;T&&T!==A;)$=m(T),r(T,P,x),T=$;r(A,P,x)},U=({el:T,anchor:A})=>{let P;for(;T&&T!==A;)P=m(T),s(T),T=P;s(A)},X=(T,A,P,x,$,V,Q,K,H)=>{A.type==="svg"?Q="svg":A.type==="math"&&(Q="mathml"),T==null?Z(A,P,x,$,V,Q,K,H):E(T,A,$,V,Q,K,H)},Z=(T,A,P,x,$,V,Q,K)=>{let H,q;const{props:se,shapeFlag:J,transition:re,dirs:oe}=T;if(H=T.el=o(T.type,V,se&&se.is,se),J&8?h(H,T.children):J&16&&y(T.children,H,null,x,$,tu(T,V),Q,K),oe&&Zr(T,null,x,"created"),w(H,T,T.scopeId,Q,x),se){for(const Se in se)Se!=="value"&&!lo(Se)&&i(H,Se,null,se[Se],V,x);"value"in se&&i(H,"value",null,se.value,V),(q=se.onVnodeBeforeMount)&&mn(q,x,T)}oe&&Zr(T,null,x,"beforeMount");const ge=nI($,re);ge&&re.beforeEnter(H),r(H,A,P),((q=se&&se.onVnodeMounted)||ge||oe)&&bt(()=>{q&&mn(q,x,T),ge&&re.enter(H),oe&&Zr(T,null,x,"mounted")},$)},w=(T,A,P,x,$)=>{if(P&&_(T,P),x)for(let V=0;V<x.length;V++)_(T,x[V]);if($){let V=$.subTree;if(A===V||gy(V.type)&&(V.ssContent===A||V.ssFallback===A)){const Q=$.vnode;w(T,Q,Q.scopeId,Q.slotScopeIds,$.parent)}}},y=(T,A,P,x,$,V,Q,K,H=0)=>{for(let q=H;q<T.length;q++){const se=T[q]=K?dr(T[q]):En(T[q]);C(null,se,A,P,x,$,V,Q,K)}},E=(T,A,P,x,$,V,Q)=>{const K=A.el=T.el;let{patchFlag:H,dynamicChildren:q,dirs:se}=A;H|=T.patchFlag&16;const J=T.props||ke,re=A.props||ke;let oe;if(P&&es(P,!1),(oe=re.onVnodeBeforeUpdate)&&mn(oe,P,A,T),se&&Zr(A,T,P,"beforeUpdate"),P&&es(P,!0),(J.innerHTML&&re.innerHTML==null||J.textContent&&re.textContent==null)&&h(K,""),q?b(T.dynamicChildren,q,K,P,x,tu(A,$),V):Q||me(T,A,K,null,P,x,tu(A,$),V,!1),H>0){if(H&16)I(K,J,re,P,$);else if(H&2&&J.class!==re.class&&i(K,"class",null,re.class,$),H&4&&i(K,"style",J.style,re.style,$),H&8){const ge=A.dynamicProps;for(let Se=0;Se<ge.length;Se++){const Ee=ge[Se],ft=J[Ee],dt=re[Ee];(dt!==ft||Ee==="value")&&i(K,Ee,ft,dt,$,P)}}H&1&&T.children!==A.children&&h(K,A.children)}else!Q&&q==null&&I(K,J,re,P,$);((oe=re.onVnodeUpdated)||se)&&bt(()=>{oe&&mn(oe,P,A,T),se&&Zr(A,T,P,"updated")},x)},b=(T,A,P,x,$,V,Q)=>{for(let K=0;K<A.length;K++){const H=T[K],q=A[K],se=H.el&&(H.type===yn||!Xi(H,q)||H.shapeFlag&198)?d(H.el):P;C(H,q,se,null,x,$,V,Q,!0)}},I=(T,A,P,x,$)=>{if(A!==P){if(A!==ke)for(const V in A)!lo(V)&&!(V in P)&&i(T,V,A[V],null,$,x);for(const V in P){if(lo(V))continue;const Q=P[V],K=A[V];Q!==K&&V!=="value"&&i(T,V,K,Q,$,x)}"value"in P&&i(T,"value",A.value,P.value,$)}},R=(T,A,P,x,$,V,Q,K,H)=>{const q=A.el=T?T.el:c(""),se=A.anchor=T?T.anchor:c("");let{patchFlag:J,dynamicChildren:re,slotScopeIds:oe}=A;oe&&(K=K?K.concat(oe):oe),T==null?(r(q,P,x),r(se,P,x),y(A.children||[],P,se,$,V,Q,K,H)):J>0&&J&64&&re&&T.dynamicChildren?(b(T.dynamicChildren,re,P,$,V,Q,K),(A.key!=null||$&&A===$.subTree)&&Yh(T,A,!0)):me(T,A,P,se,$,V,Q,K,H)},v=(T,A,P,x,$,V,Q,K,H)=>{A.slotScopeIds=K,T==null?A.shapeFlag&512?$.ctx.activate(A,P,x,Q,H):Oe(A,P,x,$,V,Q,H):je(T,A,H)},Oe=(T,A,P,x,$,V,Q)=>{const K=T.component=TI(T,x,$);if(J_(T)&&(K.ctx.renderer=ne),AI(K,!1,Q),K.asyncDep){if($&&$.registerDep(K,Ae,Q),!T.el){const H=K.subTree=Fe(Cr);L(null,H,A,P),T.placeholder=H.el}}else Ae(K,T,A,P,$,V,Q)},je=(T,A,P)=>{const x=A.component=T.component;if(hI(T,A,P))if(x.asyncDep&&!x.asyncResolved){pe(x,A,P);return}else x.next=A,x.update();else A.el=T.el,x.vnode=A},Ae=(T,A,P,x,$,V,Q)=>{const K=()=>{if(T.isMounted){let{next:J,bu:re,u:oe,parent:ge,vnode:Se}=T;{const Mt=fy(T);if(Mt){J&&(J.el=Se.el,pe(T,J,Q)),Mt.asyncDep.then(()=>{T.isUnmounted||K()});return}}let Ee=J,ft;es(T,!1),J?(J.el=Se.el,pe(T,J,Q)):J=Se,re&&Ha(re),(ft=J.props&&J.props.onVnodeBeforeUpdate)&&mn(ft,ge,J,Se),es(T,!0);const dt=_p(T),Lt=T.subTree;T.subTree=dt,C(Lt,dt,d(Lt.el),k(Lt),T,$,V),J.el=dt.el,Ee===null&&fI(T,dt.el),oe&&bt(oe,$),(ft=J.props&&J.props.onVnodeUpdated)&&bt(()=>mn(ft,ge,J,Se),$)}else{let J;const{el:re,props:oe}=A,{bm:ge,m:Se,parent:Ee,root:ft,type:dt}=T,Lt=mo(A);es(T,!1),ge&&Ha(ge),!Lt&&(J=oe&&oe.onVnodeBeforeMount)&&mn(J,Ee,A),es(T,!0);{ft.ce&&ft.ce._def.shadowRoot!==!1&&ft.ce._injectChildStyle(dt);const Mt=T.subTree=_p(T);C(null,Mt,P,x,T,$,V),A.el=Mt.el}if(Se&&bt(Se,$),!Lt&&(J=oe&&oe.onVnodeMounted)){const Mt=A;bt(()=>mn(J,Ee,Mt),$)}(A.shapeFlag&256||Ee&&mo(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&T.a&&bt(T.a,$),T.isMounted=!0,A=P=x=null}};T.scope.on();const H=T.effect=new I_(K);T.scope.off();const q=T.update=H.run.bind(H),se=T.job=H.runIfDirty.bind(H);se.i=T,se.id=T.uid,H.scheduler=()=>qh(se),es(T,!0),q()},pe=(T,A,P)=>{A.component=T;const x=T.vnode.props;T.vnode=A,T.next=null,YA(T,A.props,x,P),ZA(T,A.children,P),Gn(),ip(T),Yn()},me=(T,A,P,x,$,V,Q,K,H=!1)=>{const q=T&&T.children,se=T?T.shapeFlag:0,J=A.children,{patchFlag:re,shapeFlag:oe}=A;if(re>0){if(re&128){wt(q,J,P,x,$,V,Q,K,H);return}else if(re&256){He(q,J,P,x,$,V,Q,K,H);return}}oe&8?(se&16&&qe(q,$,V),J!==q&&h(P,J)):se&16?oe&16?wt(q,J,P,x,$,V,Q,K,H):qe(q,$,V,!0):(se&8&&h(P,""),oe&16&&y(J,P,x,$,V,Q,K,H))},He=(T,A,P,x,$,V,Q,K,H)=>{T=T||Ks,A=A||Ks;const q=T.length,se=A.length,J=Math.min(q,se);let re;for(re=0;re<J;re++){const oe=A[re]=H?dr(A[re]):En(A[re]);C(T[re],oe,P,null,$,V,Q,K,H)}q>se?qe(T,$,V,!0,!1,J):y(A,P,x,$,V,Q,K,H,J)},wt=(T,A,P,x,$,V,Q,K,H)=>{let q=0;const se=A.length;let J=T.length-1,re=se-1;for(;q<=J&&q<=re;){const oe=T[q],ge=A[q]=H?dr(A[q]):En(A[q]);if(Xi(oe,ge))C(oe,ge,P,null,$,V,Q,K,H);else break;q++}for(;q<=J&&q<=re;){const oe=T[J],ge=A[re]=H?dr(A[re]):En(A[re]);if(Xi(oe,ge))C(oe,ge,P,null,$,V,Q,K,H);else break;J--,re--}if(q>J){if(q<=re){const oe=re+1,ge=oe<se?A[oe].el:x;for(;q<=re;)C(null,A[q]=H?dr(A[q]):En(A[q]),P,ge,$,V,Q,K,H),q++}}else if(q>re)for(;q<=J;)$e(T[q],$,V,!0),q++;else{const oe=q,ge=q,Se=new Map;for(q=ge;q<=re;q++){const at=A[q]=H?dr(A[q]):En(A[q]);at.key!=null&&Se.set(at.key,q)}let Ee,ft=0;const dt=re-ge+1;let Lt=!1,Mt=0;const nn=new Array(dt);for(q=0;q<dt;q++)nn[q]=0;for(q=oe;q<=J;q++){const at=T[q];if(ft>=dt){$e(at,$,V,!0);continue}let nt;if(at.key!=null)nt=Se.get(at.key);else for(Ee=ge;Ee<=re;Ee++)if(nn[Ee-ge]===0&&Xi(at,A[Ee])){nt=Ee;break}nt===void 0?$e(at,$,V,!0):(nn[nt-ge]=q+1,nt>=Mt?Mt=nt:Lt=!0,C(at,A[nt],P,null,$,V,Q,K,H),ft++)}const Is=Lt?rI(nn):Ks;for(Ee=Is.length-1,q=dt-1;q>=0;q--){const at=ge+q,nt=A[at],Vi=A[at+1],Gr=at+1<se?Vi.el||Vi.placeholder:x;nn[q]===0?C(null,nt,P,Gr,$,V,Q,K,H):Lt&&(Ee<0||q!==Is[Ee]?it(nt,P,Gr,2):Ee--)}}},it=(T,A,P,x,$=null)=>{const{el:V,type:Q,transition:K,children:H,shapeFlag:q}=T;if(q&6){it(T.component.subTree,A,P,x);return}if(q&128){T.suspense.move(A,P,x);return}if(q&64){Q.move(T,A,P,ne);return}if(Q===yn){r(V,A,P);for(let J=0;J<H.length;J++)it(H[J],A,P,x);r(T.anchor,A,P);return}if(Q===Ya){j(T,A,P);return}if(x!==2&&q&1&&K)if(x===0)K.beforeEnter(V),r(V,A,P),bt(()=>K.enter(V),$);else{const{leave:J,delayLeave:re,afterLeave:oe}=K,ge=()=>{T.ctx.isUnmounted?s(V):r(V,A,P)},Se=()=>{V._isLeaving&&V[bA](!0),J(V,()=>{ge(),oe&&oe()})};re?re(V,ge,Se):Se()}else r(V,A,P)},$e=(T,A,P,x=!1,$=!1)=>{const{type:V,props:Q,ref:K,children:H,dynamicChildren:q,shapeFlag:se,patchFlag:J,dirs:re,cacheIndex:oe}=T;if(J===-2&&($=!1),K!=null&&(Gn(),po(K,null,P,T,!0),Yn()),oe!=null&&(A.renderCache[oe]=void 0),se&256){A.ctx.deactivate(T);return}const ge=se&1&&re,Se=!mo(T);let Ee;if(Se&&(Ee=Q&&Q.onVnodeBeforeUnmount)&&mn(Ee,A,T),se&6)ot(T.component,P,x);else{if(se&128){T.suspense.unmount(P,x);return}ge&&Zr(T,null,A,"beforeUnmount"),se&64?T.type.remove(T,A,P,ne,x):q&&!q.hasOnce&&(V!==yn||J>0&&J&64)?qe(q,A,P,!1,!0):(V===yn&&J&384||!$&&se&16)&&qe(H,A,P),x&&Pt(T)}(Se&&(Ee=Q&&Q.onVnodeUnmounted)||ge)&&bt(()=>{Ee&&mn(Ee,A,T),ge&&Zr(T,null,A,"unmounted")},P)},Pt=T=>{const{type:A,el:P,anchor:x,transition:$}=T;if(A===yn){tt(P,x);return}if(A===Ya){U(T);return}const V=()=>{s(P),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(T.shapeFlag&1&&$&&!$.persisted){const{leave:Q,delayLeave:K}=$,H=()=>Q(P,V);K?K(T.el,V,H):H()}else V()},tt=(T,A)=>{let P;for(;T!==A;)P=m(T),s(T),T=P;s(A)},ot=(T,A,P)=>{const{bum:x,scope:$,job:V,subTree:Q,um:K,m:H,a:q}=T;gp(H),gp(q),x&&Ha(x),$.stop(),V&&(V.flags|=8,$e(Q,T,A,P)),K&&bt(K,A),bt(()=>{T.isUnmounted=!0},A)},qe=(T,A,P,x=!1,$=!1,V=0)=>{for(let Q=V;Q<T.length;Q++)$e(T[Q],A,P,x,$)},k=T=>{if(T.shapeFlag&6)return k(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const A=m(T.anchor||T.el),P=A&&A[z_];return P?m(P):A};let Y=!1;const G=(T,A,P)=>{T==null?A._vnode&&$e(A._vnode,null,null,!0):C(A._vnode||null,T,A,null,null,null,P),A._vnode=T,Y||(Y=!0,ip(),q_(),Y=!1)},ne={p:C,um:$e,m:it,r:Pt,mt:Oe,mc:y,pc:me,pbc:b,n:k,o:t};return{render:G,hydrate:void 0,createApp:zA(G)}}function tu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function es({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nI(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Yh(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=dr(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Yh(o,c)),c.type===tl&&c.patchFlag!==-1&&(c.el=o.el),c.type===Cr&&!c.el&&(c.el=o.el)}}function rI(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function fy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fy(e)}function gp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const sI=Symbol.for("v-scx"),iI=()=>an(sI);function Ga(t,e,n){return dy(t,e,n)}function dy(t,e,n=ke){const{immediate:r,deep:s,flush:i,once:o}=n,c=vt({},n),l=e&&r||!e&&i!=="post";let u;if(ko){if(i==="sync"){const _=iI();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=vn,_.resume=vn,_.pause=vn,_}}const h=yt;c.call=(_,S,C)=>On(_,h,S,C);let d=!1;i==="post"?c.scheduler=_=>{bt(_,h&&h.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(_,S)=>{S?_():qh(_)}),c.augmentJob=_=>{e&&(_.flags|=4),d&&(_.flags|=2,h&&(_.id=h.uid,_.i=h))};const m=EA(t,e,c);return ko&&(u?u.push(m):l&&m()),m}function oI(t,e,n){const r=this.proxy,s=Ge(t)?t.includes(".")?py(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=Go(this),c=dy(s,i.bind(r),n);return o(),c}function py(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const aI=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${Ur(e)}Modifiers`];function cI(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ke;let s=n;const i=e.startsWith("update:"),o=i&&aI(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Ge(h)?h.trim():h)),o.number&&(s=n.map(hc)));let c,l=r[c=Yl(e)]||r[c=Yl(Jt(e))];!l&&i&&(l=r[c=Yl(Ur(e))]),l&&On(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,On(u,t,6,s)}}function my(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!de(t)){const l=u=>{const h=my(u,e,!0);h&&(c=!0,vt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Me(t)&&r.set(t,null),null):(ce(i)?i.forEach(l=>o[l]=null):vt(o,i),Me(t)&&r.set(t,o),o)}function el(t,e){return!t||!Kc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pe(t,e[0].toLowerCase()+e.slice(1))||Pe(t,Ur(e))||Pe(t,e))}function _p(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:h,props:d,data:m,setupState:_,ctx:S,inheritAttrs:C}=t,O=mc(t);let L,M;try{if(n.shapeFlag&4){const U=s||r,X=U;L=En(u.call(X,U,h,d,_,m,S)),M=c}else{const U=e;L=En(U.length>1?U(d,{attrs:c,slots:o,emit:l}):U(d,null)),M=e.props?c:lI(c)}}catch(U){_o.length=0,Jc(U,t,1),L=Fe(Cr)}let j=L;if(M&&C!==!1){const U=Object.keys(M),{shapeFlag:X}=j;U.length&&X&7&&(i&&U.some(Oh)&&(M=uI(M,i)),j=ri(j,M,!1,!0))}return n.dirs&&(j=ri(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&Wh(j,n.transition),L=j,mc(O),L}const lI=t=>{let e;for(const n in t)(n==="class"||n==="style"||Kc(n))&&((e||(e={}))[n]=t[n]);return e},uI=(t,e)=>{const n={};for(const r in t)(!Oh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function hI(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?yp(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==r[m]&&!el(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?yp(r,o,u):!0:!!o;return!1}function yp(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!el(n,i))return!0}return!1}function fI({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const gy=t=>t.__isSuspense;function dI(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):wA(t)}const yn=Symbol.for("v-fgt"),tl=Symbol.for("v-txt"),Cr=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),_o=[];let Bt=null;function Ls(t=!1){_o.push(Bt=t?null:[])}function pI(){_o.pop(),Bt=_o[_o.length-1]||null}let Do=1;function Ep(t,e=!1){Do+=t,t<0&&Bt&&e&&(Bt.hasOnce=!0)}function _y(t){return t.dynamicChildren=Do>0?Bt||Ks:null,pI(),Do>0&&Bt&&Bt.push(t),t}function Qi(t,e,n,r,s,i){return _y(ye(t,e,n,r,s,i,!0))}function mI(t,e,n,r,s){return _y(Fe(t,e,n,r,s,!0))}function _c(t){return t?t.__v_isVNode===!0:!1}function Xi(t,e){return t.type===e.type&&t.key===e.key}const yy=({key:t})=>t??null,Qa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ge(t)||Et(t)||de(t)?{i:$t,r:t,k:e,f:!!n}:t:null);function ye(t,e=null,n=null,r=0,s=null,i=t===yn?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&yy(e),ref:e&&Qa(e),scopeId:K_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$t};return c?(Qh(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ge(n)?8:16),Do>0&&!o&&Bt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Bt.push(l),l}const Fe=gI;function gI(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===FA)&&(t=Cr),_c(t)){const c=ri(t,e,!0);return n&&Qh(c,n),Do>0&&!i&&Bt&&(c.shapeFlag&6?Bt[Bt.indexOf(t)]=c:Bt.push(c)),c.patchFlag=-2,c}if(RI(t)&&(t=t.__vccOpts),e){e=_I(e);let{class:c,style:l}=e;c&&!Ge(c)&&(e.class=mr(c)),Me(l)&&(jh(l)&&!ce(l)&&(l=vt({},l)),e.style=Vh(l))}const o=Ge(t)?1:gy(t)?128:AA(t)?64:Me(t)?4:de(t)?2:0;return ye(t,e,n,r,s,o,i,!0)}function _I(t){return t?jh(t)||oy(t)?vt({},t):t:null}function ri(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?yI(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&yy(u),ref:e&&e.ref?n&&i?ce(i)?i.concat(Qa(e)):[i,Qa(e)]:Qa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==yn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ri(t.ssContent),ssFallback:t.ssFallback&&ri(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Wh(h,l.clone(h)),h}function zt(t=" ",e=0){return Fe(tl,null,t,e)}function Tx(t,e){const n=Fe(Ya,null,t);return n.staticCount=e,n}function Ca(t="",e=!1){return e?(Ls(),mI(Cr,null,t)):Fe(Cr,null,t)}function En(t){return t==null||typeof t=="boolean"?Fe(Cr):ce(t)?Fe(yn,null,t.slice()):_c(t)?dr(t):Fe(tl,null,String(t))}function dr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ri(t)}function Qh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Qh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!oy(e)?e._ctx=$t:s===3&&$t&&($t.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:$t},n=32):(e=String(e),r&64?(n=16,e=[zt(e)]):n=8);t.children=e,t.shapeFlag|=n}function yI(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=mr([e.class,r.class]));else if(s==="style")e.style=Vh([e.style,r.style]);else if(Kc(s)){const i=e[s],o=r[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function mn(t,e,n,r=null){On(t,e,7,[n,r])}const EI=ry();let vI=0;function TI(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||EI,i={uid:vI++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cy(r,s),emitsOptions:my(r,s),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=cI.bind(null,i),t.ce&&t.ce(i),i}let yt=null;const wI=()=>yt||$t;let yc,qu;{const t=Yc(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};yc=e("__VUE_INSTANCE_SETTERS__",n=>yt=n),qu=e("__VUE_SSR_SETTERS__",n=>ko=n)}const Go=t=>{const e=yt;return yc(t),t.scope.on(),()=>{t.scope.off(),yc(e)}},vp=()=>{yt&&yt.scope.off(),yc(null)};function Ey(t){return t.vnode.shapeFlag&4}let ko=!1;function AI(t,e=!1,n=!1){e&&qu(e);const{props:r,children:s}=t.vnode,i=Ey(t);GA(t,r,i,e),JA(t,s,n||e);const o=i?II(t,e):void 0;return e&&qu(!1),o}function II(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$A);const{setup:r}=n;if(r){Gn();const s=t.setupContext=r.length>1?SI(t):null,i=Go(t),o=zo(r,t,0,[t.props,s]),c=__(o);if(Yn(),i(),(c||t.sp)&&!mo(t)&&X_(t),c){if(o.then(vp,vp),e)return o.then(l=>{Tp(t,l)}).catch(l=>{Jc(l,t,0)});t.asyncDep=o}else Tp(t,o)}else vy(t)}function Tp(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Me(e)&&(t.setupState=B_(e)),vy(t)}function vy(t,e,n){const r=t.type;t.render||(t.render=r.render||vn);{const s=Go(t);Gn();try{BA(t)}finally{Yn(),s()}}}const bI={get(t,e){return gt(t,"get",""),t[e]}};function SI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,bI),slots:t.slots,emit:t.emit,expose:e}}function nl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(B_(fA(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in go)return go[n](t)},has(e,n){return n in e||n in go}})):t.proxy}function CI(t,e=!0){return de(t)?t.displayName||t.name:t.name||e&&t.__name}function RI(t){return de(t)&&"__vccOpts"in t}const Ft=(t,e)=>_A(t,e,ko);function Ty(t,e,n){const r=arguments.length;return r===2?Me(e)&&!ce(e)?_c(e)?Fe(t,null,[e]):Fe(t,e):Fe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&_c(n)&&(n=[n]),Fe(t,e,n))}const PI="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wu;const wp=typeof window<"u"&&window.trustedTypes;if(wp)try{Wu=wp.createPolicy("vue",{createHTML:t=>t})}catch{}const wy=Wu?t=>Wu.createHTML(t):t=>t,NI="http://www.w3.org/2000/svg",OI="http://www.w3.org/1998/Math/MathML",Fn=typeof document<"u"?document:null,Ap=Fn&&Fn.createElement("template"),DI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Fn.createElementNS(NI,t):e==="mathml"?Fn.createElementNS(OI,t):n?Fn.createElement(t,{is:n}):Fn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Fn.createTextNode(t),createComment:t=>Fn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Ap.innerHTML=wy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=Ap.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},kI=Symbol("_vtc");function VI(t,e,n){const r=t[kI];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ec=Symbol("_vod"),Ay=Symbol("_vsh"),wx={beforeMount(t,{value:e},{transition:n}){t[Ec]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ji(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ji(t,!0),r.enter(t)):r.leave(t,()=>{Ji(t,!1)}):Ji(t,e))},beforeUnmount(t,{value:e}){Ji(t,e)}};function Ji(t,e){t.style.display=e?t[Ec]:"none",t[Ay]=!e}const LI=Symbol(""),MI=/(^|;)\s*display\s*:/;function xI(t,e,n){const r=t.style,s=Ge(n);let i=!1;if(n&&!s){if(e)if(Ge(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&Xa(r,c,"")}else for(const o in e)n[o]==null&&Xa(r,o,"");for(const o in n)o==="display"&&(i=!0),Xa(r,o,n[o])}else if(s){if(e!==n){const o=r[LI];o&&(n+=";"+o),r.cssText=n,i=MI.test(n)}}else e&&t.removeAttribute("style");Ec in t&&(t[Ec]=i?r.display:"",t[Ay]&&(r.display="none"))}const Ip=/\s*!important$/;function Xa(t,e,n){if(ce(n))n.forEach(r=>Xa(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=FI(t,e);Ip.test(n)?t.setProperty(Ur(r),n.replace(Ip,""),"important"):t[r]=n}}const bp=["Webkit","Moz","ms"],nu={};function FI(t,e){const n=nu[e];if(n)return n;let r=Jt(e);if(r!=="filter"&&r in t)return nu[e]=r;r=Gc(r);for(let s=0;s<bp.length;s++){const i=bp[s]+r;if(i in t)return nu[e]=i}return e}const Sp="http://www.w3.org/1999/xlink";function Cp(t,e,n,r,s,i=qw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Sp,e.slice(6,e.length)):t.setAttributeNS(Sp,e,n):n==null||i&&!T_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Nn(n)?String(n):n)}function Rp(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?wy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=T_(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Bn(t,e,n,r){t.addEventListener(e,n,r)}function UI(t,e,n,r){t.removeEventListener(e,n,r)}const Pp=Symbol("_vei");function $I(t,e,n,r,s=null){const i=t[Pp]||(t[Pp]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=BI(e);if(r){const u=i[e]=qI(r,s);Bn(t,c,u,l)}else o&&(UI(t,c,o,l),i[e]=void 0)}}const Np=/(?:Once|Passive|Capture)$/;function BI(t){let e;if(Np.test(t)){e={};let r;for(;r=t.match(Np);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ur(t.slice(2)),e]}let ru=0;const jI=Promise.resolve(),HI=()=>ru||(jI.then(()=>ru=0),ru=Date.now());function qI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;On(WI(r,n.value),e,5,[r])};return n.value=t,n.attached=HI(),n}function WI(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Op=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,KI=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?VI(t,r,o):e==="style"?xI(t,n,r):Kc(e)?Oh(e)||$I(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):zI(t,e,r,o))?(Rp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cp(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ge(r))?Rp(t,Jt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Cp(t,e,r,o))};function zI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Op(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Op(e)&&Ge(n)?!1:e in t}const Rr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>Ha(e,n):e};function GI(t){t.target.composing=!0}function Dp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Qt=Symbol("_assign"),kp={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Qt]=Rr(s);const i=r||s.props&&s.props.type==="number";Bn(t,e?"change":"input",o=>{if(o.target.composing)return;let c=t.value;n&&(c=c.trim()),i&&(c=hc(c)),t[Qt](c)}),n&&Bn(t,"change",()=>{t.value=t.value.trim()}),e||(Bn(t,"compositionstart",GI),Bn(t,"compositionend",Dp),Bn(t,"change",Dp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Qt]=Rr(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?hc(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},YI={deep:!0,created(t,e,n){t[Qt]=Rr(n),Bn(t,"change",()=>{const r=t._modelValue,s=si(t),i=t.checked,o=t[Qt];if(ce(r)){const c=Lh(r,s),l=c!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(c,1),o(u)}}else if(Ti(r)){const c=new Set(r);i?c.add(s):c.delete(s),o(c)}else o(Iy(t,i))})},mounted:Vp,beforeUpdate(t,e,n){t[Qt]=Rr(n),Vp(t,e,n)}};function Vp(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ce(e))s=Lh(e,r.props.value)>-1;else if(Ti(e))s=e.has(r.props.value);else{if(e===n)return;s=us(e,Iy(t,!0))}t.checked!==s&&(t.checked=s)}const QI={created(t,{value:e},n){t.checked=us(e,n.props.value),t[Qt]=Rr(n),Bn(t,"change",()=>{t[Qt](si(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Qt]=Rr(r),e!==n&&(t.checked=us(e,r.props.value))}},XI={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ti(e);Bn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?hc(si(o)):si(o));t[Qt](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Hh(()=>{t._assigning=!1})}),t[Qt]=Rr(r)},mounted(t,{value:e}){Lp(t,e)},beforeUpdate(t,e,n){t[Qt]=Rr(n)},updated(t,{value:e}){t._assigning||Lp(t,e)}};function Lp(t,e){const n=t.multiple,r=ce(e);if(!(n&&!r&&!Ti(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=si(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(c)):o.selected=Lh(e,c)>-1}else o.selected=e.has(c);else if(us(si(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function si(t){return"_value"in t?t._value:t.value}function Iy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Ax={created(t,e,n){Ra(t,e,n,null,"created")},mounted(t,e,n){Ra(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Ra(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Ra(t,e,n,r,"updated")}};function JI(t,e){switch(t){case"SELECT":return XI;case"TEXTAREA":return kp;default:switch(e){case"checkbox":return YI;case"radio":return QI;default:return kp}}}function Ra(t,e,n,r,s){const o=JI(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const ZI=["ctrl","shift","alt","meta"],eb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ZI.some(n=>t[`${n}Key`]&&!e.includes(n))},Ix=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=eb[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},tb={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},bx=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Ur(s.key);if(e.some(o=>o===i||tb[o]===i))return t(s)}))},nb=vt({patchProp:KI},DI);let Mp;function rb(){return Mp||(Mp=eI(nb))}const sb=((...t)=>{const e=rb().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=ob(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,ib(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function ib(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ob(t){return Ge(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ms=typeof document<"u";function by(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ab(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&by(t.default)}const Ce=Object.assign;function su(t,e){const n={};for(const r in e){const s=e[r];n[r]=ln(s)?s.map(t):t(s)}return n}const yo=()=>{},ln=Array.isArray,Sy=/#/g,cb=/&/g,lb=/\//g,ub=/=/g,hb=/\?/g,Cy=/\+/g,fb=/%5B/g,db=/%5D/g,Ry=/%5E/g,pb=/%60/g,Py=/%7B/g,mb=/%7C/g,Ny=/%7D/g,gb=/%20/g;function Xh(t){return encodeURI(""+t).replace(mb,"|").replace(fb,"[").replace(db,"]")}function _b(t){return Xh(t).replace(Py,"{").replace(Ny,"}").replace(Ry,"^")}function Ku(t){return Xh(t).replace(Cy,"%2B").replace(gb,"+").replace(Sy,"%23").replace(cb,"%26").replace(pb,"`").replace(Py,"{").replace(Ny,"}").replace(Ry,"^")}function yb(t){return Ku(t).replace(ub,"%3D")}function Eb(t){return Xh(t).replace(Sy,"%23").replace(hb,"%3F")}function vb(t){return t==null?"":Eb(t).replace(lb,"%2F")}function Vo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Tb=/\/$/,wb=t=>t.replace(Tb,"");function iu(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,c>-1?c:e.length),s=t(i)),c>-1&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=Sb(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Vo(o)}}function Ab(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function xp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ib(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ii(e.matched[r],n.matched[s])&&Oy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ii(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Oy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!bb(t[n],e[n]))return!1;return!0}function bb(t,e){return ln(t)?Fp(t,e):ln(e)?Fp(e,t):t===e}function Fp(t,e){return ln(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Sb(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const lr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Lo;(function(t){t.pop="pop",t.push="push"})(Lo||(Lo={}));var Eo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Eo||(Eo={}));function Cb(t){if(!t)if(Ms){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),wb(t)}const Rb=/^[^#]+#/;function Pb(t,e){return t.replace(Rb,"#")+e}function Nb(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const rl=()=>({left:window.scrollX,top:window.scrollY});function Ob(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Nb(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Up(t,e){return(history.state?history.state.position-e:-1)+t}const zu=new Map;function Db(t,e){zu.set(t,e)}function kb(t){const e=zu.get(t);return zu.delete(t),e}let Vb=()=>location.protocol+"//"+location.host;function Dy(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let c=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(c);return l[0]!=="/"&&(l="/"+l),xp(l,"")}return xp(n,t)+r+s}function Lb(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const _=Dy(t,location),S=n.value,C=e.value;let O=0;if(m){if(n.value=_,e.value=m,o&&o===S){o=null;return}O=C?m.position-C.position:0}else r(_);s.forEach(L=>{L(n.value,S,{delta:O,type:Lo.pop,direction:O?O>0?Eo.forward:Eo.back:Eo.unknown})})};function l(){o=n.value}function u(m){s.push(m);const _=()=>{const S=s.indexOf(m);S>-1&&s.splice(S,1)};return i.push(_),_}function h(){const{history:m}=window;m.state&&m.replaceState(Ce({},m.state,{scroll:rl()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function $p(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?rl():null}}function Mb(t){const{history:e,location:n}=window,r={value:Dy(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:Vb()+t+l;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(_){console.error(_),n[h?"replace":"assign"](m)}}function o(l,u){const h=Ce({},e.state,$p(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,h,!0),r.value=l}function c(l,u){const h=Ce({},s.value,e.state,{forward:l,scroll:rl()});i(h.current,h,!0);const d=Ce({},$p(r.value,l,null),{position:h.position+1},u);i(l,d,!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function xb(t){t=Cb(t);const e=Mb(t),n=Lb(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ce({location:"",base:t,go:r,createHref:Pb.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Fb(t){return typeof t=="string"||t&&typeof t=="object"}function ky(t){return typeof t=="string"||typeof t=="symbol"}const Vy=Symbol("");var Bp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Bp||(Bp={}));function oi(t,e){return Ce(new Error,{type:t,[Vy]:!0},e)}function xn(t,e){return t instanceof Error&&Vy in t&&(e==null||!!(t.type&e))}const jp="[^/]+?",Ub={sensitive:!1,strict:!1,start:!0,end:!0},$b=/[.+*?^${}()[\]/\\]/g;function Bb(t,e){const n=Ce({},Ub,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let _=40+(n.sensitive?.25:0);if(m.type===0)d||(s+="/"),s+=m.value.replace($b,"\\$&"),_+=40;else if(m.type===1){const{value:S,repeatable:C,optional:O,regexp:L}=m;i.push({name:S,repeatable:C,optional:O});const M=L||jp;if(M!==jp){_+=10;try{new RegExp(`(${M})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${S}" (${M}): `+U.message)}}let j=C?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(j=O&&u.length<2?`(?:/${j})`:"/"+j),O&&(j+="?"),s+=j,_+=20,O&&(_+=-8),C&&(_+=-20),M===".*"&&(_+=-50)}h.push(_)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const _=h[m]||"",S=i[m-1];d[S.name]=_&&S.repeatable?_.split("/"):_}return d}function l(u){let h="",d=!1;for(const m of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const _ of m)if(_.type===0)h+=_.value;else if(_.type===1){const{value:S,repeatable:C,optional:O}=_,L=S in u?u[S]:"";if(ln(L)&&!C)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const M=ln(L)?L.join("/"):L;if(!M)if(O)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${S}"`);h+=M}}return h||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function jb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ly(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=jb(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Hp(r))return 1;if(Hp(s))return-1}return s.length-r.length}function Hp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Hb={type:0,value:""},qb=/[a-zA-Z0-9_]/;function Wb(t){if(!t)return[[]];if(t==="/")return[[Hb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:qb.test(l)?m():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function Kb(t,e,n){const r=Bb(Wb(t.path),n),s=Ce(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function zb(t,e){const n=[],r=new Map;e=zp({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,m,_){const S=!_,C=Wp(d);C.aliasOf=_&&_.record;const O=zp(e,d),L=[C];if("alias"in d){const U=typeof d.alias=="string"?[d.alias]:d.alias;for(const X of U)L.push(Wp(Ce({},C,{components:_?_.record.components:C.components,path:X,aliasOf:_?_.record:C})))}let M,j;for(const U of L){const{path:X}=U;if(m&&X[0]!=="/"){const Z=m.record.path,w=Z[Z.length-1]==="/"?"":"/";U.path=m.record.path+(X&&w+X)}if(M=Kb(U,m,O),_?_.alias.push(M):(j=j||M,j!==M&&j.alias.push(M),S&&d.name&&!Kp(M)&&o(d.name)),My(M)&&l(M),C.children){const Z=C.children;for(let w=0;w<Z.length;w++)i(Z[w],M,_&&_.children[w])}_=_||M}return j?()=>{o(j)}:yo}function o(d){if(ky(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function c(){return n}function l(d){const m=Qb(d,n);n.splice(m,0,d),d.record.name&&!Kp(d)&&r.set(d.record.name,d)}function u(d,m){let _,S={},C,O;if("name"in d&&d.name){if(_=r.get(d.name),!_)throw oi(1,{location:d});O=_.record.name,S=Ce(qp(m.params,_.keys.filter(j=>!j.optional).concat(_.parent?_.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),d.params&&qp(d.params,_.keys.map(j=>j.name))),C=_.stringify(S)}else if(d.path!=null)C=d.path,_=n.find(j=>j.re.test(C)),_&&(S=_.parse(C),O=_.record.name);else{if(_=m.name?r.get(m.name):n.find(j=>j.re.test(m.path)),!_)throw oi(1,{location:d,currentLocation:m});O=_.record.name,S=Ce({},m.params,d.params),C=_.stringify(S)}const L=[];let M=_;for(;M;)L.unshift(M.record),M=M.parent;return{name:O,path:C,params:S,matched:L,meta:Yb(L)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:c,getRecordMatcher:s}}function qp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Wp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Gb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Gb(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Kp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Yb(t){return t.reduce((e,n)=>Ce(e,n.meta),{})}function zp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Qb(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Ly(t,e[i])<0?r=i:n=i+1}const s=Xb(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function Xb(t){let e=t;for(;e=e.parent;)if(My(e)&&Ly(t,e)===0)return e}function My({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Jb(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Cy," "),o=i.indexOf("="),c=Vo(o<0?i:i.slice(0,o)),l=o<0?null:Vo(i.slice(o+1));if(c in e){let u=e[c];ln(u)||(u=e[c]=[u]),u.push(l)}else e[c]=l}return e}function Gp(t){let e="";for(let n in t){const r=t[n];if(n=yb(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ln(r)?r.map(i=>i&&Ku(i)):[r&&Ku(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function Zb(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ln(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const eS=Symbol(""),Yp=Symbol(""),sl=Symbol(""),Jh=Symbol(""),Gu=Symbol("");function Zi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function pr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(oi(4,{from:n,to:e})):m instanceof Error?l(m):Fb(m)?l(oi(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function ou(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(by(l)){const h=(l.__vccOpts||l)[e];h&&i.push(pr(h,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const d=ab(h)?h.default:h;o.mods[c]=h,o.components[c]=d;const _=(d.__vccOpts||d)[e];return _&&pr(_,n,r,o,c,s)()}))}}return i}function Qp(t){const e=an(sl),n=an(Jh),r=Ft(()=>{const l=Ys(t.to);return e.resolve(l)}),s=Ft(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(ii.bind(null,h));if(m>-1)return m;const _=Xp(l[u-2]);return u>1&&Xp(h)===_&&d[d.length-1].path!==_?d.findIndex(ii.bind(null,l[u-2])):m}),i=Ft(()=>s.value>-1&&iS(n.params,r.value.params)),o=Ft(()=>s.value>-1&&s.value===n.matched.length-1&&Oy(n.params,r.value.params));function c(l={}){if(sS(l)){const u=e[Ys(t.replace)?"replace":"push"](Ys(t.to)).catch(yo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Ft(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function tS(t){return t.length===1?t[0]:t}const nS=Q_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Qp,setup(t,{slots:e}){const n=Xc(Qp(t)),{options:r}=an(sl),s=Ft(()=>({[Jp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Jp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&tS(e.default(n));return t.custom?i:Ty("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),rS=nS;function sS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function iS(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ln(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Xp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jp=(t,e,n)=>t??e??n,oS=Q_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=an(Gu),s=Ft(()=>t.route||r.value),i=an(Yp,0),o=Ft(()=>{let u=Ys(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),c=Ft(()=>s.value.matched[o.value]);za(Yp,Ft(()=>o.value+1)),za(eS,c),za(Gu,s);const l=Wa();return Ga(()=>[l.value,c.value,t.name],([u,h,d],[m,_,S])=>{h&&(h.instances[d]=u,_&&_!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=_.leaveGuards),h.updateGuards.size||(h.updateGuards=_.updateGuards))),u&&h&&(!_||!ii(h,_)||!m)&&(h.enterCallbacks[d]||[]).forEach(C=>C(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=c.value,m=d&&d.components[h];if(!m)return Zp(n.default,{Component:m,route:u});const _=d.props[h],S=_?_===!0?u.params:typeof _=="function"?_(u):_:null,O=Ty(m,Ce({},S,e,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return Zp(n.default,{Component:O,route:u})||O}}});function Zp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const aS=oS;function cS(t){const e=zb(t.routes,t),n=t.parseQuery||Jb,r=t.stringifyQuery||Gp,s=t.history,i=Zi(),o=Zi(),c=Zi(),l=dA(lr);let u=lr;Ms&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=su.bind(null,k=>""+k),d=su.bind(null,vb),m=su.bind(null,Vo);function _(k,Y){let G,ne;return ky(k)?(G=e.getRecordMatcher(k),ne=Y):ne=k,e.addRoute(ne,G)}function S(k){const Y=e.getRecordMatcher(k);Y&&e.removeRoute(Y)}function C(){return e.getRoutes().map(k=>k.record)}function O(k){return!!e.getRecordMatcher(k)}function L(k,Y){if(Y=Ce({},Y||l.value),typeof k=="string"){const P=iu(n,k,Y.path),x=e.resolve({path:P.path},Y),$=s.createHref(P.fullPath);return Ce(P,x,{params:m(x.params),hash:Vo(P.hash),redirectedFrom:void 0,href:$})}let G;if(k.path!=null)G=Ce({},k,{path:iu(n,k.path,Y.path).path});else{const P=Ce({},k.params);for(const x in P)P[x]==null&&delete P[x];G=Ce({},k,{params:d(P)}),Y.params=d(Y.params)}const ne=e.resolve(G,Y),be=k.hash||"";ne.params=h(m(ne.params));const T=Ab(r,Ce({},k,{hash:_b(be),path:ne.path})),A=s.createHref(T);return Ce({fullPath:T,hash:be,query:r===Gp?Zb(k.query):k.query||{}},ne,{redirectedFrom:void 0,href:A})}function M(k){return typeof k=="string"?iu(n,k,l.value.path):Ce({},k)}function j(k,Y){if(u!==k)return oi(8,{from:Y,to:k})}function U(k){return w(k)}function X(k){return U(Ce(M(k),{replace:!0}))}function Z(k){const Y=k.matched[k.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ne=typeof G=="function"?G(k):G;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=M(ne):{path:ne},ne.params={}),Ce({query:k.query,hash:k.hash,params:ne.path!=null?{}:k.params},ne)}}function w(k,Y){const G=u=L(k),ne=l.value,be=k.state,T=k.force,A=k.replace===!0,P=Z(G);if(P)return w(Ce(M(P),{state:typeof P=="object"?Ce({},be,P.state):be,force:T,replace:A}),Y||G);const x=G;x.redirectedFrom=Y;let $;return!T&&Ib(r,ne,G)&&($=oi(16,{to:x,from:ne}),it(ne,ne,!0,!1)),($?Promise.resolve($):b(x,ne)).catch(V=>xn(V)?xn(V,2)?V:wt(V):me(V,x,ne)).then(V=>{if(V){if(xn(V,2))return w(Ce({replace:A},M(V.to),{state:typeof V.to=="object"?Ce({},be,V.to.state):be,force:T}),Y||x)}else V=R(x,ne,!0,A,be);return I(x,ne,V),V})}function y(k,Y){const G=j(k,Y);return G?Promise.reject(G):Promise.resolve()}function E(k){const Y=tt.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(k):k()}function b(k,Y){let G;const[ne,be,T]=lS(k,Y);G=ou(ne.reverse(),"beforeRouteLeave",k,Y);for(const P of ne)P.leaveGuards.forEach(x=>{G.push(pr(x,k,Y))});const A=y.bind(null,k,Y);return G.push(A),qe(G).then(()=>{G=[];for(const P of i.list())G.push(pr(P,k,Y));return G.push(A),qe(G)}).then(()=>{G=ou(be,"beforeRouteUpdate",k,Y);for(const P of be)P.updateGuards.forEach(x=>{G.push(pr(x,k,Y))});return G.push(A),qe(G)}).then(()=>{G=[];for(const P of T)if(P.beforeEnter)if(ln(P.beforeEnter))for(const x of P.beforeEnter)G.push(pr(x,k,Y));else G.push(pr(P.beforeEnter,k,Y));return G.push(A),qe(G)}).then(()=>(k.matched.forEach(P=>P.enterCallbacks={}),G=ou(T,"beforeRouteEnter",k,Y,E),G.push(A),qe(G))).then(()=>{G=[];for(const P of o.list())G.push(pr(P,k,Y));return G.push(A),qe(G)}).catch(P=>xn(P,8)?P:Promise.reject(P))}function I(k,Y,G){c.list().forEach(ne=>E(()=>ne(k,Y,G)))}function R(k,Y,G,ne,be){const T=j(k,Y);if(T)return T;const A=Y===lr,P=Ms?history.state:{};G&&(ne||A?s.replace(k.fullPath,Ce({scroll:A&&P&&P.scroll},be)):s.push(k.fullPath,be)),l.value=k,it(k,Y,G,A),wt()}let v;function Oe(){v||(v=s.listen((k,Y,G)=>{if(!ot.listening)return;const ne=L(k),be=Z(ne);if(be){w(Ce(be,{replace:!0,force:!0}),ne).catch(yo);return}u=ne;const T=l.value;Ms&&Db(Up(T.fullPath,G.delta),rl()),b(ne,T).catch(A=>xn(A,12)?A:xn(A,2)?(w(Ce(M(A.to),{force:!0}),ne).then(P=>{xn(P,20)&&!G.delta&&G.type===Lo.pop&&s.go(-1,!1)}).catch(yo),Promise.reject()):(G.delta&&s.go(-G.delta,!1),me(A,ne,T))).then(A=>{A=A||R(ne,T,!1),A&&(G.delta&&!xn(A,8)?s.go(-G.delta,!1):G.type===Lo.pop&&xn(A,20)&&s.go(-1,!1)),I(ne,T,A)}).catch(yo)}))}let je=Zi(),Ae=Zi(),pe;function me(k,Y,G){wt(k);const ne=Ae.list();return ne.length?ne.forEach(be=>be(k,Y,G)):console.error(k),Promise.reject(k)}function He(){return pe&&l.value!==lr?Promise.resolve():new Promise((k,Y)=>{je.add([k,Y])})}function wt(k){return pe||(pe=!k,Oe(),je.list().forEach(([Y,G])=>k?G(k):Y()),je.reset()),k}function it(k,Y,G,ne){const{scrollBehavior:be}=t;if(!Ms||!be)return Promise.resolve();const T=!G&&kb(Up(k.fullPath,0))||(ne||!G)&&history.state&&history.state.scroll||null;return Hh().then(()=>be(k,Y,T)).then(A=>A&&Ob(A)).catch(A=>me(A,k,Y))}const $e=k=>s.go(k);let Pt;const tt=new Set,ot={currentRoute:l,listening:!0,addRoute:_,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:O,getRoutes:C,resolve:L,options:t,push:U,replace:X,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Ae.add,isReady:He,install(k){const Y=this;k.component("RouterLink",rS),k.component("RouterView",aS),k.config.globalProperties.$router=Y,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>Ys(l)}),Ms&&!Pt&&l.value===lr&&(Pt=!0,U(s.location).catch(be=>{}));const G={};for(const be in lr)Object.defineProperty(G,be,{get:()=>l.value[be],enumerable:!0});k.provide(sl,Y),k.provide(Jh,F_(G)),k.provide(Gu,l);const ne=k.unmount;tt.add(k),k.unmount=function(){tt.delete(k),tt.size<1&&(u=lr,v&&v(),v=null,l.value=lr,Pt=!1,pe=!1),ne()}}};function qe(k){return k.reduce((Y,G)=>Y.then(()=>E(G)),Promise.resolve())}return ot}function lS(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>ii(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>ii(u,l))||s.push(l))}return[n,r,s]}function uS(){return an(sl)}function hS(t){return an(Jh)}const fS=()=>{};var em={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Fy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),r.push(n[h],n[d],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||d==null)throw new pS;const m=i<<2|c>>4;if(r.push(m),u!==64){const _=c<<4&240|u>>2;if(r.push(_),d!==64){const S=u<<6&192|d;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mS=function(t){const e=xy(t);return Fy.encodeByteArray(e,!0)},vc=function(t){return mS(t).replace(/\./g,"")},Uy=function(t){try{return Fy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=()=>gS().__FIREBASE_DEFAULTS__,yS=()=>{if(typeof process>"u"||typeof em>"u")return;const t=em.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ES=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uy(t[1]);return e&&JSON.parse(e)},il=()=>{try{return fS()||_S()||yS()||ES()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$y=t=>il()?.emulatorHosts?.[t],By=t=>{const e=$y(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jy=()=>il()?.config,Hy=t=>il()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zh(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vc(JSON.stringify(n)),vc(JSON.stringify(o)),""].join(".")}const vo={};function wS(){const t={prod:[],emulator:[]};for(const e of Object.keys(vo))vo[e]?t.emulator.push(e):t.prod.push(e);return t}function AS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tm=!1;function ef(t,e){if(typeof window>"u"||typeof document>"u"||!$r(window.location.host)||vo[t]===e||vo[t]||tm)return;vo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=wS().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{tm=!0,o()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=AS(r),_=n("text"),S=document.getElementById(_)||document.createElement("span"),C=n("learnmore"),O=document.getElementById(C)||document.createElement("a"),L=n("preprendIcon"),M=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const j=m.element;c(j),h(O,C);const U=u();l(M,L),j.append(M,S,O,U),document.body.appendChild(j)}i?(S.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function bS(){const t=il()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PS(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OS(){try{return typeof indexedDB=="object"}catch{return!1}}function DS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="FirebaseError";class Ln extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kS,Object.setPrototypeOf(this,Ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?VS(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ln(s,c,r)}}function VS(t,e){return t.replace(LS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LS=/\{\$([^}]+)}/g;function MS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(nm(i)&&nm(o)){if(!hs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function so(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xS(t,e){const n=new FS(t,e);return n.subscribe.bind(n)}class FS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");US(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=au),s.error===void 0&&(s.error=au),s.complete===void 0&&(s.complete=au);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function US(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function au(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class Pr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jS(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BS(t){return t===ns?void 0:t}function jS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $S(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const qS={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},WS=ve.INFO,KS={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},zS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tf{constructor(e){this.name=e,this._logLevel=WS,this._logHandler=zS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const GS=(t,e)=>e.some(n=>t instanceof n);let rm,sm;function YS(){return rm||(rm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QS(){return sm||(sm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qy=new WeakMap,Yu=new WeakMap,Wy=new WeakMap,cu=new WeakMap,nf=new WeakMap;function XS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qy.set(n,t)}).catch(()=>{}),nf.set(e,t),e}function JS(t){if(Yu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yu.set(t,e)}let Qu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZS(t){Qu=t(Qu)}function eC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lu(this),e,...n);return Wy.set(r,e.sort?e.sort():[e]),wr(r)}:QS().includes(t)?function(...e){return t.apply(lu(this),e),wr(qy.get(this))}:function(...e){return wr(t.apply(lu(this),e))}}function tC(t){return typeof t=="function"?eC(t):(t instanceof IDBTransaction&&JS(t),GS(t,YS())?new Proxy(t,Qu):t)}function wr(t){if(t instanceof IDBRequest)return XS(t);if(cu.has(t))return cu.get(t);const e=tC(t);return e!==t&&(cu.set(t,e),nf.set(e,t)),e}const lu=t=>nf.get(t);function nC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=wr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wr(o.result),l.oldVersion,l.newVersion,wr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const rC=["get","getKey","getAll","getAllKeys","count"],sC=["put","add","delete","clear"],uu=new Map;function im(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uu.get(e))return uu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rC.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return uu.set(e,i),i}ZS(t=>({...t,get:(e,n,r)=>im(e,n)||t.get(e,n,r),has:(e,n)=>!!im(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oC(t){return t.getComponent()?.type==="VERSION"}const Xu="@firebase/app",om="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new tf("@firebase/app"),aC="@firebase/app-compat",cC="@firebase/analytics-compat",lC="@firebase/analytics",uC="@firebase/app-check-compat",hC="@firebase/app-check",fC="@firebase/auth",dC="@firebase/auth-compat",pC="@firebase/database",mC="@firebase/data-connect",gC="@firebase/database-compat",_C="@firebase/functions",yC="@firebase/functions-compat",EC="@firebase/installations",vC="@firebase/installations-compat",TC="@firebase/messaging",wC="@firebase/messaging-compat",AC="@firebase/performance",IC="@firebase/performance-compat",bC="@firebase/remote-config",SC="@firebase/remote-config-compat",CC="@firebase/storage",RC="@firebase/storage-compat",PC="@firebase/firestore",NC="@firebase/ai",OC="@firebase/firestore-compat",DC="firebase",kC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="[DEFAULT]",VC={[Xu]:"fire-core",[aC]:"fire-core-compat",[lC]:"fire-analytics",[cC]:"fire-analytics-compat",[hC]:"fire-app-check",[uC]:"fire-app-check-compat",[fC]:"fire-auth",[dC]:"fire-auth-compat",[pC]:"fire-rtdb",[mC]:"fire-data-connect",[gC]:"fire-rtdb-compat",[_C]:"fire-fn",[yC]:"fire-fn-compat",[EC]:"fire-iid",[vC]:"fire-iid-compat",[TC]:"fire-fcm",[wC]:"fire-fcm-compat",[AC]:"fire-perf",[IC]:"fire-perf-compat",[bC]:"fire-rc",[SC]:"fire-rc-compat",[CC]:"fire-gcs",[RC]:"fire-gcs-compat",[PC]:"fire-fst",[OC]:"fire-fst-compat",[NC]:"fire-vertex","fire-js":"fire-js",[DC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,LC=new Map,Zu=new Map;function am(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fs(t){const e=t.name;if(Zu.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Zu.set(e,t);for(const n of Tc.values())am(n,t);for(const n of LC.values())am(n,t);return!0}function ol(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Yo("app","Firebase",MC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=kC;function Ky(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ju,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=jy()),!n)throw Ar.create("no-options");const i=Tc.get(s);if(i){if(hs(n,i.options)&&hs(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const o=new HS(s);for(const l of Zu.values())o.addComponent(l);const c=new xC(n,r,o);return Tc.set(s,c),c}function rf(t=Ju){const e=Tc.get(t);if(!e&&t===Ju&&jy())return Ky();if(!e)throw Ar.create("no-app",{appName:t});return e}function Tn(t,e,n){let r=VC[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(o.join(" "));return}fs(new Pr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="firebase-heartbeat-database",UC=1,Mo="firebase-heartbeat-store";let hu=null;function zy(){return hu||(hu=nC(FC,UC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),hu}async function $C(t){try{const n=(await zy()).transaction(Mo),r=await n.objectStore(Mo).get(Gy(t));return await n.done,r}catch(e){if(e instanceof Ln)Qn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(n.message)}}}async function cm(t,e){try{const r=(await zy()).transaction(Mo,"readwrite");await r.objectStore(Mo).put(e,Gy(t)),await r.done}catch(n){if(n instanceof Ln)Qn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n?.message});Qn.warn(r.message)}}}function Gy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=1024,jC=30;class HC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>jC){const s=KC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lm(),{heartbeatsToSend:n,unsentEntries:r}=qC(this._heartbeatsCache.heartbeats),s=vc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Qn.warn(e),""}}}function lm(){return new Date().toISOString().substring(0,10)}function qC(t,e=BC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),um(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),um(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OS()?DS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $C(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function um(t){return vc(JSON.stringify({version:2,heartbeats:t})).length}function KC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){fs(new Pr("platform-logger",e=>new iC(e),"PRIVATE")),fs(new Pr("heartbeat",e=>new HC(e),"PRIVATE")),Tn(Xu,om,t),Tn(Xu,om,"esm2020"),Tn("fire-js","")}zC("");function Yy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GC=Yy,Qy=new Yo("auth","Firebase",Yy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new tf("@firebase/auth");function YC(t,...e){wc.logLevel<=ve.WARN&&wc.warn(`Auth (${wi}): ${t}`,...e)}function Ja(t,...e){wc.logLevel<=ve.ERROR&&wc.error(`Auth (${wi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw sf(t,...e)}function wn(t,...e){return sf(t,...e)}function Xy(t,e,n){const r={...GC(),[e]:n};return new Yo("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return Xy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qy.create(t,...e)}function le(t,e,...n){if(!t)throw sf(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ja(e),new Error(e)}function Xn(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){return typeof self<"u"&&self.location?.href||""}function QC(){return hm()==="http:"||hm()==="https:"}function hm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QC()||CS()||"connection"in navigator)?navigator.onLine:!0}function JC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=IS()||RS()}get(){return XC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tR=new Xo(3e4,6e4);function Br(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jr(t,e,n,r,s={}){return Zy(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Qo({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return SS()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&$r(t.emulatorConfig.host)&&(u.credentials="include"),Jy.fetch()(await eE(t,t.config.apiHost,n,c),u)})}async function Zy(t,e,n){t._canInitEmulator=!1;const r={...ZC,...e};try{const s=new rR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Pa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pa(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Xy(t,h,u);un(t,h)}}catch(s){if(s instanceof Ln)throw s;un(t,"network-request-failed",{message:String(s)})}}async function Jo(t,e,n,r,s={}){const i=await jr(t,e,n,r,s);return"mfaPendingCredential"in i&&un(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function eE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?of(t.config,s):`${t.config.apiScheme}://${s}`;return eR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function nR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),tR.get())})}}function Pa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}function fm(t){return t!==void 0&&t.enterprise!==void 0}class sR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iR(t,e){return jr(t,"GET","/v2/recaptchaConfig",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e){return jr(t,"POST","/v1/accounts:delete",e)}async function Ac(t,e){return jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aR(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=af(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:To(fu(s.auth_time)),issuedAtTime:To(fu(s.iat)),expirationTime:To(fu(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function fu(t){return Number(t)*1e3}function af(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ja("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uy(n);return s?JSON.parse(s):(Ja("Failed to decode base64 JWT payload"),null)}catch(s){return Ja("Caught error parsing JWT payload as JSON",s?.toString()),null}}function dm(t){const e=af(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&cR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=To(this.lastLoginAt),this.creationTime=To(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t){const e=t.auth,n=await t.getIdToken(),r=await xo(t,Ac(e,{idToken:n}));le(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?tE(s.providerUserInfo):[],o=hR(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new th(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function uR(t){const e=Ye(t);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e){const n=await Zy(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await eE(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&$r(t.emulatorConfig.host)&&(l.credentials="include"),Jy.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dR(t,e){return jr(t,"POST","/v2/accounts:revokeToken",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=dm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Js;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Js,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new th(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await xo(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aR(this,e)}reload(){return uR(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await xo(this,oR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:_,providerData:S,stsTokenManager:C}=n;le(d&&C,e,"internal-error");const O=Js.fromJSON(this.name,C);le(typeof d=="string",e,"internal-error"),ur(r,e.name),ur(s,e.name),le(typeof m=="boolean",e,"internal-error"),le(typeof _=="boolean",e,"internal-error"),ur(i,e.name),ur(o,e.name),ur(c,e.name),ur(l,e.name),ur(u,e.name),ur(h,e.name);const L=new sn({uid:d,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:O,createdAt:u,lastLoginAt:h});return S&&Array.isArray(S)&&(L.providerData=S.map(M=>({...M}))),l&&(L._redirectEventId=l),L}static async _fromIdTokenResponse(e,n,r=!1){const s=new Js;s.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ic(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new Js;c.updateFromIdToken(r);const l=new sn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new th(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Map;function Hn(t){Xn(t instanceof Function,"Expected a class definition");let e=pm.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nE.type="NONE";const mm=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,e,n){return`firebase:${t}:${e}:${n}`}class Zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Za(this.userKey,s.apiKey,i),this.fullPersistenceKey=Za("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ac(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zs(Hn(mm),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Hn(mm);const o=Za(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const m=await Ac(e,{idToken:h}).catch(()=>{});if(!m)break;d=await sn._fromGetAccountInfoResponse(e,m,h)}else d=sn._fromJSON(e,h);u!==i&&(c=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Zs(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Zs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cE(e))return"Blackberry";if(lE(e))return"Webos";if(sE(e))return"Safari";if((e.includes("chrome/")||iE(e))&&!e.includes("edge/"))return"Chrome";if(aE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function rE(t=Tt()){return/firefox\//i.test(t)}function sE(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iE(t=Tt()){return/crios\//i.test(t)}function oE(t=Tt()){return/iemobile/i.test(t)}function aE(t=Tt()){return/android/i.test(t)}function cE(t=Tt()){return/blackberry/i.test(t)}function lE(t=Tt()){return/webos/i.test(t)}function cf(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pR(t=Tt()){return cf(t)&&!!window.navigator?.standalone}function mR(){return PS()&&document.documentMode===10}function uE(t=Tt()){return cf(t)||aE(t)||lE(t)||cE(t)||/windows phone/i.test(t)||oE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t,e=[]){let n;switch(t){case"Browser":n=gm(Tt());break;case"Worker":n=`${gm(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e={}){return jr(t,"GET","/v2/passwordPolicy",Br(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=6;class ER{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _m(this),this.idTokenSubscription=new _m(this),this.beforeStateQueue=new gR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ac(this,{idToken:e}),r=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ut(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(qn(this));const n=e?Ye(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _R(this),n=new ER(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Es(t){return Ye(t)}class _m{constructor(e){this.auth=e,this.observer=null,this.addObserver=xS(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TR(t){al=t}function fE(t){return al.loadJS(t)}function wR(){return al.recaptchaEnterpriseScript}function AR(){return al.gapiScript}function IR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class bR{constructor(){this.enterprise=new SR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const CR="recaptcha-enterprise",dE="NO_RECAPTCHA";class RR{constructor(e){this.type=CR,this.auth=Es(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{iR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new sR(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;fm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(dE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&fm(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wR();l.length!==0&&(l+=c),fE(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function ym(t,e,n,r=!1,s=!1){const i=new RR(t);let o;if(s)o=dE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function nh(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ym(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ym(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t,e){const n=ol(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(hs(i,e??{}))return s;un(s,"already-initialized")}return n.initialize({options:e})}function NR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Hn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function OR(t,e,n){const r=Es(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=pE(e),{host:o,port:c}=DR(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(hs(u,r.config.emulator)&&hs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,$r(o)?(Zh(`${i}//${o}${l}`),ef("Auth",!0)):kR()}function pE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DR(t){const e=pE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Em(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Em(o)}}}function Em(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function VR(t,e){return jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e){return Jo(t,"POST","/v1/accounts:signInWithPassword",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return Jo(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}async function xR(t,e){return Jo(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends lf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Fo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nh(e,n,"signInWithPassword",LR);case"emailLink":return MR(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nh(e,r,"signUpPassword",VR);case"emailLink":return xR(e,{idToken:n,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(t,e){return Jo(t,"POST","/v1/accounts:signInWithIdp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="http://localhost";class ds extends lf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ei(e,n)}buildRequest(){const e={requestUri:FR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $R(t){const e=ro(so(t)).link,n=e?ro(so(e)).deep_link_id:null,r=ro(so(t)).deep_link_id;return(r?ro(so(r)).link:null)||r||n||e||t}class uf{constructor(e){const n=ro(so(e)),r=n.apiKey??null,s=n.oobCode??null,i=UR(n.mode??null);le(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$R(e);try{return new uf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.providerId=Ai.PROVIDER_ID}static credential(e,n){return Fo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uf.parseLink(n);return le(r,"argument-error"),Fo._fromEmailAndCode(e,r.code,r.tenantId)}}Ai.PROVIDER_ID="password";Ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends mE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Zo{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Zo{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Zo{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e){return Jo(t,"POST","/v1/accounts:signUp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sn._fromIdTokenResponse(e,r,s),o=vm(r);return new ps({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=vm(r);return new ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function vm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Ln{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bc(e,n,r,s)}}function gE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(t,i,e,r):i})}async function jR(t,e,n=!1){const r=await xo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e,n=!1){const{auth:r}=t;if(Ut(r.app))return Promise.reject(qn(r));const s="reauthenticate";try{const i=await xo(t,gE(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=af(i.idToken);le(o,r,"internal-error");const{sub:c}=o;return le(t.uid===c,r,"user-mismatch"),ps._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(t,e,n=!1){if(Ut(t.app))return Promise.reject(qn(t));const r="signIn",s=await gE(t,r,e),i=await ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qR(t,e){return _E(Es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(t){const e=Es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WR(t,e,n){if(Ut(t.app))return Promise.reject(qn(t));const r=Es(t),o=await nh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&yE(t),l}),c=await ps._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function KR(t,e,n){return Ut(t.app)?Promise.reject(qn(t)):qR(Ye(t),Ai.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yE(t),r})}function zR(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function GR(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function YR(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function QR(t){return Ye(t).signOut()}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,JR=10;class vE extends EE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vE.type="LOCAL";const ZR=vE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends EE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TE.type="SESSION";const wE=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await eP(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=hf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function nP(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function rP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sP(){return navigator?.serviceWorker?.controller||null}function iP(){return AE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="firebaseLocalStorageDb",oP=1,Cc="firebaseLocalStorage",bE="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ll(t,e){return t.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function aP(){const t=indexedDB.deleteDatabase(IE);return new ea(t).toPromise()}function rh(){const t=indexedDB.open(IE,oP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cc,{keyPath:bE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cc)?e(r):(r.close(),await aP(),e(await rh()))})})}async function Tm(t,e,n){const r=ll(t,!0).put({[bE]:e,value:n});return new ea(r).toPromise()}async function cP(t,e){const n=ll(t,!1).get(e),r=await new ea(n).toPromise();return r===void 0?null:r.value}function wm(t,e){const n=ll(t,!0).delete(e);return new ea(n).toPromise()}const lP=800,uP=3;class SE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cl._getInstance(iP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rP(),!this.activeServiceWorker)return;this.sender=new tP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rh();return await Tm(e,Sc,"1"),await wm(e,Sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tm(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ll(s,!1).getAll();return new ea(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SE.type="LOCAL";const hP=SE;new Xo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t,e){return e?Hn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends lf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dP(t){return _E(t.auth,new ff(t),t.bypassAuthState)}function pP(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),HR(n,new ff(t),t.bypassAuthState)}async function mP(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),jR(n,new ff(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dP;case"linkViaPopup":case"linkViaRedirect":return mP;case"reauthViaPopup":case"reauthViaRedirect":return pP;default:un(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new Xo(2e3,1e4);class qs extends CE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gP.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="pendingRedirect",ec=new Map;class yP extends CE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const r=await EP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EP(t,e){const n=wP(e),r=TP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vP(t,e){ec.set(t._key(),e)}function TP(t){return Hn(t._redirectPersistence)}function wP(t){return Za(_P,t.config.apiKey,t.name)}async function AP(t,e,n=!1){if(Ut(t.app))return Promise.reject(qn(t));const r=Es(t),s=fP(r,e),o=await new yP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=600*1e3;class bP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!RE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(wn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Am(e))}saveEventToCache(e){this.cachedEventUids.add(Am(e)),this.lastProcessedEventTime=Date.now()}}function Am(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function SP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,e={}){return jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PP=/^https?/;async function NP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CP(t);for(const n of e)try{if(OP(n))return}catch{}un(t,"unauthorized-domain")}function OP(t){const e=eh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PP.test(n))return!1;if(RP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new Xo(3e4,6e4);function Im(){const t=An().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kP(t){return new Promise((e,n)=>{function r(){Im(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Im(),n(wn(t,"network-request-failed"))},timeout:DP.get()})}if(An().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(An().gapi?.load)r();else{const s=IR("iframefcb");return An()[s]=()=>{gapi.load?r():n(wn(t,"network-request-failed"))},fE(`${AR()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw tc=null,e})}let tc=null;function VP(t){return tc=tc||kP(t),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new Xo(5e3,15e3),MP="__/auth/iframe",xP="emulator/auth/iframe",FP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $P(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?of(e,xP):`https://${t.config.authDomain}/${MP}`,r={apiKey:e.apiKey,appName:t.name,v:wi},s=UP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qo(r).slice(1)}`}async function BP(t){const e=await VP(t),n=An().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:$P(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=An().setTimeout(()=>{i(o)},LP.get());function l(){An().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HP=500,qP=600,WP="_blank",KP="http://localhost";class bm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zP(t,e,n,r=HP,s=qP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...jP,width:r.toString(),height:s.toString(),top:i,left:o},u=Tt().toLowerCase();n&&(c=iE(u)?WP:n),rE(u)&&(e=e||KP,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[_,S])=>`${m}${_}=${S},`,"");if(pR(u)&&c!=="_self")return GP(e||"",c),new bm(null);const d=window.open(e||"",c,h);le(d,t,"popup-blocked");try{d.focus()}catch{}return new bm(d)}function GP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="__/auth/handler",QP="emulator/auth/handler",XP=encodeURIComponent("fac");async function Sm(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wi,eventId:s};if(e instanceof mE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Zo){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const l=await t._getAppCheckToken(),u=l?`#${XP}=${encodeURIComponent(l)}`:"";return`${JP(t)}?${Qo(c).slice(1)}${u}`}function JP({config:t}){return t.emulator?of(t,QP):`https://${t.authDomain}/${YP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="webStorageSupport";class ZP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wE,this._completeRedirectFn=AP,this._overrideRedirectResult=vP}async _openPopup(e,n,r,s){Xn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Sm(e,n,r,eh(),s);return zP(e,i,hf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Sm(e,n,r,eh(),s);return nP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BP(e),r=new bP(e);return n.register("authEvent",s=>(le(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(du,{type:du},s=>{const i=s?.[0]?.[du];i!==void 0&&n(!!i),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uE()||sE()||cf()}}const e0=ZP;var Cm="@firebase/auth",Rm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r0(t){fs(new Pr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hE(t)},u=new vR(r,s,i,l);return NR(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fs(new Pr("auth-internal",e=>{const n=Es(e.getProvider("auth").getImmediate());return(r=>new t0(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(Cm,Rm,n0(t)),Tn(Cm,Rm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=300,i0=Hy("authIdTokenMaxAge")||s0;let Pm=null;const o0=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i0)return;const s=n?.token;Pm!==s&&(Pm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function a0(t=rf()){const e=ol(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PR(t,{popupRedirectResolver:e0,persistence:[hP,ZR,wE]}),r=Hy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=o0(i.toString());GR(n,o,()=>o(n.currentUser)),zR(n,c=>o(c))}}const s=$y("auth");return s&&OR(n,`http://${s}`),n}function c0(){return document.getElementsByTagName("head")?.[0]??document}TR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",c0().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r0("Browser");var Nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,PE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function E(){}E.prototype=y.prototype,w.F=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(b,I,R){for(var v=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)v[Oe-2]=arguments[Oe];return y.prototype[I].apply(b,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,E){E||(E=0);const b=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)b[I]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(I=0;I<16;++I)b[I]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],I=w.g[2];let R=w.g[3],v;v=y+(R^E&(I^R))+b[0]+3614090360&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(I^y&(E^I))+b[1]+3905402710&4294967295,R=y+(v<<12&4294967295|v>>>20),v=I+(E^R&(y^E))+b[2]+606105819&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(y^I&(R^y))+b[3]+3250441966&4294967295,E=I+(v<<22&4294967295|v>>>10),v=y+(R^E&(I^R))+b[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(I^y&(E^I))+b[5]+1200080426&4294967295,R=y+(v<<12&4294967295|v>>>20),v=I+(E^R&(y^E))+b[6]+2821735955&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(y^I&(R^y))+b[7]+4249261313&4294967295,E=I+(v<<22&4294967295|v>>>10),v=y+(R^E&(I^R))+b[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(I^y&(E^I))+b[9]+2336552879&4294967295,R=y+(v<<12&4294967295|v>>>20),v=I+(E^R&(y^E))+b[10]+4294925233&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(y^I&(R^y))+b[11]+2304563134&4294967295,E=I+(v<<22&4294967295|v>>>10),v=y+(R^E&(I^R))+b[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=R+(I^y&(E^I))+b[13]+4254626195&4294967295,R=y+(v<<12&4294967295|v>>>20),v=I+(E^R&(y^E))+b[14]+2792965006&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(y^I&(R^y))+b[15]+1236535329&4294967295,E=I+(v<<22&4294967295|v>>>10),v=y+(I^R&(E^I))+b[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(y^E))+b[6]+3225465664&4294967295,R=y+(v<<9&4294967295|v>>>23),v=I+(y^E&(R^y))+b[11]+643717713&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(I^R))+b[0]+3921069994&4294967295,E=I+(v<<20&4294967295|v>>>12),v=y+(I^R&(E^I))+b[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(y^E))+b[10]+38016083&4294967295,R=y+(v<<9&4294967295|v>>>23),v=I+(y^E&(R^y))+b[15]+3634488961&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(I^R))+b[4]+3889429448&4294967295,E=I+(v<<20&4294967295|v>>>12),v=y+(I^R&(E^I))+b[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(y^E))+b[14]+3275163606&4294967295,R=y+(v<<9&4294967295|v>>>23),v=I+(y^E&(R^y))+b[3]+4107603335&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(I^R))+b[8]+1163531501&4294967295,E=I+(v<<20&4294967295|v>>>12),v=y+(I^R&(E^I))+b[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(y^E))+b[2]+4243563512&4294967295,R=y+(v<<9&4294967295|v>>>23),v=I+(y^E&(R^y))+b[7]+1735328473&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^y&(I^R))+b[12]+2368359562&4294967295,E=I+(v<<20&4294967295|v>>>12),v=y+(E^I^R)+b[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^I)+b[8]+2272392833&4294967295,R=y+(v<<11&4294967295|v>>>21),v=I+(R^y^E)+b[11]+1839030562&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^y)+b[14]+4259657740&4294967295,E=I+(v<<23&4294967295|v>>>9),v=y+(E^I^R)+b[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^I)+b[4]+1272893353&4294967295,R=y+(v<<11&4294967295|v>>>21),v=I+(R^y^E)+b[7]+4139469664&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^y)+b[10]+3200236656&4294967295,E=I+(v<<23&4294967295|v>>>9),v=y+(E^I^R)+b[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^I)+b[0]+3936430074&4294967295,R=y+(v<<11&4294967295|v>>>21),v=I+(R^y^E)+b[3]+3572445317&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^y)+b[6]+76029189&4294967295,E=I+(v<<23&4294967295|v>>>9),v=y+(E^I^R)+b[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=R+(y^E^I)+b[12]+3873151461&4294967295,R=y+(v<<11&4294967295|v>>>21),v=I+(R^y^E)+b[15]+530742520&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^y)+b[2]+3299628645&4294967295,E=I+(v<<23&4294967295|v>>>9),v=y+(I^(E|~R))+b[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~I))+b[7]+1126891415&4294967295,R=y+(v<<10&4294967295|v>>>22),v=I+(y^(R|~E))+b[14]+2878612391&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~y))+b[5]+4237533241&4294967295,E=I+(v<<21&4294967295|v>>>11),v=y+(I^(E|~R))+b[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~I))+b[3]+2399980690&4294967295,R=y+(v<<10&4294967295|v>>>22),v=I+(y^(R|~E))+b[10]+4293915773&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~y))+b[1]+2240044497&4294967295,E=I+(v<<21&4294967295|v>>>11),v=y+(I^(E|~R))+b[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~I))+b[15]+4264355552&4294967295,R=y+(v<<10&4294967295|v>>>22),v=I+(y^(R|~E))+b[6]+2734768916&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~y))+b[13]+1309151649&4294967295,E=I+(v<<21&4294967295|v>>>11),v=y+(I^(E|~R))+b[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=R+(E^(y|~I))+b[11]+3174756917&4294967295,R=y+(v<<10&4294967295|v>>>22),v=I+(y^(R|~E))+b[2]+718787259&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~y))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(I+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+R&4294967295}r.prototype.v=function(w,y){y===void 0&&(y=w.length);const E=y-this.blockSize,b=this.C;let I=this.h,R=0;for(;R<y;){if(I==0)for(;R<=E;)s(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<y;)if(b[I++]=w.charCodeAt(R++),I==this.blockSize){s(this,b),I=0;break}}else for(;R<y;)if(b[I++]=w[R++],I==this.blockSize){s(this,b),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,E=0;E<4;++E)for(let b=0;b<32;b+=8)w[y++]=this.g[E]>>>b&255;return w};function i(w,y){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function o(w,y){this.h=y;const E=[];let b=!0;for(let I=w.length-1;I>=0;I--){const R=w[I]|0;b&&R==y||(E[I]=R,b=!1)}this.g=E}var c={};function l(w){return-128<=w&&w<128?i(w,function(y){return new o([y|0],y<0?-1:0)}):new o([w|0],w<0?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return d;if(w<0)return O(u(-w));const y=[];let E=1;for(let b=0;w>=E;b++)y[b]=w/E|0,E*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return O(h(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(y,8));let b=d;for(let R=0;R<w.length;R+=8){var I=Math.min(8,w.length-R);const v=parseInt(w.substring(R,R+I),y);I<8?(I=u(Math.pow(y,I)),b=b.j(I).add(u(v))):(b=b.j(E),b=b.add(u(v)))}return b}var d=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(C(this))return-O(this).m();let w=0,y=1;for(let E=0;E<this.g.length;E++){const b=this.i(E);w+=(b>=0?b:4294967296+b)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(C(this))return"-"+O(this).toString(w);const y=u(Math.pow(w,6));var E=this;let b="";for(;;){const I=U(E,y).g;E=L(E,I.j(y));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return R+b;for(;R.length<6;)R="0"+R;b=R+b}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function C(w){return w.h==-1}t.l=function(w){return w=L(this,w),C(w)?-1:S(w)?0:1};function O(w){const y=w.g.length,E=[];for(let b=0;b<y;b++)E[b]=~w.g[b];return new o(E,~w.h).add(m)}t.abs=function(){return C(this)?O(this):this},t.add=function(w){const y=Math.max(this.g.length,w.g.length),E=[];let b=0;for(let I=0;I<=y;I++){let R=b+(this.i(I)&65535)+(w.i(I)&65535),v=(R>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);b=v>>>16,R&=65535,v&=65535,E[I]=v<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function L(w,y){return w.add(O(y))}t.j=function(w){if(S(this)||S(w))return d;if(C(this))return C(w)?O(this).j(O(w)):O(O(this).j(w));if(C(w))return O(this.j(O(w)));if(this.l(_)<0&&w.l(_)<0)return u(this.m()*w.m());const y=this.g.length+w.g.length,E=[];for(var b=0;b<2*y;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(let I=0;I<w.g.length;I++){const R=this.i(b)>>>16,v=this.i(b)&65535,Oe=w.i(I)>>>16,je=w.i(I)&65535;E[2*b+2*I]+=v*je,M(E,2*b+2*I),E[2*b+2*I+1]+=R*je,M(E,2*b+2*I+1),E[2*b+2*I+1]+=v*Oe,M(E,2*b+2*I+1),E[2*b+2*I+2]+=R*Oe,M(E,2*b+2*I+2)}for(w=0;w<y;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=y;w<2*y;w++)E[w]=0;return new o(E,0)};function M(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function j(w,y){this.g=w,this.h=y}function U(w,y){if(S(y))throw Error("division by zero");if(S(w))return new j(d,d);if(C(w))return y=U(O(w),y),new j(O(y.g),O(y.h));if(C(y))return y=U(w,O(y)),new j(O(y.g),y.h);if(w.g.length>30){if(C(w)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var E=m,b=y;b.l(w)<=0;)E=X(E),b=X(b);var I=Z(E,1),R=Z(b,1);for(b=Z(b,2),E=Z(E,2);!S(b);){var v=R.add(b);v.l(w)<=0&&(I=I.add(E),R=v),b=Z(b,1),E=Z(E,1)}return y=L(w,I.j(y)),new j(I,y)}for(I=d;w.l(y)>=0;){for(E=Math.max(1,Math.floor(w.m()/y.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),R=u(E),v=R.j(y);C(v)||v.l(w)>0;)E-=b,R=u(E),v=R.j(y);S(R)&&(R=m),I=I.add(R),w=L(w,v)}return new j(I,w)}t.B=function(w){return U(this,w).h},t.and=function(w){const y=Math.max(this.g.length,w.g.length),E=[];for(let b=0;b<y;b++)E[b]=this.i(b)&w.i(b);return new o(E,this.h&w.h)},t.or=function(w){const y=Math.max(this.g.length,w.g.length),E=[];for(let b=0;b<y;b++)E[b]=this.i(b)|w.i(b);return new o(E,this.h|w.h)},t.xor=function(w){const y=Math.max(this.g.length,w.g.length),E=[];for(let b=0;b<y;b++)E[b]=this.i(b)^w.i(b);return new o(E,this.h^w.h)};function X(w){const y=w.g.length+1,E=[];for(let b=0;b<y;b++)E[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(E,w.h)}function Z(w,y){const E=y>>5;y%=32;const b=w.g.length-E,I=[];for(let R=0;R<b;R++)I[R]=y>0?w.i(R+E)>>>y|w.i(R+E+1)<<32-y:w.i(R+E);return new o(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ir=o}).apply(typeof Nm<"u"?Nm:typeof self<"u"?self:typeof window<"u"?window:{});var Na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NE,io,OE,nc,sh,DE,kE,VE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Na=="object"&&Na];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var p=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var N=a[g];if(!(N in p))break e;p=p[N]}a=a[a.length-1],g=p[a],f=f(g),f!=g&&f!=null&&e(p,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var p=[],g;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&p.push([g,f[g]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function l(a,f,p){return a.call.apply(a.bind,arguments)}function u(a,f,p){return u=l,u.apply(null,arguments)}function h(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function d(a,f){function p(){}p.prototype=f.prototype,a.Z=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,N,D){for(var z=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)z[_e-2]=arguments[_e];return f.prototype[N].apply(g,z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const f=a.length;if(f>0){const p=Array(f);for(let g=0;g<f;g++)p[g]=a[g];return p}return[]}function S(a,f){for(let g=1;g<arguments.length;g++){const N=arguments[g];var p=typeof N;if(p=p!="object"?p:N?Array.isArray(N)?"array":p:"null",p=="array"||p=="object"&&typeof N.length=="number"){p=a.length||0;const D=N.length||0;a.length=p+D;for(let z=0;z<D;z++)a[p+z]=N[z]}else a.push(N)}}class C{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function O(a){o.setTimeout(()=>{throw a},0)}function L(){var a=w;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class M{constructor(){this.h=this.g=null}add(f,p){const g=j.get();g.set(f,p),this.h?this.h.next=g:this.g=g,this.h=g}}var j=new C(()=>new U,a=>a.reset());class U{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let X,Z=!1,w=new M,y=()=>{const a=Promise.resolve(void 0);X=()=>{a.then(E)}};function E(){for(var a;a=L();){try{a.h.call(a.g)}catch(p){O(p)}var f=j;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}Z=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,f),o.removeEventListener("test",p,f)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function Oe(a,f){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}d(Oe,I),Oe.prototype.init=function(a,f){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Ae=0;function pe(a,f,p,g,N){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!g,this.ha=N,this.key=++Ae,this.da=this.fa=!1}function me(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function He(a,f,p){for(const g in a)f.call(p,a[g],g,a)}function wt(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function it(a){const f={};for(const p in a)f[p]=a[p];return f}const $e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pt(a,f){let p,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(p in g)a[p]=g[p];for(let D=0;D<$e.length;D++)p=$e[D],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function tt(a){this.src=a,this.g={},this.h=0}tt.prototype.add=function(a,f,p,g,N){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const z=qe(a,f,g,N);return z>-1?(f=a[z],p||(f.fa=!1)):(f=new pe(f,this.src,D,!!g,N),f.fa=p,a.push(f)),f};function ot(a,f){const p=f.type;if(p in a.g){var g=a.g[p],N=Array.prototype.indexOf.call(g,f,void 0),D;(D=N>=0)&&Array.prototype.splice.call(g,N,1),D&&(me(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function qe(a,f,p,g){for(let N=0;N<a.length;++N){const D=a[N];if(!D.da&&D.listener==f&&D.capture==!!p&&D.ha==g)return N}return-1}var k="closure_lm_"+(Math.random()*1e6|0),Y={};function G(a,f,p,g,N){if(Array.isArray(f)){for(let D=0;D<f.length;D++)G(a,f[D],p,g,N);return null}return p=Q(p),a&&a[je]?a.J(f,p,c(g)?!!g.capture:!1,N):ne(a,f,p,!1,g,N)}function ne(a,f,p,g,N,D){if(!f)throw Error("Invalid event type");const z=c(N)?!!N.capture:!!N;let _e=$(a);if(_e||(a[k]=_e=new tt(a)),p=_e.add(f,p,g,z,D),p.proxy)return p;if(g=be(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)R||(N=z),N===void 0&&(N=!1),a.addEventListener(f.toString(),g,N);else if(a.attachEvent)a.attachEvent(P(f.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function be(){function a(p){return f.call(a.src,a.listener,p)}const f=x;return a}function T(a,f,p,g,N){if(Array.isArray(f))for(var D=0;D<f.length;D++)T(a,f[D],p,g,N);else g=c(g)?!!g.capture:!!g,p=Q(p),a&&a[je]?(a=a.i,D=String(f).toString(),D in a.g&&(f=a.g[D],p=qe(f,p,g,N),p>-1&&(me(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete a.g[D],a.h--)))):a&&(a=$(a))&&(f=a.g[f.toString()],a=-1,f&&(a=qe(f,p,g,N)),(p=a>-1?f[a]:null)&&A(p))}function A(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[je])ot(f.i,a);else{var p=a.type,g=a.proxy;f.removeEventListener?f.removeEventListener(p,g,a.capture):f.detachEvent?f.detachEvent(P(p),g):f.addListener&&f.removeListener&&f.removeListener(g),(p=$(f))?(ot(p,a),p.h==0&&(p.src=null,f[k]=null)):me(a)}}}function P(a){return a in Y?Y[a]:Y[a]="on"+a}function x(a,f){if(a.da)a=!0;else{f=new Oe(f,this);const p=a.listener,g=a.ha||a.src;a.fa&&A(a),a=p.call(g,f)}return a}function $(a){return a=a[k],a instanceof tt?a:null}var V="__closure_events_fn_"+(Math.random()*1e9>>>0);function Q(a){return typeof a=="function"?a:(a[V]||(a[V]=function(f){return a.handleEvent(f)}),a[V])}function K(){b.call(this),this.i=new tt(this),this.M=this,this.G=null}d(K,b),K.prototype[je]=!0,K.prototype.removeEventListener=function(a,f,p,g){T(this,a,f,p,g)};function H(a,f){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=f.type||f,typeof f=="string")f=new I(f,a);else if(f instanceof I)f.target=f.target||a;else{var N=f;f=new I(g,a),Pt(f,N)}N=!0;let D,z;if(p)for(z=p.length-1;z>=0;z--)D=f.g=p[z],N=q(D,g,!0,f)&&N;if(D=f.g=a,N=q(D,g,!0,f)&&N,N=q(D,g,!1,f)&&N,p)for(z=0;z<p.length;z++)D=f.g=p[z],N=q(D,g,!1,f)&&N}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const p=a.g[f];for(let g=0;g<p.length;g++)me(p[g]);delete a.g[f],a.h--}}this.G=null},K.prototype.J=function(a,f,p,g){return this.i.add(String(a),f,!1,p,g)},K.prototype.K=function(a,f,p,g){return this.i.add(String(a),f,!0,p,g)};function q(a,f,p,g){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let N=!0;for(let D=0;D<f.length;++D){const z=f[D];if(z&&!z.da&&z.capture==p){const _e=z.listener,Ze=z.ha||z.src;z.fa&&ot(a.i,z),N=_e.call(Ze,g)!==!1&&N}}return N&&!g.defaultPrevented}function se(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function J(a){a.g=se(()=>{a.g=null,a.i&&(a.i=!1,J(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class re extends b{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(a){b.call(this),this.h=a,this.g={}}d(oe,b);var ge=[];function Se(a){He(a.g,function(f,p){this.g.hasOwnProperty(p)&&A(f)},a),a.g={}}oe.prototype.N=function(){oe.Z.N.call(this),Se(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=o.JSON.stringify,ft=o.JSON.parse,dt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Lt(){}function Mt(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Is(){I.call(this,"d")}d(Is,I);function at(){I.call(this,"c")}d(at,I);var nt={},Vi=null;function Gr(){return Vi=Vi||new K}nt.Ia="serverreachability";function dd(a){I.call(this,nt.Ia,a)}d(dd,I);function Li(a){const f=Gr();H(f,new dd(f))}nt.STAT_EVENT="statevent";function pd(a,f){I.call(this,nt.STAT_EVENT,a),this.stat=f}d(pd,I);function At(a){const f=Gr();H(f,new pd(f,a))}nt.Ja="timingevent";function md(a,f){I.call(this,nt.Ja,a),this.size=f}d(md,I);function Mi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function xi(){this.g=!0}xi.prototype.ua=function(){this.g=!1};function dw(a,f,p,g,N,D){a.info(function(){if(a.g)if(D){var z="",_e=D.split("&");for(let De=0;De<_e.length;De++){var Ze=_e[De].split("=");if(Ze.length>1){const rt=Ze[0];Ze=Ze[1];const pn=rt.split("_");z=pn.length>=2&&pn[1]=="type"?z+(rt+"="+Ze+"&"):z+(rt+"=redacted&")}}}else z=null;else z=D;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+f+`
`+p+`
`+z})}function pw(a,f,p,g,N,D,z){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+f+`
`+p+`
`+D+" "+z})}function bs(a,f,p,g){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+gw(a,p)+(g?" "+g:"")})}function mw(a,f){a.info(function(){return"TIMEOUT: "+f})}xi.prototype.info=function(){};function gw(a,f){if(!a.g)return f;if(!f)return null;try{const D=JSON.parse(f);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var p=D[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var N=g[0];if(N!="noop"&&N!="stop"&&N!="close")for(let z=1;z<g.length;z++)g[z]=""}}}}return Ee(D)}catch{return f}}var da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_d;function Ll(){}d(Ll,Lt),Ll.prototype.g=function(){return new XMLHttpRequest},_d=new Ll;function Fi(a){return encodeURIComponent(String(a))}function _w(a){var f=1;a=a.split(":");const p=[];for(;f>0&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function rr(a,f,p,g){this.j=a,this.i=f,this.l=p,this.S=g||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yd}function yd(){this.i=null,this.g="",this.h=!1}var Ed={},Ml={};function xl(a,f,p){a.M=1,a.A=ma(dn(f)),a.u=p,a.R=!0,vd(a,null)}function vd(a,f){a.F=Date.now(),pa(a),a.B=dn(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),kd(p.i,"t",g),a.C=0,p=a.j.L,a.h=new yd,a.g=Xd(a.j,p?f:null,!a.u),a.P>0&&(a.O=new re(u(a.Y,a,a.g),a.P)),f=a.V,p=a.g,g=a.ba;var N="readystatechange";Array.isArray(N)||(N&&(ge[0]=N.toString()),N=ge);for(let D=0;D<N.length;D++){const z=G(p,N[D],g||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=a.J?it(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),Li(),dw(a.i,a.v,a.B,a.l,a.S,a.u)}rr.prototype.ba=function(a){a=a.target;const f=this.O;f&&or(a)==3?f.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{const _e=or(this.g),Ze=this.g.ya(),De=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||$d(this.g)))){this.K||_e!=4||Ze==7||(Ze==8||De<=0?Li(3):Li(2)),Fl(this);var f=this.g.ca();this.X=f;var p=yw(this);if(this.o=f==200,pw(this.i,this.v,this.B,this.l,this.S,_e,f),this.o){if(this.U&&!this.L){t:{if(this.g){var g,N=this.g;if((g=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(g)){var D=g;break t}}D=null}if(a=D)bs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ul(this,a);else{this.o=!1,this.m=3,At(12),Yr(this),Ui(this);break e}}if(this.R){a=!0;let rt;for(;!this.K&&this.C<p.length;)if(rt=Ew(this,p),rt==Ml){_e==4&&(this.m=4,At(14),a=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==Ed){this.m=4,At(15),bs(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else bs(this.i,this.l,rt,null),Ul(this,rt);if(Td(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||p.length!=0||this.h.h||(this.m=1,At(16),a=!1),this.o=this.o&&a,!a)bs(this.i,this.l,p,"[Invalid Chunked Response]"),Yr(this),Ui(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),zl(z),z.P=!0,At(11))}}else bs(this.i,this.l,p,null),Ul(this,p);_e==4&&Yr(this),this.o&&!this.K&&(_e==4?zd(this.j,this):(this.o=!1,pa(this)))}else kw(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Yr(this),Ui(this)}}}catch{}finally{}};function yw(a){if(!Td(a))return a.g.la();const f=$d(a.g);if(f==="")return"";let p="";const g=f.length,N=or(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Yr(a),Ui(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<g;D++)a.h.h=!0,p+=a.h.i.decode(f[D],{stream:!(N&&D==g-1)});return f.length=0,a.h.g+=p,a.C=0,a.h.g}function Td(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Ew(a,f){var p=a.C,g=f.indexOf(`
`,p);return g==-1?Ml:(p=Number(f.substring(p,g)),isNaN(p)?Ed:(g+=1,g+p>f.length?Ml:(f=f.slice(g,g+p),a.C=g+p,f)))}rr.prototype.cancel=function(){this.K=!0,Yr(this)};function pa(a){a.T=Date.now()+a.H,wd(a,a.H)}function wd(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Mi(u(a.aa,a),f)}function Fl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}rr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(mw(this.i,this.B),this.M!=2&&(Li(),At(17)),Yr(this),this.m=2,Ui(this)):wd(this,this.T-a)};function Ui(a){a.j.I==0||a.K||zd(a.j,a)}function Yr(a){Fl(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Se(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function Ul(a,f){try{var p=a.j;if(p.I!=0&&(p.g==a||$l(p.h,a))){if(!a.L&&$l(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(f)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)va(p),ya(p);else break e;Kl(p),At(18)}}else p.xa=N[1],0<p.xa-p.K&&N[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Mi(u(p.Va,p),6e3));bd(p.h)<=1&&p.ta&&(p.ta=void 0)}else Xr(p,11)}else if((a.L||p.g==a)&&va(p),!v(f))for(N=p.Ba.g.parse(f),f=0;f<N.length;f++){let De=N[f];const rt=De[0];if(!(rt<=p.K))if(p.K=rt,De=De[1],p.I==2)if(De[0]=="c"){p.M=De[1],p.ba=De[2];const pn=De[3];pn!=null&&(p.ka=pn,p.j.info("VER="+p.ka));const Jr=De[4];Jr!=null&&(p.za=Jr,p.j.info("SVER="+p.za));const ar=De[5];ar!=null&&typeof ar=="number"&&ar>0&&(g=1.5*ar,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const cr=a.g;if(cr){const wa=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wa){var D=g.h;D.g||wa.indexOf("spdy")==-1&&wa.indexOf("quic")==-1&&wa.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Bl(D,D.h),D.h=null))}if(g.G){const Gl=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gl&&(g.wa=Gl,xe(g.J,g.G,Gl))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var z=a;if(g.na=Qd(g,g.L?g.ba:null,g.W),z.L){Sd(g.h,z);var _e=z,Ze=g.O;Ze&&(_e.H=Ze),_e.D&&(Fl(_e),pa(_e)),g.g=z}else Wd(g);p.i.length>0&&Ea(p)}else De[0]!="stop"&&De[0]!="close"||Xr(p,7);else p.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Xr(p,7):Wl(p):De[0]!="noop"&&p.l&&p.l.qa(De),p.A=0)}}Li(4)}catch{}}var vw=class{constructor(a,f){this.g=a,this.map=f}};function Ad(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Id(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bd(a){return a.h?1:a.g?a.g.size:0}function $l(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Bl(a,f){a.g?a.g.add(f):a.h=f}function Sd(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Ad.prototype.cancel=function(){if(this.i=Cd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Cd(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.G);return f}return _(a.i)}var Rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tw(a,f){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let N,D=null;g>=0?(N=a[p].substring(0,g),D=a[p].substring(g+1)):N=a[p],f(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function sr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof sr?(this.l=a.l,$i(this,a.j),this.o=a.o,this.g=a.g,Bi(this,a.u),this.h=a.h,jl(this,Vd(a.i)),this.m=a.m):a&&(f=String(a).match(Rd))?(this.l=!1,$i(this,f[1]||"",!0),this.o=ji(f[2]||""),this.g=ji(f[3]||"",!0),Bi(this,f[4]),this.h=ji(f[5]||"",!0),jl(this,f[6]||"",!0),this.m=ji(f[7]||"")):(this.l=!1,this.i=new qi(null,this.l))}sr.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(Hi(f,Pd,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Hi(f,Pd,!0),"@"),a.push(Fi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Hi(p,p.charAt(0)=="/"?Iw:Aw,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Hi(p,Sw)),a.join("")},sr.prototype.resolve=function(a){const f=dn(this);let p=!!a.j;p?$i(f,a.j):p=!!a.o,p?f.o=a.o:p=!!a.g,p?f.g=a.g:p=a.u!=null;var g=a.h;if(p)Bi(f,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var N=f.h.lastIndexOf("/");N!=-1&&(g=f.h.slice(0,N+1)+g)}if(N=g,N==".."||N==".")g="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){g=N.lastIndexOf("/",0)==0,N=N.split("/");const D=[];for(let z=0;z<N.length;){const _e=N[z++];_e=="."?g&&z==N.length&&D.push(""):_e==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),g&&z==N.length&&D.push("")):(D.push(_e),g=!0)}g=D.join("/")}else g=N}return p?f.h=g:p=a.i.toString()!=="",p?jl(f,Vd(a.i)):p=!!a.m,p&&(f.m=a.m),f};function dn(a){return new sr(a)}function $i(a,f,p){a.j=p?ji(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Bi(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function jl(a,f,p){f instanceof qi?(a.i=f,Cw(a.i,a.l)):(p||(f=Hi(f,bw)),a.i=new qi(f,a.l))}function xe(a,f,p){a.i.set(f,p)}function ma(a){return xe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ji(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Hi(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,ww),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ww(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Pd=/[#\/\?@]/g,Aw=/[#\?:]/g,Iw=/[#\?]/g,bw=/[#\?@]/g,Sw=/#/g;function qi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Qr(a){a.g||(a.g=new Map,a.h=0,a.i&&Tw(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=qi.prototype,t.add=function(a,f){Qr(this),this.i=null,a=Ss(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function Nd(a,f){Qr(a),f=Ss(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Od(a,f){return Qr(a),f=Ss(a,f),a.g.has(f)}t.forEach=function(a,f){Qr(this),this.g.forEach(function(p,g){p.forEach(function(N){a.call(f,N,g,this)},this)},this)};function Dd(a,f){Qr(a);let p=[];if(typeof f=="string")Od(a,f)&&(p=p.concat(a.g.get(Ss(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)p=p.concat(a[f]);return p}t.set=function(a,f){return Qr(this),this.i=null,a=Ss(this,a),Od(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=Dd(this,a),a.length>0?String(a[0]):f):f};function kd(a,f,p){Nd(a,f),p.length>0&&(a.i=null,a.g.set(Ss(a,f),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let g=0;g<f.length;g++){var p=f[g];const N=Fi(p);p=Dd(this,p);for(let D=0;D<p.length;D++){let z=N;p[D]!==""&&(z+="="+Fi(p[D])),a.push(z)}}return this.i=a.join("&")};function Vd(a){const f=new qi;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function Ss(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function Cw(a,f){f&&!a.j&&(Qr(a),a.i=null,a.g.forEach(function(p,g){const N=g.toLowerCase();g!=N&&(Nd(this,g),kd(this,N,p))},a)),a.j=f}function Rw(a,f){const p=new xi;if(o.Image){const g=new Image;g.onload=h(ir,p,"TestLoadImage: loaded",!0,f,g),g.onerror=h(ir,p,"TestLoadImage: error",!1,f,g),g.onabort=h(ir,p,"TestLoadImage: abort",!1,f,g),g.ontimeout=h(ir,p,"TestLoadImage: timeout",!1,f,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else f(!1)}function Pw(a,f){const p=new xi,g=new AbortController,N=setTimeout(()=>{g.abort(),ir(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(N),D.ok?ir(p,"TestPingServer: ok",!0,f):ir(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),ir(p,"TestPingServer: error",!1,f)})}function ir(a,f,p,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(p)}catch{}}function Nw(){this.g=new dt}function Hl(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Hl,Lt),Hl.prototype.g=function(){return new ga(this.i,this.h)};function ga(a,f){K.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ga,K),t=ga.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Ki(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ld(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ld(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Wi(this):Ki(this),this.readyState==3&&Ld(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Wi(this))},t.Na=function(a){this.g&&(this.response=a,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ki(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Ki(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Md(a){let f="";return He(a,function(p,g){f+=g,f+=":",f+=p,f+=`\r
`}),f}function ql(a,f,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=Md(p),typeof a=="string"?p!=null&&Fi(p):xe(a,f,p))}function We(a){K.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(We,K);var Ow=/^https?$/i,Dw=["POST","PUT"];t=We.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_d.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(D){xd(this,D);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)p.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())p.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(D=>D.toLowerCase()=="content-type"),N=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Dw,f,void 0)>=0)||g||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of p)this.g.setRequestHeader(D,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){xd(this,D)}};function xd(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Fd(a),_a(a)}function Fd(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,H(this,"complete"),H(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),We.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ud(this):this.Xa())},t.Xa=function(){Ud(this)};function Ud(a){if(a.h&&typeof i<"u"){if(a.v&&or(a)==4)setTimeout(a.Ca.bind(a),0);else if(H(a,"readystatechange"),or(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var g;if(g=D===0){let z=String(a.D).match(Rd)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),g=!Ow.test(z?z.toLowerCase():"")}p=g}if(p)H(a,"complete"),H(a,"success");else{a.o=6;try{var N=or(a)>2?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.ca()+"]",Fd(a)}}finally{_a(a)}}}}function _a(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,f||H(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function or(a){return a.g?a.g.readyState:0}t.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),ft(f)}};function $d(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function kw(a){const f={};a=(a.g&&or(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(v(a[g]))continue;var p=_w(a[g]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const D=f[N]||[];f[N]=D,D.push(p)}wt(f,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Bd(a){this.za=0,this.i=[],this.j=new xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,a),this.Za=zi("retryDelaySeedMs",1e4,a),this.Ta=zi("forwardChannelMaxRetries",2,a),this.va=zi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ad(a&&a.concurrentRequestLimit),this.Ba=new Nw,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Bd.prototype,t.ka=8,t.I=1,t.connect=function(a,f,p,g){At(0),this.W=a,this.H=f||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=Qd(this,null,this.W),Ea(this)};function Wl(a){if(jd(a),a.I==3){var f=a.V++,p=dn(a.J);if(xe(p,"SID",a.M),xe(p,"RID",f),xe(p,"TYPE","terminate"),Gi(a,p),f=new rr(a,a.j,f),f.M=2,f.A=ma(dn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=f.A,p=!0),p||(f.g=Xd(f.j,null),f.g.ea(f.A)),f.F=Date.now(),pa(f)}Yd(a)}function ya(a){a.g&&(zl(a),a.g.cancel(),a.g=null)}function jd(a){ya(a),a.v&&(o.clearTimeout(a.v),a.v=null),va(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ea(a){if(!Id(a.h)&&!a.m){a.m=!0;var f=a.Ea;X||y(),Z||(X(),Z=!0),w.add(f,a),a.D=0}}function Vw(a,f){return bd(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Mi(u(a.Ea,a,f),Gd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const N=new rr(this,this.j,a);let D=this.o;if(this.U&&(D?(D=it(D),Pt(D,this.U)):D=this.U),this.u!==null||this.R||(N.J=D,D=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(f+=g,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=qd(this,N,f),p=dn(this.J),xe(p,"RID",a),xe(p,"CVER",22),this.G&&xe(p,"X-HTTP-Session-Id",this.G),Gi(this,p),D&&(this.R?f="headers="+Fi(Md(D))+"&"+f:this.u&&ql(p,this.u,D)),Bl(this.h,N),this.Ra&&xe(p,"TYPE","init"),this.S?(xe(p,"$req",f),xe(p,"SID","null"),N.U=!0,xl(N,p,null)):xl(N,p,f),this.I=2}}else this.I==3&&(a?Hd(this,a):this.i.length==0||Id(this.h)||Hd(this))};function Hd(a,f){var p;f?p=f.l:p=a.V++;const g=dn(a.J);xe(g,"SID",a.M),xe(g,"RID",p),xe(g,"AID",a.K),Gi(a,g),a.u&&a.o&&ql(g,a.u,a.o),p=new rr(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),f&&(a.i=f.G.concat(a.i)),f=qd(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Bl(a.h,p),xl(p,g,f)}function Gi(a,f){a.H&&He(a.H,function(p,g){xe(f,g,p)}),a.l&&He({},function(p,g){xe(f,g,p)})}function qd(a,f,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var N=a.i;let _e=-1;for(;;){const Ze=["count="+p];_e==-1?p>0?(_e=N[0].g,Ze.push("ofs="+_e)):_e=0:Ze.push("ofs="+_e);let De=!0;for(let rt=0;rt<p;rt++){var D=N[rt].g;const pn=N[rt].map;if(D-=_e,D<0)_e=Math.max(0,N[rt].g-100),De=!1;else try{D="req"+D+"_"||"";try{var z=pn instanceof Map?pn:Object.entries(pn);for(const[Jr,ar]of z){let cr=ar;c(ar)&&(cr=Ee(ar)),Ze.push(D+Jr+"="+encodeURIComponent(cr))}}catch(Jr){throw Ze.push(D+"type="+encodeURIComponent("_badmap")),Jr}}catch{g&&g(pn)}}if(De){z=Ze.join("&");break e}}z=void 0}return a=a.i.splice(0,p),f.G=a,z}function Wd(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;X||y(),Z||(X(),Z=!0),w.add(f,a),a.A=0}}function Kl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Mi(u(a.Da,a),Gd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Kd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Mi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),ya(this),Kd(this))};function zl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Kd(a){a.g=new rr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=dn(a.na);xe(f,"RID","rpc"),xe(f,"SID",a.M),xe(f,"AID",a.K),xe(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&xe(f,"TO",a.ia),xe(f,"TYPE","xmlhttp"),Gi(a,f),a.u&&a.o&&ql(f,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=ma(dn(f)),p.u=null,p.R=!0,vd(p,a)}t.Va=function(){this.C!=null&&(this.C=null,ya(this),Kl(this),At(19))};function va(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zd(a,f){var p=null;if(a.g==f){va(a),zl(a),a.g=null;var g=2}else if($l(a.h,f))p=f.G,Sd(a.h,f),g=1;else return;if(a.I!=0){if(f.o)if(g==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var N=a.D;g=Gr(),H(g,new md(g,p)),Ea(a)}else Wd(a);else if(N=f.m,N==3||N==0&&f.X>0||!(g==1&&Vw(a,f)||g==2&&Kl(a)))switch(p&&p.length>0&&(f=a.h,f.i=f.i.concat(p)),N){case 1:Xr(a,5);break;case 4:Xr(a,10);break;case 3:Xr(a,6);break;default:Xr(a,2)}}}function Gd(a,f){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*f}function Xr(a,f){if(a.j.info("Error code "+f),f==2){var p=u(a.bb,a),g=a.Ua;const N=!g;g=new sr(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$i(g,"https"),ma(g),N?Rw(g.toString(),p):Pw(g.toString(),p)}else At(2);a.I=0,a.l&&a.l.pa(f),Yd(a),jd(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Yd(a){if(a.I=0,a.ja=[],a.l){const f=Cd(a.h);(f.length!=0||a.i.length!=0)&&(S(a.ja,f),S(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Qd(a,f,p){var g=p instanceof sr?dn(p):new sr(p);if(g.g!="")f&&(g.g=f+"."+g.g),Bi(g,g.u);else{var N=o.location;g=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;const D=new sr(null);g&&$i(D,g),f&&(D.g=f),N&&Bi(D,N),p&&(D.h=p),g=D}return p=a.G,f=a.wa,p&&f&&xe(g,p,f),xe(g,"VER",a.ka),Gi(a,g),g}function Xd(a,f,p){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new We(new Hl({ab:p})):new We(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jd(){}t=Jd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ta(){}Ta.prototype.g=function(a,f){return new xt(a,f)};function xt(a,f){K.call(this),this.g=new Bd(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!v(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Cs(this)}d(xt,K),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Wl(this.g)},xt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Ee(a),a=p);f.i.push(new vw(f.Ya++,a)),f.I==3&&Ea(f)},xt.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,xt.Z.N.call(this)};function Zd(a){Is.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const p in f){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}d(Zd,Is);function ep(){at.call(this),this.status=1}d(ep,at);function Cs(a){this.g=a}d(Cs,Jd),Cs.prototype.ra=function(){H(this.g,"a")},Cs.prototype.qa=function(a){H(this.g,new Zd(a))},Cs.prototype.pa=function(a){H(this.g,new ep)},Cs.prototype.oa=function(){H(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,VE=function(){return new Ta},kE=function(){return Gr()},DE=nt,sh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,nc=da,gd.COMPLETE="complete",OE=gd,Mt.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",K.prototype.listen=K.prototype.J,io=Mt,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,NE=We}).apply(typeof Na<"u"?Na:typeof self<"u"?self:typeof window<"u"?window:{});const Om="@firebase/firestore",Dm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new tf("@firebase/firestore");function xs(){return ms.logLevel}function te(t,...e){if(ms.logLevel<=ve.DEBUG){const n=e.map(df);ms.debug(`Firestore (${Ii}): ${t}`,...n)}}function Jn(t,...e){if(ms.logLevel<=ve.ERROR){const n=e.map(df);ms.error(`Firestore (${Ii}): ${t}`,...n)}}function ai(t,...e){if(ms.logLevel<=ve.WARN){const n=e.map(df);ms.warn(`Firestore (${Ii}): ${t}`,...n)}}function df(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LE(t,r,n)}function LE(t,e,n){let r=`FIRESTORE (${Ii}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function Ne(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||LE(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mt.UNAUTHENTICATED)))}shutdown(){}}class u0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class h0{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new ME(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class f0{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class d0{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new f0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class km{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new km(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new km(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=m0(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function ih(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return pu(s)===pu(i)?Te(s,i):pu(s)?1:-1}return Te(t.length,e.length)}const g0=55296,_0=57343;function pu(t){const e=t.charCodeAt(0);return e>=g0&&e<=_0}function ci(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="__name__";class _n{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=_n.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const r=_n.isNumericId(e),s=_n.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?_n.extractNumericId(e).compare(_n.extractNumericId(n)):ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class Le extends _n{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Le(n)}static emptyPath(){return new Le([])}}const y0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends _n{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return y0.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vm}static keyField(){return new ut([Vm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ee(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ee(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Le.fromString(e))}static fromName(e){return new ie(Le.fromString(e).popFirst(5))}static empty(){return new ie(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e,n){if(!n)throw new ee(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function E0(t,e,n,r){if(e===!0&&r===!0)throw new ee(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lm(t){if(!ie.isDocumentKey(t))throw new ee(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mm(t){if(ie.isDocumentKey(t))throw new ee(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ul(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ul(t);throw new ee(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t,e){const n={typeString:t};return e&&(n.value=e),n}function ta(t,e){if(!FE(t))throw new ee(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ee(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=-62135596800,Fm=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Fm);return new Ue(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xm)throw new ee(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fm}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:Je("string",Ue._jsonSchemaVersion),seconds:Je("number"),nanoseconds:Je("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Ue(0,0))}static max(){return new he(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=-1;function v0(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Nr(s,ie.empty(),e)}function T0(t){return new Nr(t.readTime,t.key,Uo)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(he.min(),ie.empty(),Uo)}static max(){return new Nr(he.max(),ie.empty(),Uo)}}function w0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==A0)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):B.reject(n)}static resolve(e){return new B(((n,r)=>{n(e)}))}static reject(e){return new B(((n,r)=>{r(e)}))}static waitFor(e){return new B(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next((s=>s?B.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new B(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++c,c===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new B(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function b0(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Si(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;function fl(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function S0(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="";function C0(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Um(e)),e=R0(t.get(n),e);return Um(e)}function R0(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case UE:n+="";break;default:n+=i}}return n}function Um(t){return t+UE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oa(this.root,e,this.comparator,!0)}}class Oa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ct.RED,this.left=s??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ct(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bm(this.data.getIterator())}getIteratorFrom(e){return new Bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Bm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new jt([])}unionWith(e){let n=new et(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BE("Invalid base64 string: "+i):i}})(e);return new ht(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const P0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=P0.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="server_timestamp",HE="__type__",qE="__previous_value__",WE="__local_write_time__";function gf(t){return(t?.mapValue?.fields||{})[HE]?.stringValue===jE}function dl(t){const e=t.mapValue.fields[qE];return gf(e)?dl(e):e}function $o(t){const e=Or(t.mapValue.fields[WE].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r,s,i,o,c,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Pc="(default)";class Bo{constructor(e,n){this.projectId=e,this.database=n||Pc}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database===Pc}isEqual(e){return e instanceof Bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="__type__",O0="__max__",Da={mapValue:{}},zE="__vector__",Nc="value";function kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gf(t)?4:k0(t)?9007199254740991:D0(t)?10:11:ue(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=kr(t);if(n!==kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $o(t).isEqual($o(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),c=Or(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Dr(s.bytesValue).isEqual(Dr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ke(s.geoPointValue.latitude)===Ke(i.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ke(s.integerValue)===Ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ke(s.doubleValue),c=Ke(i.doubleValue);return o===c?Rc(o)===Rc(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return ci(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if($m(o)!==$m(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!kn(o[l],c[l])))return!1;return!0})(t,e);default:return ue(52216,{left:t})}}function jo(t,e){return(t.values||[]).find((n=>kn(n,e)))!==void 0}function li(t,e){if(t===e)return 0;const n=kr(t),r=kr(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Ke(i.integerValue||i.doubleValue),l=Ke(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return jm(t.timestampValue,e.timestampValue);case 4:return jm($o(t),$o(e));case 5:return ih(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Dr(i),l=Dr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const h=Te(c[u],l[u]);if(h!==0)return h}return Te(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Te(Ke(i.latitude),Ke(o.latitude));return c!==0?c:Te(Ke(i.longitude),Ke(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Hm(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[Nc]?.arrayValue,h=l[Nc]?.arrayValue,d=Te(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Hm(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Da.mapValue&&o===Da.mapValue)return 0;if(i===Da.mapValue)return 1;if(o===Da.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=ih(l[d],h[d]);if(m!==0)return m;const _=li(c[l[d]],u[h[d]]);if(_!==0)return _}return Te(l.length,h.length)})(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function jm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Or(t),r=Or(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function Hm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=li(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function ui(t){return oh(t)}function oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Dr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=oh(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${oh(n.fields[o])}`;return s+"}"})(t.mapValue):ue(61005,{value:t})}function rc(t){switch(kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dl(t);return e?16+rc(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+rc(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Hr(r.fields,((i,o)=>{s+=i.length+rc(o)})),s})(t.mapValue);default:throw ue(13486,{value:t})}}function qm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ah(t){return!!t&&"integerValue"in t}function _f(t){return!!t&&"arrayValue"in t}function Wm(t){return!!t&&"nullValue"in t}function Km(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sc(t){return!!t&&"mapValue"in t}function D0(t){return(t?.mapValue?.fields||{})[KE]?.stringValue===zE}function wo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=wo(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wo(t.arrayValue.values[n]);return e}return{...t}}function k0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===O0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wo(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=wo(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Dt(wo(this.value))}}function GE(t){const e=[];return Hr(t.fields,((n,r)=>{const s=new ut([n]);if(sc(r)){const i=GE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new _t(e,0,he.min(),he.min(),he.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,he.min(),he.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,he.min(),he.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.position=e,this.inclusive=n}}function zm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=li(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n="asc"){this.field=e,this.dir=n}}function V0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{}class Xe extends YE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new M0(e,n,r):n==="array-contains"?new U0(e,r):n==="in"?new $0(e,r):n==="not-in"?new B0(e,r):n==="array-contains-any"?new j0(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new x0(e,r):new F0(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(li(n,this.value)):n!==null&&kr(this.value)===kr(n)&&this.matchesComparison(li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends YE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hn(e,n)}matches(e){return QE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QE(t){return t.op==="and"}function XE(t){return L0(t)&&QE(t)}function L0(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function ch(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+ui(t.value);if(XE(t))return t.filters.map((e=>ch(e))).join(",");{const e=t.filters.map((n=>ch(n))).join(",");return`${t.op}(${e})`}}function JE(t,e){return t instanceof Xe?(function(r,s){return s instanceof Xe&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)})(t,e):t instanceof hn?(function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&JE(o,s.filters[c])),!0):!1})(t,e):void ue(19439)}function ZE(t){return t instanceof Xe?(function(n){return`${n.field.canonicalString()} ${n.op} ${ui(n.value)}`})(t):t instanceof hn?(function(n){return n.op.toString()+" {"+n.getFilters().map(ZE).join(" ,")+"}"})(t):"Filter"}class M0 extends Xe{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class x0 extends Xe{constructor(e,n){super(e,"in",n),this.keys=ev("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class F0 extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=ev("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ev(t,e){return(e.arrayValue?.values||[]).map((n=>ie.fromName(n.referenceValue)))}class U0 extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _f(n)&&jo(n.arrayValue,this.value)}}class $0 extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class B0 extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jo(this.value.arrayValue,n)}}class j0 extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_f(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>jo(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Ym(t,e=null,n=[],r=[],s=null,i=null,o=null){return new H0(t,e,n,r,s,i,o)}function yf(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ch(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),fl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ui(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ui(r))).join(",")),e.Te=n}return e.Te}function Ef(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!V0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gm(t.startAt,e.startAt)&&Gm(t.endAt,e.endAt)}function lh(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function q0(t,e,n,r,s,i,o,c){return new na(t,e,n,r,s,i,o,c)}function vf(t){return new na(t)}function Qm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tv(t){return t.collectionGroup!==null}function Ao(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new et(ut.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Dc(i,r))})),n.has(ut.keyField().canonicalString())||e.Ie.push(new Dc(ut.keyField(),r))}return e.Ie}function In(t){const e=fe(t);return e.Ee||(e.Ee=W0(e,Ao(t))),e.Ee}function W0(t,e){if(t.limitType==="F")return Ym(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Dc(s.field,i)}));const n=t.endAt?new Oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oc(t.startAt.position,t.startAt.inclusive):null;return Ym(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uh(t,e){const n=t.filters.concat([e]);return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hh(t,e,n){return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pl(t,e){return Ef(In(t),In(e))&&t.limitType===e.limitType}function nv(t){return`${yf(In(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>ZE(s))).join(", ")}]`),fl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>ui(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>ui(s))).join(",")),`Target(${r})`})(In(t))}; limitType=${t.limitType})`}function ml(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Ao(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=zm(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,Ao(r),s)||r.endAt&&!(function(o,c,l){const u=zm(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,Ao(r),s))})(t,e)}function K0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rv(t){return(e,n)=>{let r=!1;for(const s of Ao(t)){const i=z0(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function z0(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?li(l,u):ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Be(ie.comparator);function Zn(){return G0}const sv=new Be(ie.comparator);function oo(...t){let e=sv;for(const n of t)e=e.insert(n.key,n);return e}function iv(t){let e=sv;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ss(){return Io()}function ov(){return Io()}function Io(){return new vs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Y0=new Be(ie.comparator),Q0=new et(ie.comparator);function we(...t){let e=Q0;for(const n of t)e=e.add(n);return e}const X0=new et(Te);function J0(){return X0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function av(t){return{integerValue:""+t}}function Z0(t,e){return S0(e)?av(e):Tf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this._=void 0}}function eN(t,e,n){return t instanceof kc?(function(s,i){const o={fields:{[HE]:{stringValue:jE},[WE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gf(i)&&(i=dl(i)),i&&(o.fields[qE]=i),{mapValue:o}})(n,e):t instanceof Ho?lv(t,e):t instanceof qo?uv(t,e):(function(s,i){const o=cv(s,i),c=Xm(o)+Xm(s.Ae);return ah(o)&&ah(s.Ae)?av(c):Tf(s.serializer,c)})(t,e)}function tN(t,e,n){return t instanceof Ho?lv(t,e):t instanceof qo?uv(t,e):n}function cv(t,e){return t instanceof Vc?(function(r){return ah(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class kc extends gl{}class Ho extends gl{constructor(e){super(),this.elements=e}}function lv(t,e){const n=hv(e);for(const r of t.elements)n.some((s=>kn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class qo extends gl{constructor(e){super(),this.elements=e}}function uv(t,e){let n=hv(e);for(const r of t.elements)n=n.filter((s=>!kn(s,r)));return{arrayValue:{values:n}}}class Vc extends gl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xm(t){return Ke(t.integerValue||t.doubleValue)}function hv(t){return _f(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nN(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ho&&s instanceof Ho||r instanceof qo&&s instanceof qo?ci(r.elements,s.elements,kn):r instanceof Vc&&s instanceof Vc?kn(r.Ae,s.Ae):r instanceof kc&&s instanceof kc})(t.transform,e.transform)}class rN{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _l{}function fv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pv(t.key,cn.none()):new ra(t.key,t.data,cn.none());{const n=t.data,r=Dt.empty();let s=new et(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qr(t.key,r,new jt(s.toArray()),cn.none())}}function sN(t,e,n){t instanceof ra?(function(s,i,o){const c=s.value.clone(),l=Zm(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof qr?(function(s,i,o){if(!ic(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Zm(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(dv(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function bo(t,e,n,r){return t instanceof ra?(function(i,o,c,l){if(!ic(i.precondition,o))return c;const u=i.value.clone(),h=eg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof qr?(function(i,o,c,l){if(!ic(i.precondition,o))return c;const u=eg(i.fieldTransforms,l,o),h=o.data;return h.setAll(dv(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,c){return ic(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function iN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cv(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function Jm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ci(r,s,((i,o)=>nN(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ra extends _l{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qr extends _l{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dv(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Zm(t,e,n){const r=new Map;Ne(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,tN(o,c,n[s]))}return r}function eg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,eN(i,o,e))}return r}class pv extends _l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oN extends _l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ov();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=fv(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),we())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,((n,r)=>Jm(n,r)))&&ci(this.baseMutations,e.baseMutations,((n,r)=>Jm(n,r)))}}class wf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Y0})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new wf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,Ie;function uN(t){switch(t){case F.OK:return ue(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function mv(t){if(t===void 0)return Jn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Qe.OK:return F.OK;case Qe.CANCELLED:return F.CANCELLED;case Qe.UNKNOWN:return F.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return F.INTERNAL;case Qe.UNAVAILABLE:return F.UNAVAILABLE;case Qe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Qe.NOT_FOUND:return F.NOT_FOUND;case Qe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Qe.ABORTED:return F.ABORTED;case Qe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Qe.DATA_LOSS:return F.DATA_LOSS;default:return ue(39323,{code:t})}}(Ie=Qe||(Qe={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Ir([4294967295,4294967295],0);function tg(t){const e=hN().encode(t),n=new PE;return n.update(e),new Uint8Array(n.digest())}function ng(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([s,i],0)]}class Af{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ir.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ir.fromNumber(r)));return s.compare(fN)===1&&(s=new Ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tg(e),[r,s]=ng(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Af(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=tg(e),[r,s]=ng(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yl(he.min(),s,new Be(Te),Zn(),we())}}class sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sa(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class gv{constructor(e,n){this.targetId=e,this.Ce=n}}class _v{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class rg{constructor(){this.ve=0,this.Fe=sg(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=we(),n=we(),r=we();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}})),new sa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=sg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zn(),this.Je=ka(),this.He=ka(),this.Ye=new Be(Te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(lh(i))if(r===0){const o=new ie(i.path);this.et(n,o,_t.newNoDocument(o,he.min()))}else Ne(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Dr(r).toUint8Array()}catch(l){if(l instanceof BE)return ai("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Af(o,s,i)}catch(l){return ai(l instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&lh(c.target)){const l=new ie(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,_t.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=we();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new yl(e,n,this.Ye,this.je,r);return this.je=Zn(),this.Je=ka(),this.He=ka(),this.Ye=new Be(Te),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new et(Te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new et(Te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rg),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ka(){return new Be(ie.comparator)}function sg(){return new Be(ie.comparator)}const pN={asc:"ASCENDING",desc:"DESCENDING"},mN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gN={and:"AND",or:"OR"};class _N{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fh(t,e){return t.useProto3Json||fl(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yN(t,e){return Lc(t,e.toTimestamp())}function bn(t){return Ne(!!t,49232),he.fromTimestamp((function(n){const r=Or(n);return new Ue(r.seconds,r.nanos)})(t))}function If(t,e){return dh(t,e).canonicalString()}function dh(t,e){const n=(function(s){return new Le(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Ev(t){const e=Le.fromString(t);return Ne(Iv(e),10190,{key:e.toString()}),e}function ph(t,e){return If(t.databaseId,e.path)}function mu(t,e){const n=Ev(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(Tv(n))}function vv(t,e){return If(t.databaseId,e)}function EN(t){const e=Ev(t);return e.length===4?Le.emptyPath():Tv(e)}function mh(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tv(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ig(t,e,n){return{name:ph(t,e),fields:n.value.mapValue.fields}}function vN(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const h=u.code===void 0?F.UNKNOWN:mv(u.code);return new ee(h,u.message||"")})(o);n=new _v(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mu(t,r.document.name),i=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):he.min(),c=new Dt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(s,i,o,c),u=r.targetIds||[],h=r.removedTargetIds||[];n=new oc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mu(t,r.document),i=r.readTime?bn(r.readTime):he.min(),o=_t.newNoDocument(s,i),c=r.removedTargetIds||[];n=new oc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mu(t,r.document),i=r.removedTargetIds||[];n=new oc([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lN(s,i),c=r.targetId;n=new gv(c,o)}}return n}function TN(t,e){let n;if(e instanceof ra)n={update:ig(t,e.key,e.value)};else if(e instanceof pv)n={delete:ph(t,e.key)};else if(e instanceof qr)n={update:ig(t,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof oN))return ue(16599,{Vt:e.type});n={verify:ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ue(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:yN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)})(t,e.precondition)),n}function wN(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?bn(s.updateTime):bn(i);return o.isEqual(he.min())&&(o=bn(i)),new rN(o,s.transformResults||[])})(n,e)))):[]}function AN(t,e){return{documents:[vv(t,e.path)]}}function IN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vv(t,s);const i=(function(u){if(u.length!==0)return Av(hn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(m){return{field:Us(m.field),direction:CN(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=fh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function bN(t){let e=EN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ne(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const m=wv(d);return m instanceof hn&&XE(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(S){return new Dc($s(S.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(d){let m;return m=typeof d=="object"?d.value:d,fl(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(d){const m=!!d.before,_=d.values||[];return new Oc(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,_=d.values||[];return new Oc(_,m)})(n.endAt)),q0(e,s,o,i,c,"F",l,u)}function SN(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wv(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$s(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$s(n.unaryFilter.field);return Xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$s(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$s(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Xe.create($s(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return hn.create(n.compositeFilter.filters.map((r=>wv(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(n.compositeFilter.op))})(t):ue(30097,{filter:t})}function CN(t){return pN[t]}function RN(t){return mN[t]}function PN(t){return gN[t]}function Us(t){return{fieldPath:t.canonicalString()}}function $s(t){return ut.fromServerFormat(t.fieldPath)}function Av(t){return t instanceof Xe?(function(n){if(n.op==="=="){if(Km(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(Wm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Km(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(Wm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:RN(n.op),value:n.value}}})(t):t instanceof hn?(function(n){const r=n.getFilters().map((s=>Av(s)));return r.length===1?r[0]:{compositeFilter:{op:PN(n.op),filters:r}}})(t):ue(54877,{filter:t})}function NN(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Iv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,s,i=he.min(),o=he.min(),c=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.yt=e}}function DN(t){const e=bN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.Cn=new VN}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Nr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class VN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bv=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(bv,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new hi(0)}static cr(){return new hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="LruGarbageCollector",LN=1048576;function cg([t,e],[n,r]){const s=Te(t,n);return s===0?Te(e,r):s}class MN{constructor(e){this.Ir=e,this.buffer=new et(cg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(ag,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Si(n)?te(ag,"Ignoring IndexedDB error during garbage collection: ",n):await bi(n)}await this.Vr(3e5)}))}}class FN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return B.resolve(hl.ce);const r=new MN(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(og)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),og):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,c=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),xs()<=ve.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function UN(t,e){return new FN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.changes=new vs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&bo(r.mutation,s,jt.empty(),Ue.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,we()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=we()){const s=ss();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=oo();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,we())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=Zn();const o=Io(),c=(function(){return Io()})();return n.forEach(((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof qr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),bo(h.mutation,u,h.mutation.getFieldMask(),Ue.now())):o.set(u.key,jt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>c.set(u,new BN(h,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Io();let s=new Be(((o,c)=>o-c)),i=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||jt.empty();h=c.applyToLocalView(u,h),r.set(l,h);const d=(s.get(c.batchId)||we()).add(l);s=s.insert(c.batchId,d)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,h=l.value,d=ov();h.forEach((m=>{if(!i.has(m)){const _=fv(n.get(m),r.get(m));_!==null&&d.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return B.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ss());let c=Uo,l=i;return o.next((u=>B.forEach(u,((h,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{l=l.insert(h,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,we()))).next((h=>({batchId:c,changes:iv(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next((r=>{let s=oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=oo();return this.indexManager.getCollectionParents(e,i).next((c=>B.forEach(c,(l=>{const u=(function(d,m){return new na(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))}));let c=oo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&bo(h.mutation,u,jt.empty(),Ue.now()),ml(n,u)&&(c=c.insert(l,u))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}})(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:DN(s.bundledQuery),readTime:bn(s.readTime)}})(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.overlays=new Be(ie.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return B.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ss(),i=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Be(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ss(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const c=ss(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>c.set(u,h))),!(c.size()>=s)););return B.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cN(n,r));let i=this.qr.get(n);i===void 0&&(i=we(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this.Qr=new et(st.$r),this.Ur=new et(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new st(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ie(new Le([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ie(new Le([])),r=new st(n,e),s=new st(n,e+1);let i=we();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new st(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ie.comparator(e.key,n.key)||Te(e.Yr,n.Yr)}static Kr(e,n){return Te(e.Yr,n.Yr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new et(st.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aN(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new st(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?mf:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(Te);return n.forEach((s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new st(new ie(i),0);let c=new et(Te);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),B.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,(s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new st(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.ri=e,this.docs=(function(){return new Be(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))})),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zn();const o=n.path,c=new ie(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||w0(T0(h),r)<=0||(s.has(h.key)||ml(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return B.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new GN(this)}getSize(e){return B.resolve(this.size)}}class GN extends $N{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.persistence=e,this.si=new vs((n=>yf(n)),Ef),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new bf,this.targetCount=0,this.ai=hi.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),B.waitFor(i).next((()=>s))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n){this.ui={},this.overlays={},this.ci=new hl(0),this.li=!1,this.li=!0,this.hi=new WN,this.referenceDelegate=e(this),this.Pi=new YN(this),this.indexManager=new kN,this.remoteDocumentCache=(function(s){return new zN(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ON(n),this.Ii=new HN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new KN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new QN(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return B.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class QN extends I0{constructor(e){super(),this.currentSequenceNumber=e}}class Sf{constructor(e){this.persistence=e,this.Ri=new bf,this.Vi=null}static mi(e){return new Sf(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(r=>{const s=ie.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,he.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mc{constructor(e,n){this.persistence=e,this.pi=new vs((r=>C0(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=UN(this,n)}static mi(e,n){return new Mc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return B.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?B.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,he.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rc(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=we(),s=we();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Cf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return NS()?8:b0(Tt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new XN;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(xs()<=ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(xs()<=ve.DEBUG&&te("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(xs()<=ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):B.resolve())}ys(e,n){if(Qm(n))return B.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=hh(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=we(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,hh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return Qm(n)||s.isEqual(he.min())?B.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?B.resolve(null):(xs()<=ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fs(n)),this.vs(e,o,n,v0(s,Uo)).next((c=>c)))}))}Ds(e,n){let r=new et(rv(e));return n.forEach(((s,i)=>{ml(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return xs()<=ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.ps.getDocumentsMatchingQuery(e,n,Nr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="LocalStore",ZN=3e8;class eO{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Be(Te),this.xs=new vs((i=>yf(i)),Ef),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function tO(t,e,n,r){return new eO(t,e,n,r)}async function Cv(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=we();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){c.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function nO(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,h){const d=u.batch,m=d.keys();let _=B.resolve();return m.forEach((S=>{_=_.next((()=>h.getEntry(l,S))).next((C=>{const O=u.docVersions.get(S);Ne(O!==null,48541),C.version.compareTo(O)<0&&(d.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),h.addEntry(C)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=we();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Rv(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function rO(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((h,d)=>{const m=s.get(d);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(ht.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(d,_),(function(C,O,L){return C.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=ZN?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,_,h)&&c.push(n.Pi.updateTargetData(i,_))}));let l=Zn(),u=we();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),c.push(sO(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(he.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(h)}return B.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function sO(t,e,n){let r=we(),s=we();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Zn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):te(Rf,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function iO(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=mf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function oO(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function gh(t,e,n){const r=fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Si(o))throw o;te(Rf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function lg(t,e,n){const r=fe(t);let s=he.min(),i=we();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=fe(l),m=d.xs.get(h);return m!==void 0?B.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)})(r,o,In(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:we()))).next((c=>(aO(r,K0(e),c),{documents:c,Qs:i})))))}function aO(t,e,n){let r=t.Os.get(e)||he.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class ug{constructor(){this.activeTargetIds=J0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cO{constructor(){this.Mo=new ug,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ug,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="ConnectivityMonitor";class fg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(hg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(hg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va=null;function _h(){return Va===null?Va=(function(){return 268435456+Math.round(2147483648*Math.random())})():Va++,"0x"+Va.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="RestConnection",uO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Pc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=_h(),c=this.zo(e,n.toUriEncodedString());te(gu,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),h=$r(u);return this.Jo(e,c,l,r,h).then((d=>(te(gu,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw ai(gu,`RPC '${e}' ${o} failed with error: `,d,"url: ",c,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ii})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=uO[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class dO extends hO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=_h();return new Promise(((c,l)=>{const u=new NE;u.setWithCredentials(!0),u.listenOnce(OE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:const d=u.getResponseJson();te(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),c(d);break;case nc.TIMEOUT:te(pt,`RPC '${e}' ${o} timed out`),l(new ee(F.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const m=u.getStatus();if(te(pt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_?.error;if(S&&S.status&&S.message){const C=(function(L){const M=L.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(M)>=0?M:F.UNKNOWN})(S.status);l(new ee(C,S.message))}else l(new ee(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ee(F.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{te(pt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);te(pt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=_h(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VE(),c=kE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");te(pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let m=!1,_=!1;const S=new fO({Yo:O=>{_?te(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(m||(te(pt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),te(pt,`RPC '${e}' stream ${s} sending:`,O),d.send(O))},Zo:()=>d.close()}),C=(O,L,M)=>{O.listen(L,(j=>{try{M(j)}catch(U){setTimeout((()=>{throw U}),0)}}))};return C(d,io.EventType.OPEN,(()=>{_||(te(pt,`RPC '${e}' stream ${s} transport opened.`),S.o_())})),C(d,io.EventType.CLOSE,(()=>{_||(_=!0,te(pt,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(d))})),C(d,io.EventType.ERROR,(O=>{_||(_=!0,ai(pt,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),S.a_(new ee(F.UNAVAILABLE,"The operation could not be completed")))})),C(d,io.EventType.MESSAGE,(O=>{if(!_){const L=O.data[0];Ne(!!L,16349);const M=L,j=M?.error||M[0]?.error;if(j){te(pt,`RPC '${e}' stream ${s} received error:`,j);const U=j.status;let X=(function(y){const E=Qe[y];if(E!==void 0)return mv(E)})(U),Z=j.message;X===void 0&&(X=F.INTERNAL,Z="Unknown error status: "+U+" with message "+j.message),_=!0,S.a_(new ee(X,Z)),d.close()}else te(pt,`RPC '${e}' stream ${s} received:`,L),S.u_(L)}})),C(c,DE.STAT_EVENT,(O=>{O.stat===sh.PROXY?te(pt,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===sh.NOPROXY&&te(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _u(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){return new _N(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="PersistentStream";class Nv{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new ee(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return te(dg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(te(dg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pO extends Nv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=vN(this.serializer,e),r=(function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?bn(o.readTime):he.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=mh(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=lh(l)?{documents:AN(i,l)}:{query:IN(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=yv(i,o.resumeToken);const u=fh(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(he.min())>0){c.readTime=Lc(i,o.snapshotVersion.toTimestamp());const u=fh(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=SN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=mh(this.serializer),n.removeTarget=e,this.q_(n)}}class mO extends Nv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wN(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=mh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>TN(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{}class _O extends gO{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,dh(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(F.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,dh(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(F.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class EO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Ts(this)&&(te(gs,"Restarting streams for network reachability change."),await(async function(l){const u=fe(l);u.Ea.add(4),await ia(u),u.Ra.set("Unknown"),u.Ea.delete(4),await vl(u)})(this))}))})),this.Ra=new yO(r,s)}}async function vl(t){if(Ts(t))for(const e of t.da)await e(!0)}async function ia(t){for(const e of t.da)await e(!1)}function Ov(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Df(n)?Of(n):Ci(n).O_()&&Nf(n,e))}function Pf(t,e){const n=fe(t),r=Ci(n);n.Ia.delete(e),r.O_()&&Dv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ts(n)&&n.Ra.set("Unknown"))}function Nf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ci(t).Y_(e)}function Dv(t,e){t.Va.Ue(e),Ci(t).Z_(e)}function Of(t){t.Va=new dN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ci(t).start(),t.Ra.ua()}function Df(t){return Ts(t)&&!Ci(t).x_()&&t.Ia.size>0}function Ts(t){return fe(t).Ea.size===0}function kv(t){t.Va=void 0}async function vO(t){t.Ra.set("Online")}async function TO(t){t.Ia.forEach(((e,n)=>{Nf(t,e)}))}async function wO(t,e){kv(t),Df(t)?(t.Ra.ha(e),Of(t)):t.Ra.set("Unknown")}async function AO(t,e,n){if(t.Ra.set("Online"),e instanceof _v&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){te(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xc(t,r)}else if(e instanceof oc?t.Va.Ze(e):e instanceof gv?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const r=await Rv(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),Dv(i,l);const d=new vr(h.target,l,u,h.sequenceNumber);Nf(i,d)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){te(gs,"Failed to raise snapshot:",r),await xc(t,r)}}async function xc(t,e,n){if(!Si(e))throw e;t.Ea.add(1),await ia(t),t.Ra.set("Offline"),n||(n=()=>Rv(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{te(gs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await vl(t)}))}function Vv(t,e){return e().catch((n=>xc(t,n,e)))}async function Tl(t){const e=fe(t),n=Vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mf;for(;IO(e);)try{const s=await iO(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,bO(e,s)}catch(s){await xc(e,s)}Lv(e)&&Mv(e)}function IO(t){return Ts(t)&&t.Ta.length<10}function bO(t,e){t.Ta.push(e);const n=Vr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Lv(t){return Ts(t)&&!Vr(t).x_()&&t.Ta.length>0}function Mv(t){Vr(t).start()}async function SO(t){Vr(t).ra()}async function CO(t){const e=Vr(t);for(const n of t.Ta)e.ea(n.mutations)}async function RO(t,e,n){const r=t.Ta.shift(),s=wf.from(r,e,n);await Vv(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Tl(t)}async function PO(t,e){e&&Vr(t).X_&&await(async function(r,s){if((function(o){return uN(o)&&o!==F.ABORTED})(s.code)){const i=r.Ta.shift();Vr(r).B_(),await Vv(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Tl(r)}})(t,e),Lv(t)&&Mv(t)}async function pg(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),te(gs,"RemoteStore received new credentials");const r=Ts(n);n.Ea.add(3),await ia(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vl(n)}async function NO(t,e){const n=fe(t);e?(n.Ea.delete(2),await vl(n)):e||(n.Ea.add(2),await ia(n),n.Ra.set("Unknown"))}function Ci(t){return t.ma||(t.ma=(function(n,r,s){const i=fe(n);return i.sa(),new pO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:vO.bind(null,t),t_:TO.bind(null,t),r_:wO.bind(null,t),H_:AO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Df(t)?Of(t):t.Ra.set("Unknown")):(await t.ma.stop(),kv(t))}))),t.ma}function Vr(t){return t.fa||(t.fa=(function(n,r,s){const i=fe(n);return i.sa(),new mO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:SO.bind(null,t),r_:PO.bind(null,t),ta:CO.bind(null,t),na:RO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Tl(t)):(await t.fa.stop(),t.Ta.length>0&&(te(gs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new kf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vf(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Si(t))return new ee(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{static emptySet(e){return new ti(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=oo(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ti)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ti;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.ga=new Be(ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class fi{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new fi(e,n,ti.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class DO{constructor(){this.queries=gg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=gg(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new ee(F.ABORTED,"Firestore shutting down"))}}function gg(){return new vs((t=>nv(t)),pl)}async function xv(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new OO,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Vf(o,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Lf(n)}async function Fv(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kO(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Lf(n)}function VO(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Lf(t){t.Ca.forEach((e=>{e.next()}))}var yh,_g;(_g=yh||(yh={})).Ma="default",_g.Cache="cache";class Uv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.key=e}}class Bv{constructor(e){this.key=e}}class LO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=we(),this.mutatedKeys=we(),this.eu=rv(e),this.tu=new ti(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new mg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const m=s.get(h),_=ml(this.query,d)?d:null,S=!!m&&this.mutatedKeys.has(m.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let O=!1;m&&_?m.data.isEqual(_.data)?S!==C&&(r.track({type:3,doc:_}),O=!0):this.su(m,_)||(r.track({type:2,doc:_}),O=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),O=!0):m&&!_&&(r.track({type:1,doc:m}),O=!0,(l||u)&&(c=!0)),O&&(_?(o=o.add(_),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(_,S){const C=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:O})}};return C(_)-C(S)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new fi(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=we(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Bv(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new $v(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=we();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mf="SyncEngine";class MO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xO{constructor(e){this.key=e,this.hu=!1}}class FO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vs((c=>nv(c)),pl),this.Iu=new Map,this.Eu=new Set,this.du=new Be(ie.comparator),this.Au=new Map,this.Ru=new bf,this.Vu={},this.mu=new Map,this.fu=hi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UO(t,e,n=!0){const r=zv(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await jv(r,e,n,!0),s}async function $O(t,e){const n=zv(t);await jv(n,e,!0,!1)}async function jv(t,e,n,r){const s=await oO(t.localStore,In(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await BO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ov(t.remoteStore,s),c}async function BO(t,e,n,r,s){t.pu=(d,m,_)=>(async function(C,O,L,M){let j=O.view.ru(L);j.Cs&&(j=await lg(C.localStore,O.query,!1).then((({documents:w})=>O.view.ru(w,j))));const U=M&&M.targetChanges.get(O.targetId),X=M&&M.targetMismatches.get(O.targetId)!=null,Z=O.view.applyChanges(j,C.isPrimaryClient,U,X);return Eg(C,O.targetId,Z.au),Z.snapshot})(t,d,m,_);const i=await lg(t.localStore,e,!0),o=new LO(e,i.Qs),c=o.ru(i.documents),l=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);Eg(t,n,u.au);const h=new MO(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function jO(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!pl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gh(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pf(r.remoteStore,s.targetId),Eh(r,s.targetId)})).catch(bi)):(Eh(r,s.targetId),await gh(r.localStore,s.targetId,!0))}async function HO(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pf(n.remoteStore,r.targetId))}async function qO(t,e,n){const r=XO(t);try{const s=await(function(o,c){const l=fe(o),u=Ue.now(),h=c.reduce(((_,S)=>_.add(S.key)),we());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let S=Zn(),C=we();return l.Ns.getEntries(_,h).next((O=>{S=O,S.forEach(((L,M)=>{M.isValidDocument()||(C=C.add(L))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,S))).next((O=>{d=O;const L=[];for(const M of c){const j=iN(M,d.get(M.key).overlayedDocument);j!=null&&L.push(new qr(M.key,j,GE(j.value.mapValue),cn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,L,c)})).next((O=>{m=O;const L=O.applyToLocalDocumentSet(d,C);return l.documentOverlayCache.saveOverlays(_,O.batchId,L)}))})).then((()=>({batchId:m.batchId,changes:iv(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Be(Te)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await oa(r,s.changes),await Tl(r.remoteStore)}catch(s){const i=Vf(s,"Failed to persist write");n.reject(i)}}async function Hv(t,e){const n=fe(t);try{const r=await rO(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ne(o.hu,14607):s.removedDocuments.size>0&&(Ne(o.hu,42227),o.hu=!1))})),await oa(n,r,e)}catch(r){await bi(r)}}function yg(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=fe(o);l.onlineState=c;let u=!1;l.queries.forEach(((h,d)=>{for(const m of d.Sa)m.va(c)&&(u=!0)})),u&&Lf(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WO(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Be(ie.comparator);o=o.insert(i,_t.newNoDocument(i,he.min()));const c=we().add(i),l=new yl(he.min(),new Map,new Be(Te),o,c);await Hv(r,l),r.du=r.du.remove(i),r.Au.delete(e),xf(r)}else await gh(r.localStore,e,!1).then((()=>Eh(r,e,n))).catch(bi)}async function KO(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await nO(n.localStore,e);Wv(n,r,null),qv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oa(n,s)}catch(s){await bi(s)}}async function zO(t,e,n){const r=fe(t);try{const s=await(function(o,c){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,c).next((d=>(Ne(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Wv(r,e,n),qv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oa(r,s)}catch(s){await bi(s)}}function qv(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Wv(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Eh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Kv(t,r)}))}function Kv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Pf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xf(t))}function Eg(t,e,n){for(const r of n)r instanceof $v?(t.Ru.addReference(r.key,e),GO(t,r)):r instanceof Bv?(te(Mf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Kv(t,r.key)):ue(19791,{wu:r})}function GO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(te(Mf,"New document in limbo: "+n),t.Eu.add(r),xf(t))}function xf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ie(Le.fromString(e)),r=t.fu.next();t.Au.set(r,new xO(n)),t.du=t.du.insert(n,r),Ov(t.remoteStore,new vr(In(vf(n.path)),r,"TargetPurposeLimboResolution",hl.ce))}}async function oa(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Cf.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const h=fe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>B.forEach(u,(m=>B.forEach(m.Es,(_=>h.persistence.referenceDelegate.addReference(d,m.targetId,_))).next((()=>B.forEach(m.ds,(_=>h.persistence.referenceDelegate.removeReference(d,m.targetId,_)))))))))}catch(d){if(!Si(d))throw d;te(Rf,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const _=h.Ms.get(m),S=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,C)}}})(r.localStore,i))}async function YO(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){te(Mf,"User change. New user:",e.toKey());const r=await Cv(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new ee(F.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oa(n,r.Ls)}}function QO(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return we().add(r.key);{let s=we();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function zv(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WO.bind(null,e),e.Pu.H_=kO.bind(null,e.eventManager),e.Pu.yu=VO.bind(null,e.eventManager),e}function XO(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zO.bind(null,e),e}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=El(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tO(this.persistence,new JN,e.initialUser,this.serializer)}Cu(e){return new Sv(Sf.mi,this.serializer)}Du(e){return new cO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class JO extends Fc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ne(this.persistence.referenceDelegate instanceof Mc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new Sv((r=>Mc.mi(r,n)),this.serializer)}}class vh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YO.bind(null,this.syncEngine),await NO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DO})()}createDatastore(e){const n=El(e.databaseInfo.databaseId),r=(function(i){return new dO(i)})(e.databaseInfo);return(function(i,o,c,l){return new _O(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new EO(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>yg(this.syncEngine,n,0)),(function(){return fg.v()?new fg:new lO})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,h){const d=new FO(s,i,o,c,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=fe(n);te(gs,"RemoteStore shutting down."),r.Ea.add(5),await ia(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vh.provider={build:()=>new vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="FirestoreClient";class ZO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=pf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{te(Lr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(te(Lr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vf(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yu(t,e){t.asyncQueue.verifyOperationInProgress(),te(Lr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Cv(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function vg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eD(t);te(Lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>pg(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>pg(e.remoteStore,s))),t._onlineComponents=e}async function eD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(Lr,"Using user provided OfflineComponentProvider");try{await yu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),await yu(t,new Fc)}}else te(Lr,"Using default OfflineComponentProvider"),await yu(t,new JO(void 0));return t._offlineComponents}async function Yv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(Lr,"Using user provided OnlineComponentProvider"),await vg(t,t._uninitializedComponentsProvider._online)):(te(Lr,"Using default OnlineComponentProvider"),await vg(t,new vh))),t._onlineComponents}function tD(t){return Yv(t).then((e=>e.syncEngine))}async function Qv(t){const e=await Yv(t),n=e.eventManager;return n.onListen=UO.bind(null,e.syncEngine),n.onUnlisten=jO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$O.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HO.bind(null,e.syncEngine),n}function nD(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const h=new Gv({next:m=>{h.Nu(),o.enqueueAndForget((()=>Fv(i,d)));const _=m.docs.has(c);!_&&m.fromCache?u.reject(new ee(F.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new ee(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Uv(vf(c.path),h,{includeMetadataChanges:!0,qa:!0});return xv(i,d)})(await Qv(t),t.asyncQueue,e,n,r))),r.promise}function rD(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const h=new Gv({next:m=>{h.Nu(),o.enqueueAndForget((()=>Fv(i,d))),m.fromCache&&l.source==="server"?u.reject(new ee(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Uv(c,h,{includeMetadataChanges:!0,qa:!0});return xv(i,d)})(await Qv(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="firestore.googleapis.com",wg=!0;class Ag{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jv,this.ssl=wg}else this.host=e.host,this.ssl=e.ssl??wg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LN)throw new ee(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xv(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ag({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ag(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new l0;switch(r.type){case"firstParty":return new d0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Tg.get(n);r&&(te("ComponentProvider","Removing Datastore"),Tg.delete(n),r.terminate())})(this),Promise.resolve()}}function sD(t,e,n,r={}){t=Dn(t,wl);const s=$r(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Zh(`https://${c}`),ef("Firestore",!0)),i.host!==Jv&&i.host!==c&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!hs(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=mt.MOCK_USER;else{u=TS(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mt(d)}t._authCredentials=new u0(new ME(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ze(this.firestore,e,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ta(n,ze._jsonSchema))return new ze(e,r||null,new ie(Le.fromString(n.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Je("string",ze._jsonSchemaVersion),referencePath:Je("string")};class br extends Ri{constructor(e,n,r){super(e,n,vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new ie(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function Cx(t,e,...n){if(t=Ye(t),xE("collection","path",e),t instanceof wl){const r=Le.fromString(e,...n);return Mm(r),new br(t,null,r)}{if(!(t instanceof ze||t instanceof br))throw new ee(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Mm(r),new br(t.firestore,null,r)}}function rs(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=pf.newId()),xE("doc","path",e),t instanceof wl){const r=Le.fromString(e,...n);return Lm(r),new ze(t,null,new ie(r))}{if(!(t instanceof ze||t instanceof br))throw new ee(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Lm(r),new ze(t.firestore,t instanceof br?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="AsyncQueue";class bg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pv(this,"async_queue_retry"),this._c=()=>{const r=_u();r&&te(Ig,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_u();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_u();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Si(e))throw e;te(Ig,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",Sg(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=kf.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:Sg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Sg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Pi extends wl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new bg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bg(e),this._firestoreClient=void 0,await e}}}function iD(t,e){const n=typeof t=="object"?t:rf(),r=typeof t=="string"?t:Pc,s=ol(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=By("firestore");i&&sD(s,...i)}return s}function Ff(t){if(t._terminated)throw new ee(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oD(t),t._firestoreClient}function oD(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new N0(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Xv(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gt(ht.fromBase64String(e))}catch(n){throw new ee(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gt(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,Gt._jsonSchema))return Gt.fromBase64String(e.bytes)}}Gt._jsonSchemaVersion="firestore/bytes/1.0",Gt._jsonSchema={type:Je("string",Gt._jsonSchemaVersion),bytes:Je("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(ta(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:Je("string",Sn._jsonSchemaVersion),latitude:Je("number"),longitude:Je("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,Cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Cn(e.vectorValues);throw new ee(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cn._jsonSchemaVersion="firestore/vectorValue/1.0",Cn._jsonSchema={type:Je("string",Cn._jsonSchemaVersion),vectorValues:Je("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^__.*__$/;class cD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ra(e,this.data,n,this.fieldTransforms)}}class Zv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class $f{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $f({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Uc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eT(this.Ac)&&aD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||El(e)}Cc(e,n,r,s=!1){return new $f({Ac:e,methodName:n,Dc:r,path:ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Il(t){const e=t._freezeSettings(),n=El(t._databaseId);return new lD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tT(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Bf("Data must be an object, but it was:",o,r);const c=nT(r,o);let l,u;if(i.merge)l=new jt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Th(e,d,n);if(!o.contains(m))throw new ee(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sT(h,m)||h.push(m)}l=new jt(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new cD(new Dt(c),l,u)}class bl extends Uf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bl}}function uD(t,e,n,r){const s=t.Cc(1,e,n);Bf("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Hr(r,((l,u)=>{const h=jf(e,l,n);u=Ye(u);const d=s.yc(h);if(u instanceof bl)i.push(h);else{const m=aa(u,d);m!=null&&(i.push(h),o.set(h,m))}}));const c=new jt(i);return new Zv(o,c,s.fieldTransforms)}function hD(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[Th(e,r,n)],l=[s];if(i.length%2!=0)throw new ee(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(Th(e,i[m])),l.push(i[m+1]);const u=[],h=Dt.empty();for(let m=c.length-1;m>=0;--m)if(!sT(u,c[m])){const _=c[m];let S=l[m];S=Ye(S);const C=o.yc(_);if(S instanceof bl)u.push(_);else{const O=aa(S,C);O!=null&&(u.push(_),h.set(_,O))}}const d=new jt(u);return new Zv(h,d,o.fieldTransforms)}function fD(t,e,n,r=!1){return aa(n,t.Cc(r?4:3,e))}function aa(t,e){if(rT(t=Ye(t)))return Bf("Unsupported field value:",e,t),nT(t,e);if(t instanceof Uf)return(function(r,s){if(!eT(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=aa(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ue.fromDate(r);return{timestampValue:Lc(s.serializer,i)}}if(r instanceof Ue){const i=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,i)}}if(r instanceof Sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gt)return{bytesValue:yv(s.serializer,r._byteString)};if(r instanceof ze){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:If(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cn)return(function(o,c){return{mapValue:{fields:{[KE]:{stringValue:zE},[Nc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return Tf(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${ul(r)}`)})(t,e)}function nT(t,e){const n={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,((r,s)=>{const i=aa(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function rT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Sn||t instanceof Gt||t instanceof ze||t instanceof Uf||t instanceof Cn)}function Bf(t,e,n){if(!rT(n)||!FE(n)){const r=ul(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Th(t,e,n){if((e=Ye(e))instanceof Al)return e._internalPath;if(typeof e=="string")return jf(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const dD=new RegExp("[~\\*/\\[\\]]");function jf(t,e,n){if(e.search(dD)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Al(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee(F.INVALID_ARGUMENT,c+t+l)}function sT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pD extends iT{data(){return super.data()}}function Hf(t,e){return typeof e=="string"?jf(t,e):e instanceof Al?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qf{}class gD extends qf{}function Rx(t,e,...n){let r=[];e instanceof qf&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Wf)).length,c=i.filter((l=>l instanceof Sl)).length;if(o>1||o>0&&c>0)throw new ee(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Sl extends gD{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sl(e,n,r)}_apply(e){const n=this._parse(e);return oT(e._query,n),new Ri(e.firestore,e.converter,uh(e._query,n))}_parse(e){const n=Il(e.firestore);return(function(i,o,c,l,u,h,d){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Rg(d,h);const S=[];for(const C of d)S.push(Cg(l,i,C));m={arrayValue:{values:S}}}else m=Cg(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Rg(d,h),m=fD(c,o,d,h==="in"||h==="not-in");return Xe.create(u,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Px(t,e,n){const r=e,s=Hf("where",t);return Sl._create(s,r,n)}class Wf extends qf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wf(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)oT(o,l),o=uh(o,l)})(e._query,n),new Ri(e.firestore,e.converter,uh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Cg(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new ee(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tv(e)&&n.indexOf("/")!==-1)throw new ee(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!ie.isDocumentKey(r))throw new ee(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qm(t,new ie(r))}if(n instanceof ze)return qm(t,n._key);throw new ee(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ul(n)}.`)}function Rg(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oT(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ee(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _D{convertValue(e,n="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Nc].arrayValue?.values?.map((r=>Ke(r.doubleValue)));return new Cn(n)}convertGeoPoint(e){return new Sn(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($o(e));default:return null}}convertTimestamp(e){const n=Or(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Ne(Iv(r),9688,{name:e});const s=new Bo(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cs extends iT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=cs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",cs._jsonSchema={type:Je("string",cs._jsonSchemaVersion),bundleSource:Je("string","DocumentSnapshot"),bundleName:Je("string"),bundle:Je("string")};class ac extends cs{data(e={}){return super.data(e)}}class ni{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new co(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ac(this._firestore,this._userDataWriter,r.key,r,new co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new ac(s._firestore,s._userDataWriter,c.doc.key,c.doc,new co(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new ac(s._firestore,s._userDataWriter,c.doc.key,c.doc,new co(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:yD(c.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ni._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){t=Dn(t,ze);const e=Dn(t.firestore,Pi);return nD(Ff(e),t._key).then((n=>ED(e,t,n)))}ni._jsonSchemaVersion="firestore/querySnapshot/1.0",ni._jsonSchema={type:Je("string",ni._jsonSchemaVersion),bundleSource:Je("string","QuerySnapshot"),bundleName:Je("string"),bundle:Je("string")};class cT extends _D{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function Nx(t){t=Dn(t,Ri);const e=Dn(t.firestore,Pi),n=Ff(e),r=new cT(e);return mD(t._query),rD(n,t._query).then((s=>new ni(e,r,t,s)))}function Pg(t,e,n){t=Dn(t,ze);const r=Dn(t.firestore,Pi),s=aT(t.converter,e);return Kf(r,[tT(Il(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cn.none())])}function Ns(t,e,n,...r){t=Dn(t,ze);const s=Dn(t.firestore,Pi),i=Il(s);let o;return o=typeof(e=Ye(e))=="string"||e instanceof Al?hD(i,"updateDoc",t._key,e,n,r):uD(i,"updateDoc",t._key,e),Kf(s,[o.toMutation(t._key,cn.exists(!0))])}function Ox(t,e){const n=Dn(t.firestore,Pi),r=rs(t),s=aT(t.converter,e);return Kf(n,[tT(Il(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cn.exists(!1))]).then((()=>r))}function Kf(t,e){return(function(r,s){const i=new Wn;return r.asyncQueue.enqueueAndForget((async()=>qO(await tD(r),s,i))),i.promise})(Ff(t),e)}function ED(t,e,n){const r=n.docs.get(e._key),s=new cT(t);return new cs(t,s,e._key,r,new co(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ii=s})(wi),fs(new Pr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Pi(new h0(r.getProvider("auth-internal")),new p0(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Tn(Om,Dm,e),Tn(Om,Dm,"esm2020")})();var vD="firebase",TD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(vD,TD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="type.googleapis.com/google.protobuf.Int64Value",AD="type.googleapis.com/google.protobuf.UInt64Value";function lT(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function $c(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>$c(e));if(typeof t=="function"||typeof t=="object")return lT(t,e=>$c(e));throw new Error("Data cannot be encoded in JSON: "+t)}function di(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case wD:case AD:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>di(e)):typeof t=="function"||typeof t=="object"?lT(t,e=>di(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends Ln{constructor(e,n,r){super(`${zf}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Vt.prototype)}}function ID(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Bc(t,e){let n=ID(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Ng[o])return new Vt("internal","internal");n=Ng[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=di(s))}}catch{}return n==="ok"?null:new Vt(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ut(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="us-central1",SD=/^data: (.*?)(?:\n|$)/;function CD(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Vt("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class RD{constructor(e,n,r,s,i=wh,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new bD(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=wh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function PD(t,e,n){const r=$r(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Zh(t.emulatorOrigin+"/backends"),ef("Functions",!0))}function ND(t,e,n){const r=s=>DD(t,e,s,{});return r.stream=(s,i)=>VD(t,e,s,i),r}function uT(t){return t.emulatorOrigin&&$r(t.emulatorOrigin)?"include":void 0}async function OD(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:uT(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function hT(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function DD(t,e,n,r){const s=t._url(e);return kD(t,s,n,r)}async function kD(t,e,n,r){n=$c(n);const s={data:n},i=await hT(t,r),o=r.timeout||7e4,c=CD(o),l=await Promise.race([OD(e,s,i,t.fetchImpl,t),c.promise,t.cancelAllRequests]);if(c.cancel(),!l)throw new Vt("cancelled","Firebase Functions instance was deleted.");const u=Bc(l.status,l.json);if(u)throw u;if(!l.json)throw new Vt("internal","Response is not valid JSON object.");let h=l.json.data;if(typeof h>"u"&&(h=l.json.result),typeof h>"u")throw new Vt("internal","Response is missing data field.");return{data:di(h)}}function VD(t,e,n,r){const s=t._url(e);return LD(t,s,n,r||{})}async function LD(t,e,n,r){n=$c(n);const s={data:n},i=await hT(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r?.signal,credentials:uT(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const S=new Vt("cancelled","Request was cancelled.");return{data:Promise.reject(S),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(S)}}}}}}const _=Bc(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let c,l;const u=new Promise((m,_)=>{c=m,l=_});r?.signal?.addEventListener("abort",()=>{const m=new Vt("cancelled","Request was cancelled.");l(m)});const h=o.body.getReader(),d=MD(h,c,l,r?.signal);return{stream:{[Symbol.asyncIterator](){const m=d.getReader();return{async next(){const{value:_,done:S}=await m.read();return{value:_,done:S}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function MD(t,e,n,r){const s=(o,c)=>{const l=o.match(SD);if(!l)return;const u=l[1];try{const h=JSON.parse(u);if("result"in h){e(di(h.result));return}if("message"in h){c.enqueue(di(h.message));return}if("error"in h){const d=Bc(0,h);c.error(d),n(d);return}}catch(h){if(h instanceof Vt){c.error(h),n(h);return}}},i=new TextDecoder;return new ReadableStream({start(o){let c="";return l();async function l(){if(r?.aborted){const u=new Vt("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:h}=await t.read();if(h){c.trim()&&s(c.trim(),o),o.close();return}if(r?.aborted){const m=new Vt("cancelled","Request was cancelled");o.error(m),n(m),await t.cancel();return}c+=i.decode(u,{stream:!0});const d=c.split(`
`);c=d.pop()||"";for(const m of d)m.trim()&&s(m.trim(),o);return l()}catch(u){const h=u instanceof Vt?u:Bc(0,null);o.error(h),n(h)}}},cancel(){return t.cancel()}})}const Og="@firebase/functions",Dg="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="auth-internal",FD="app-check-internal",UD="messaging-internal";function $D(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(xD),o=n.getProvider(UD),c=n.getProvider(FD);return new RD(s,i,o,c,r)};fs(new Pr(zf,e,"PUBLIC").setMultipleInstances(!0)),Tn(Og,Dg,t),Tn(Og,Dg,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t=rf(),e=wh){const r=ol(Ye(t),zf).getImmediate({identifier:e}),s=By("functions");return s&&jD(r,...s),r}function jD(t,e,n){PD(Ye(t),e,n)}function Dx(t,e,n){return ND(Ye(t),e)}$D();console.log("Firebase Environment Variables:");console.log("API Key:","Loaded");console.log("Auth Domain:","assingment1-community-sport.firebaseapp.com");console.log("Project ID:","assingment1-community-sport");const HD={apiKey:"AIzaSyDCz8UYFPq8z2DfHi2mJ26y1QrBCgFTbSU",authDomain:"assingment1-community-sport.firebaseapp.com",projectId:"assingment1-community-sport",storageBucket:"assingment1-community-sport.firebasestorage.app",messagingSenderId:"716321854345",appId:"1:716321854345:web:da05e36411e3605593c758"},Gf=Ky(HD),La=a0(Gf),Os=iD(Gf),kx=BD(Gf);class qD{constructor(){this.currentUser=null,this.currentRole=null,this.authStateListeners=[],YR(La,async e=>{if(this.currentUser=e,e)try{const n=await Ps(rs(Os,"user-information",e.uid));if(n.exists()){const r=n.data();this.currentRole=r.lastLoginRole||r.roles&&r.roles[0]||r.role||null}else this.currentRole=null}catch(n){console.error("Error getting user role from Firestore:",n),this.currentRole=null}else this.currentRole=null;this.authStateListeners.forEach(n=>{n(this.currentUser,this.currentRole)})})}async register(e,n,r,s){try{const o=(await WR(La,n,r)).user,c=rs(Os,"user-information",o.uid),l=await Ps(c);let u=[];if(l.exists()){const h=l.data();u=h.roles||(h.role?[h.role]:[]),u.includes(s)?await Ns(c,{userName:e,lastLoginRole:s,lastUpdated:new Date().toISOString()}):(u.push(s),await Ns(c,{userName:e,roles:u,lastLoginRole:s,lastUpdated:new Date().toISOString()}))}else{u=[s];const h={uid:o.uid,userName:e,email:n,roles:u,role:s,lastLoginRole:s,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};await Pg(c,h),console.log("User document created successfully:",h)}return this.currentRole=s,{user:o,role:s,availableRoles:u}}catch(i){throw console.error("Registration error:",i),new Error(this.getErrorMessage(i))}}async login(e,n,r){try{const i=(await KR(La,e,n)).user,o=rs(Os,"user-information",i.uid),c=await Ps(o);if(!c.exists()){console.warn("User exists in Auth but not in Firestore. Creating user document...");try{const h={uid:i.uid,userName:i.email.split("@")[0],email:i.email,roles:[r],role:r,lastLoginRole:r,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),recoveredFromAuth:!0};return await Pg(o,h),console.log(" User document created during login recovery"),this.currentRole=r,{user:i,role:r,availableRoles:[r]}}catch(h){throw console.error(" Failed to create user document during login:",h),new Error("Unable to create user profile. Please check Firestore permissions or try registering again.")}}const l=c.data();let u=[];if(l.roles&&Array.isArray(l.roles)?u=l.roles:l.role&&(u=[l.role],await Ns(o,{roles:u,lastUpdated:new Date().toISOString()})),!this.hasRole(u,r)){const h=u.join(", ");throw new Error(`This account does not have ${r} access. Available roles: ${h}. Please use the correct login portal or register for this role.`)}return await Ns(o,{lastLoginRole:r,lastLoginAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}),this.currentRole=r,{user:i,role:r,availableRoles:u}}catch(s){throw new Error(this.getErrorMessage(s))}}hasRole(e,n){return typeof e=="string"?e===n:Array.isArray(e)?e.includes(n):!1}async logout(){try{await QR(La),this.currentUser=null,this.currentRole=null}catch(e){throw new Error(this.getErrorMessage(e))}}async getCurrentUser(){let e=[],n=null;if(this.currentUser)try{const r=await Ps(rs(Os,"user-information",this.currentUser.uid));if(r.exists()){const s=r.data();e=s.roles||(s.role?[s.role]:[]),n=s.userName||null}}catch(r){console.error("Error getting user roles from Firestore:",r),e=[]}return{user:this.currentUser,role:this.currentRole,availableRoles:e,userName:n}}getCurrentUserSync(){return{user:this.currentUser,role:this.currentRole,availableRoles:[]}}isAuthenticated(){return this.currentUser!==null}hasCurrentRole(e){return this.currentRole===e}async switchRole(e){if(this.currentUser)try{const n=rs(Os,"user-information",this.currentUser.uid),r=await Ps(n);if(r.exists()){const s=r.data();if((s.roles||(s.role?[s.role]:[])).includes(e))return this.currentRole=e,await Ns(n,{lastLoginRole:e,lastRoleSwitchAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}),this.authStateListeners.forEach(o=>{o(this.currentUser,this.currentRole)}),!0}}catch(n){console.error("Error switching role:",n)}return!1}async addRoleToUser(e){if(this.currentUser)try{const n=rs(Os,"user-information",this.currentUser.uid),r=await Ps(n);if(r.exists()){const s=r.data();let i=s.roles||(s.role?[s.role]:[]);if(!i.includes(e))return i.push(e),await Ns(n,{roles:i,lastUpdated:new Date().toISOString()}),!0}}catch(n){console.error("Error adding role to user:",n)}return!1}onAuthStateChange(e){return this.authStateListeners.push(e),()=>{this.authStateListeners=this.authStateListeners.filter(n=>n!==e)}}getErrorMessage(e){switch(e.code){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"permission-denied":return"Permission denied. Please check your Firestore security rules or contact support.";case"unavailable":return"Service temporarily unavailable. Please try again later.";case"failed-precondition":return"Database operation failed. Please try again.";default:return console.error("Full error details:",e),e.message||"An error occurred. Please try again."}}}const So=new qD,WD={class:"navbar navbar-expand-lg bg-body-tertiary border-bottom"},KD={class:"container"},zD={class:"collapse navbar-collapse",id:"mainNav"},GD={class:"navbar-nav ms-auto mb-2 mb-lg-0"},YD={class:"nav-item"},QD={class:"nav-item"},XD={class:"nav-item"},JD={key:0,class:"nav-item"},ZD={key:1,class:"nav-item"},e1={key:2,class:"nav-item dropdown"},t1={class:"nav-link dropdown-toggle d-flex align-items-center",href:"#",id:"accountDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},n1={key:0,class:"badge bg-secondary ms-2 text-capitalize"},r1={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"accountDropdown"},s1={id:"main-content"},i1={class:"mt-auto border-top"},o1={class:"container py-4"},a1={class:"row gy-2 align-items-center"},c1={class:"col-12 col-md"},l1={class:"text-muted"},u1={class:"col-12 col-md-auto"},h1={"aria-label":"Footer"},f1={class:"list-inline m-0"},d1={class:"list-inline-item"},p1={class:"list-inline-item"},m1={__name:"App",setup(t){const e=hS(),n=uS(),r=Wa(null),s=Wa(null),i=Wa(null),o=Ft(()=>!!r.value),c=Ft(()=>s.value==="organizer"?"organizer-account":"member-account");function l(h){return e.name===h?"active":""}async function u(){try{await So.logout(),n.push({name:"home"})}catch(h){console.error("Logout error:",h)}}return ey(()=>{const h=So.getCurrentUser();r.value=h.user,s.value=h.role,i.value=So.onAuthStateChange((d,m)=>{r.value=d,s.value=m})}),Kh(()=>{i.value&&i.value()}),(h,d)=>{const m=lp("RouterLink"),_=lp("RouterView");return Ls(),Qi(yn,null,[d[15]||(d[15]=ye("a",{href:"#main-content",class:"visually-hidden-focusable position-absolute top-0 start-0 m-2 btn btn-outline-primary btn-sm"}," Skip to content ",-1)),ye("nav",WD,[ye("div",KD,[Fe(m,{class:"navbar-brand d-flex align-items-center gap-2",to:{name:"home"}},{default:rn(()=>[...d[0]||(d[0]=[ye("span",{class:"rounded-circle bg-primary d-inline-block",style:{width:"10px",height:"10px"}},null,-1),ye("span",{class:"fw-semibold"},"Community Sport",-1)])]),_:1}),d[12]||(d[12]=ye("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#mainNav","aria-controls":"mainNav","aria-expanded":"false","aria-label":"Toggle navigation"},[ye("span",{class:"navbar-toggler-icon"})],-1)),ye("div",zD,[ye("ul",GD,[ye("li",YD,[Fe(m,{to:{name:"home"},class:mr(["nav-link",l("home")])},{default:rn(()=>[...d[1]||(d[1]=[zt(" Home ",-1)])]),_:1},8,["class"])]),ye("li",QD,[Fe(m,{to:{name:"find"},class:mr(["nav-link",l("find")])},{default:rn(()=>[...d[2]||(d[2]=[zt(" Find Sports ",-1)])]),_:1},8,["class"])]),ye("li",XD,[Fe(m,{to:{name:"support"},class:mr(["nav-link",l("support")])},{default:rn(()=>[...d[3]||(d[3]=[zt(" Support ",-1)])]),_:1},8,["class"])]),o.value?Ca("",!0):(Ls(),Qi("li",JD,[Fe(m,{to:{name:"login"},class:mr(["nav-link",l("login")])},{default:rn(()=>[...d[4]||(d[4]=[ye("i",{class:"bi bi-box-arrow-in-right me-1","aria-hidden":"true"},null,-1),zt(" Login ",-1)])]),_:1},8,["class"])])),o.value?Ca("",!0):(Ls(),Qi("li",ZD,[Fe(m,{to:{name:"register"},class:mr(["nav-link",l("register")])},{default:rn(()=>[...d[5]||(d[5]=[ye("i",{class:"bi bi-person-plus me-1","aria-hidden":"true"},null,-1),zt(" Register ",-1)])]),_:1},8,["class"])])),o.value?(Ls(),Qi("li",e1,[ye("a",t1,[d[6]||(d[6]=ye("i",{class:"bi bi-person-circle me-1","aria-hidden":"true"},null,-1)),d[7]||(d[7]=zt(" Account ",-1)),s.value?(Ls(),Qi("span",n1,qa(s.value),1)):Ca("",!0)]),ye("ul",r1,[ye("li",null,[Fe(m,{to:{name:c.value},class:"dropdown-item"},{default:rn(()=>[d[8]||(d[8]=ye("i",{class:"bi bi-person-gear me-2","aria-hidden":"true"},null,-1)),zt(" My "+qa(s.value)+" Account ",1)]),_:1},8,["to"])]),ye("li",null,[Fe(m,{to:{name:"notifications"},class:"dropdown-item"},{default:rn(()=>[...d[9]||(d[9]=[ye("i",{class:"bi bi-bell me-2","aria-hidden":"true"},null,-1),zt(" Notifications ",-1)])]),_:1})]),d[11]||(d[11]=ye("li",null,[ye("hr",{class:"dropdown-divider"})],-1)),ye("li",null,[ye("button",{onClick:u,class:"dropdown-item"},[...d[10]||(d[10]=[ye("i",{class:"bi bi-box-arrow-right me-2","aria-hidden":"true"},null,-1),zt(" Logout ",-1)])])])])])):Ca("",!0)])])])]),ye("main",s1,[Fe(_)]),ye("footer",i1,[ye("div",o1,[ye("div",a1,[ye("div",c1,[ye("small",l1,"  "+qa(new Date().getFullYear())+" Community Sport NFP  Melbourne ",1)]),ye("div",u1,[ye("nav",h1,[ye("ul",f1,[ye("li",d1,[Fe(m,{class:"link-secondary",to:{name:"find"}},{default:rn(()=>[...d[13]||(d[13]=[zt("Browse Programs",-1)])]),_:1})]),ye("li",p1,[Fe(m,{class:"link-secondary",to:{name:"support"}},{default:rn(()=>[...d[14]||(d[14]=[zt("Contact",-1)])]),_:1})])])])])])])])],64)}}},g1="modulepreload",_1=function(t){return"/"+t},kg={},Kt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=_1(u),u in kg)return;kg[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":g1,h||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((_,S)=>{m.addEventListener("load",_),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},y1=[{path:"/",name:"home",component:()=>Kt(()=>import("./HomePage-BQ7TB1wk.js"),__vite__mapDeps([0,1,2]))},{path:"/find",name:"find",component:()=>Kt(()=>import("./FindSportsPage-BLppDuf9.js"),__vite__mapDeps([3,1,2,4,5]))},{path:"/program/:id",name:"program",props:!0,component:()=>Kt(()=>import("./ProgramDetailsPage-D133ivVW.js"),__vite__mapDeps([6,2,7,8,4,9]))},{path:"/support",name:"support",component:()=>Kt(()=>import("./SupportPage-Dth3CZx2.js"),__vite__mapDeps([10,4,2,11]))},{path:"/login",name:"login",component:()=>Kt(()=>import("./LoginPage-0Nr9KN8D.js"),__vite__mapDeps([12,4,13]))},{path:"/register",name:"register",component:()=>Kt(()=>import("./RegisterPage-DTW4usU7.js"),__vite__mapDeps([14,4,15]))},{path:"/account/member",name:"member-account",component:()=>Kt(()=>import("./MemberAccountPage-m7AlVd8b.js"),__vite__mapDeps([16,17,2,18,4,19,20])),meta:{requiresAuth:!0,requiresRole:"member"}},{path:"/account/organizer",name:"organizer-account",component:()=>Kt(()=>import("./OrganizerAccountPage-BTBf6fEs.js"),__vite__mapDeps([21,2,18,4,19,22])),meta:{requiresAuth:!0,requiresRole:"organizer"}},{path:"/member-appointment/:programId?",name:"member-appointment",component:()=>Kt(()=>import("./MemberAppointmentPage-CdlGExU7.js"),__vite__mapDeps([23,17,2,4,24])),props:!0,meta:{requiresAuth:!0,requiresRole:"member"}},{path:"/launch-program",name:"launch-program",component:()=>Kt(()=>import("./LaunchProgramPage-p2_0xE_d.js"),__vite__mapDeps([25,2,7,8,4,26])),meta:{requiresAuth:!0,requiresRole:"organizer"}},{path:"/edit-program/:id",name:"edit-program",component:()=>Kt(()=>import("./EditProgramPage-CPp65JS1.js"),__vite__mapDeps([27,2,7,8,4,28])),props:!0,meta:{requiresAuth:!0,requiresRole:"organizer"}},{path:"/notifications",name:"notifications",component:()=>Kt(()=>import("./NotificationPage-CgDsHN8y.js"),__vite__mapDeps([29,2,4,30])),meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/"}],fT=cS({history:xb(),routes:y1});fT.beforeEach(async(t,e,n)=>{const r=t.matched.some(o=>o.meta.requiresAuth),s=t.meta.requiresRole,i=So.getCurrentUserSync();if(r&&!i.user){n({name:"login"});return}if(s&&i.role!==s)if(!i.role&&i.user)try{if((await So.getCurrentUser()).role!==s){n({name:"home"});return}}catch(o){console.error("Route guard error:",o),n({name:"home"});return}else{n({name:"home"});return}n()});var Ct="top",Ht="bottom",qt="right",Rt="left",Cl="auto",Ni=[Ct,Ht,qt,Rt],_s="start",pi="end",dT="clippingParents",Yf="viewport",Bs="popper",pT="reference",Ah=Ni.reduce(function(t,e){return t.concat([e+"-"+_s,e+"-"+pi])},[]),Qf=[].concat(Ni,[Cl]).reduce(function(t,e){return t.concat([e,e+"-"+_s,e+"-"+pi])},[]),mT="beforeRead",gT="read",_T="afterRead",yT="beforeMain",ET="main",vT="afterMain",TT="beforeWrite",wT="write",AT="afterWrite",IT=[mT,gT,_T,yT,ET,vT,TT,wT,AT];function Vn(t){return t?(t.nodeName||"").toLowerCase():null}function Wt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ys(t){var e=Wt(t).Element;return t instanceof e||t instanceof Element}function Xt(t){var e=Wt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Xf(t){if(typeof ShadowRoot>"u")return!1;var e=Wt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function E1(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Xt(i)||!Vn(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var c=s[o];c===!1?i.removeAttribute(o):i.setAttribute(o,c===!0?"":c)}))})}function v1(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),c=o.reduce(function(l,u){return l[u]="",l},{});!Xt(s)||!Vn(s)||(Object.assign(s.style,c),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const Jf={name:"applyStyles",enabled:!0,phase:"write",fn:E1,effect:v1,requires:["computeStyles"]};function Rn(t){return t.split("-")[0]}var ls=Math.max,jc=Math.min,mi=Math.round;function Ih(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function bT(){return!/^((?!chrome|android).)*safari/i.test(Ih())}function gi(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Xt(t)&&(s=t.offsetWidth>0&&mi(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&mi(r.height)/t.offsetHeight||1);var o=ys(t)?Wt(t):window,c=o.visualViewport,l=!bT()&&n,u=(r.left+(l&&c?c.offsetLeft:0))/s,h=(r.top+(l&&c?c.offsetTop:0))/i,d=r.width/s,m=r.height/i;return{width:d,height:m,top:h,right:u+d,bottom:h+m,left:u,x:u,y:h}}function Zf(t){var e=gi(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ST(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Xf(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function er(t){return Wt(t).getComputedStyle(t)}function T1(t){return["table","td","th"].indexOf(Vn(t))>=0}function Wr(t){return((ys(t)?t.ownerDocument:t.document)||window.document).documentElement}function Rl(t){return Vn(t)==="html"?t:t.assignedSlot||t.parentNode||(Xf(t)?t.host:null)||Wr(t)}function Vg(t){return!Xt(t)||er(t).position==="fixed"?null:t.offsetParent}function w1(t){var e=/firefox/i.test(Ih()),n=/Trident/i.test(Ih());if(n&&Xt(t)){var r=er(t);if(r.position==="fixed")return null}var s=Rl(t);for(Xf(s)&&(s=s.host);Xt(s)&&["html","body"].indexOf(Vn(s))<0;){var i=er(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function ca(t){for(var e=Wt(t),n=Vg(t);n&&T1(n)&&er(n).position==="static";)n=Vg(n);return n&&(Vn(n)==="html"||Vn(n)==="body"&&er(n).position==="static")?e:n||w1(t)||e}function ed(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Co(t,e,n){return ls(t,jc(e,n))}function A1(t,e,n){var r=Co(t,e,n);return r>n?n:r}function CT(){return{top:0,right:0,bottom:0,left:0}}function RT(t){return Object.assign({},CT(),t)}function PT(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var I1=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,RT(typeof e!="number"?e:PT(e,Ni))};function b1(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,c=Rn(n.placement),l=ed(c),u=[Rt,qt].indexOf(c)>=0,h=u?"height":"width";if(!(!i||!o)){var d=I1(s.padding,n),m=Zf(i),_=l==="y"?Ct:Rt,S=l==="y"?Ht:qt,C=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],O=o[l]-n.rects.reference[l],L=ca(i),M=L?l==="y"?L.clientHeight||0:L.clientWidth||0:0,j=C/2-O/2,U=d[_],X=M-m[h]-d[S],Z=M/2-m[h]/2+j,w=Co(U,Z,X),y=l;n.modifiersData[r]=(e={},e[y]=w,e.centerOffset=w-Z,e)}}function S1(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||ST(e.elements.popper,s)&&(e.elements.arrow=s))}const NT={name:"arrow",enabled:!0,phase:"main",fn:b1,effect:S1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _i(t){return t.split("-")[1]}var C1={top:"auto",right:"auto",bottom:"auto",left:"auto"};function R1(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:mi(n*s)/s||0,y:mi(r*s)/s||0}}function Lg(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,c=t.position,l=t.gpuAcceleration,u=t.adaptive,h=t.roundOffsets,d=t.isFixed,m=o.x,_=m===void 0?0:m,S=o.y,C=S===void 0?0:S,O=typeof h=="function"?h({x:_,y:C}):{x:_,y:C};_=O.x,C=O.y;var L=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),j=Rt,U=Ct,X=window;if(u){var Z=ca(n),w="clientHeight",y="clientWidth";if(Z===Wt(n)&&(Z=Wr(n),er(Z).position!=="static"&&c==="absolute"&&(w="scrollHeight",y="scrollWidth")),Z=Z,s===Ct||(s===Rt||s===qt)&&i===pi){U=Ht;var E=d&&Z===X&&X.visualViewport?X.visualViewport.height:Z[w];C-=E-r.height,C*=l?1:-1}if(s===Rt||(s===Ct||s===Ht)&&i===pi){j=qt;var b=d&&Z===X&&X.visualViewport?X.visualViewport.width:Z[y];_-=b-r.width,_*=l?1:-1}}var I=Object.assign({position:c},u&&C1),R=h===!0?R1({x:_,y:C},Wt(n)):{x:_,y:C};if(_=R.x,C=R.y,l){var v;return Object.assign({},I,(v={},v[U]=M?"0":"",v[j]=L?"0":"",v.transform=(X.devicePixelRatio||1)<=1?"translate("+_+"px, "+C+"px)":"translate3d("+_+"px, "+C+"px, 0)",v))}return Object.assign({},I,(e={},e[U]=M?C+"px":"",e[j]=L?_+"px":"",e.transform="",e))}function P1(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,c=n.roundOffsets,l=c===void 0?!0:c,u={placement:Rn(e.placement),variation:_i(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Lg(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Lg(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const td={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:P1,data:{}};var Ma={passive:!0};function N1(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,c=o===void 0?!0:o,l=Wt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(h){h.addEventListener("scroll",n.update,Ma)}),c&&l.addEventListener("resize",n.update,Ma),function(){i&&u.forEach(function(h){h.removeEventListener("scroll",n.update,Ma)}),c&&l.removeEventListener("resize",n.update,Ma)}}const nd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:N1,data:{}};var O1={left:"right",right:"left",bottom:"top",top:"bottom"};function cc(t){return t.replace(/left|right|bottom|top/g,function(e){return O1[e]})}var D1={start:"end",end:"start"};function Mg(t){return t.replace(/start|end/g,function(e){return D1[e]})}function rd(t){var e=Wt(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function sd(t){return gi(Wr(t)).left+rd(t).scrollLeft}function k1(t,e){var n=Wt(t),r=Wr(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,c=0,l=0;if(s){i=s.width,o=s.height;var u=bT();(u||!u&&e==="fixed")&&(c=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:c+sd(t),y:l}}function V1(t){var e,n=Wr(t),r=rd(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=ls(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=ls(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+sd(t),l=-r.scrollTop;return er(s||n).direction==="rtl"&&(c+=ls(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:c,y:l}}function id(t){var e=er(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function OT(t){return["html","body","#document"].indexOf(Vn(t))>=0?t.ownerDocument.body:Xt(t)&&id(t)?t:OT(Rl(t))}function Ro(t,e){var n;e===void 0&&(e=[]);var r=OT(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Wt(r),o=s?[i].concat(i.visualViewport||[],id(r)?r:[]):r,c=e.concat(o);return s?c:c.concat(Ro(Rl(o)))}function bh(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function L1(t,e){var n=gi(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function xg(t,e,n){return e===Yf?bh(k1(t,n)):ys(e)?L1(e,n):bh(V1(Wr(t)))}function M1(t){var e=Ro(Rl(t)),n=["absolute","fixed"].indexOf(er(t).position)>=0,r=n&&Xt(t)?ca(t):t;return ys(r)?e.filter(function(s){return ys(s)&&ST(s,r)&&Vn(s)!=="body"}):[]}function x1(t,e,n,r){var s=e==="clippingParents"?M1(t):[].concat(e),i=[].concat(s,[n]),o=i[0],c=i.reduce(function(l,u){var h=xg(t,u,r);return l.top=ls(h.top,l.top),l.right=jc(h.right,l.right),l.bottom=jc(h.bottom,l.bottom),l.left=ls(h.left,l.left),l},xg(t,o,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function DT(t){var e=t.reference,n=t.element,r=t.placement,s=r?Rn(r):null,i=r?_i(r):null,o=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,l;switch(s){case Ct:l={x:o,y:e.y-n.height};break;case Ht:l={x:o,y:e.y+e.height};break;case qt:l={x:e.x+e.width,y:c};break;case Rt:l={x:e.x-n.width,y:c};break;default:l={x:e.x,y:e.y}}var u=s?ed(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(i){case _s:l[u]=l[u]-(e[h]/2-n[h]/2);break;case pi:l[u]=l[u]+(e[h]/2-n[h]/2);break}}return l}function yi(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,c=n.boundary,l=c===void 0?dT:c,u=n.rootBoundary,h=u===void 0?Yf:u,d=n.elementContext,m=d===void 0?Bs:d,_=n.altBoundary,S=_===void 0?!1:_,C=n.padding,O=C===void 0?0:C,L=RT(typeof O!="number"?O:PT(O,Ni)),M=m===Bs?pT:Bs,j=t.rects.popper,U=t.elements[S?M:m],X=x1(ys(U)?U:U.contextElement||Wr(t.elements.popper),l,h,o),Z=gi(t.elements.reference),w=DT({reference:Z,element:j,placement:s}),y=bh(Object.assign({},j,w)),E=m===Bs?y:Z,b={top:X.top-E.top+L.top,bottom:E.bottom-X.bottom+L.bottom,left:X.left-E.left+L.left,right:E.right-X.right+L.right},I=t.modifiersData.offset;if(m===Bs&&I){var R=I[s];Object.keys(b).forEach(function(v){var Oe=[qt,Ht].indexOf(v)>=0?1:-1,je=[Ct,Ht].indexOf(v)>=0?"y":"x";b[v]+=R[je]*Oe})}return b}function F1(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,c=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Qf:l,h=_i(r),d=h?c?Ah:Ah.filter(function(S){return _i(S)===h}):Ni,m=d.filter(function(S){return u.indexOf(S)>=0});m.length===0&&(m=d);var _=m.reduce(function(S,C){return S[C]=yi(t,{placement:C,boundary:s,rootBoundary:i,padding:o})[Rn(C)],S},{});return Object.keys(_).sort(function(S,C){return _[S]-_[C]})}function U1(t){if(Rn(t)===Cl)return[];var e=cc(t);return[Mg(t),e,Mg(e)]}function $1(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,c=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,h=n.boundary,d=n.rootBoundary,m=n.altBoundary,_=n.flipVariations,S=_===void 0?!0:_,C=n.allowedAutoPlacements,O=e.options.placement,L=Rn(O),M=L===O,j=l||(M||!S?[cc(O)]:U1(O)),U=[O].concat(j).reduce(function(tt,ot){return tt.concat(Rn(ot)===Cl?F1(e,{placement:ot,boundary:h,rootBoundary:d,padding:u,flipVariations:S,allowedAutoPlacements:C}):ot)},[]),X=e.rects.reference,Z=e.rects.popper,w=new Map,y=!0,E=U[0],b=0;b<U.length;b++){var I=U[b],R=Rn(I),v=_i(I)===_s,Oe=[Ct,Ht].indexOf(R)>=0,je=Oe?"width":"height",Ae=yi(e,{placement:I,boundary:h,rootBoundary:d,altBoundary:m,padding:u}),pe=Oe?v?qt:Rt:v?Ht:Ct;X[je]>Z[je]&&(pe=cc(pe));var me=cc(pe),He=[];if(i&&He.push(Ae[R]<=0),c&&He.push(Ae[pe]<=0,Ae[me]<=0),He.every(function(tt){return tt})){E=I,y=!1;break}w.set(I,He)}if(y)for(var wt=S?3:1,it=function(ot){var qe=U.find(function(k){var Y=w.get(k);if(Y)return Y.slice(0,ot).every(function(G){return G})});if(qe)return E=qe,"break"},$e=wt;$e>0;$e--){var Pt=it($e);if(Pt==="break")break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}}const kT={name:"flip",enabled:!0,phase:"main",fn:$1,requiresIfExists:["offset"],data:{_skip:!1}};function Fg(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ug(t){return[Ct,qt,Ht,Rt].some(function(e){return t[e]>=0})}function B1(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=yi(e,{elementContext:"reference"}),c=yi(e,{altBoundary:!0}),l=Fg(o,r),u=Fg(c,s,i),h=Ug(l),d=Ug(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}const VT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:B1};function j1(t,e,n){var r=Rn(t),s=[Rt,Ct].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],c=i[1];return o=o||0,c=(c||0)*s,[Rt,qt].indexOf(r)>=0?{x:c,y:o}:{x:o,y:c}}function H1(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=Qf.reduce(function(h,d){return h[d]=j1(d,e.rects,i),h},{}),c=o[e.placement],l=c.x,u=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const LT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:H1};function q1(t){var e=t.state,n=t.name;e.modifiersData[n]=DT({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const od={name:"popperOffsets",enabled:!0,phase:"read",fn:q1,data:{}};function W1(t){return t==="x"?"y":"x"}function K1(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,c=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,h=n.altBoundary,d=n.padding,m=n.tether,_=m===void 0?!0:m,S=n.tetherOffset,C=S===void 0?0:S,O=yi(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:h}),L=Rn(e.placement),M=_i(e.placement),j=!M,U=ed(L),X=W1(U),Z=e.modifiersData.popperOffsets,w=e.rects.reference,y=e.rects.popper,E=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,b=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(Z){if(i){var v,Oe=U==="y"?Ct:Rt,je=U==="y"?Ht:qt,Ae=U==="y"?"height":"width",pe=Z[U],me=pe+O[Oe],He=pe-O[je],wt=_?-y[Ae]/2:0,it=M===_s?w[Ae]:y[Ae],$e=M===_s?-y[Ae]:-w[Ae],Pt=e.elements.arrow,tt=_&&Pt?Zf(Pt):{width:0,height:0},ot=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:CT(),qe=ot[Oe],k=ot[je],Y=Co(0,w[Ae],tt[Ae]),G=j?w[Ae]/2-wt-Y-qe-b.mainAxis:it-Y-qe-b.mainAxis,ne=j?-w[Ae]/2+wt+Y+k+b.mainAxis:$e+Y+k+b.mainAxis,be=e.elements.arrow&&ca(e.elements.arrow),T=be?U==="y"?be.clientTop||0:be.clientLeft||0:0,A=(v=I?.[U])!=null?v:0,P=pe+G-A-T,x=pe+ne-A,$=Co(_?jc(me,P):me,pe,_?ls(He,x):He);Z[U]=$,R[U]=$-pe}if(c){var V,Q=U==="x"?Ct:Rt,K=U==="x"?Ht:qt,H=Z[X],q=X==="y"?"height":"width",se=H+O[Q],J=H-O[K],re=[Ct,Rt].indexOf(L)!==-1,oe=(V=I?.[X])!=null?V:0,ge=re?se:H-w[q]-y[q]-oe+b.altAxis,Se=re?H+w[q]+y[q]-oe-b.altAxis:J,Ee=_&&re?A1(ge,H,Se):Co(_?ge:se,H,_?Se:J);Z[X]=Ee,R[X]=Ee-H}e.modifiersData[r]=R}}const MT={name:"preventOverflow",enabled:!0,phase:"main",fn:K1,requiresIfExists:["offset"]};function z1(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function G1(t){return t===Wt(t)||!Xt(t)?rd(t):z1(t)}function Y1(t){var e=t.getBoundingClientRect(),n=mi(e.width)/t.offsetWidth||1,r=mi(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Q1(t,e,n){n===void 0&&(n=!1);var r=Xt(e),s=Xt(e)&&Y1(e),i=Wr(e),o=gi(t,s,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Vn(e)!=="body"||id(i))&&(c=G1(e)),Xt(e)?(l=gi(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=sd(i))),{x:o.left+c.scrollLeft-l.x,y:o.top+c.scrollTop-l.y,width:o.width,height:o.height}}function X1(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(c){if(!n.has(c)){var l=e.get(c);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function J1(t){var e=X1(t);return IT.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function Z1(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ek(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var $g={placement:"bottom",modifiers:[],strategy:"absolute"};function Bg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Pl(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?$g:s;return function(c,l,u){u===void 0&&(u=i);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},$g,i),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},d=[],m=!1,_={state:h,setOptions:function(L){var M=typeof L=="function"?L(h.options):L;C(),h.options=Object.assign({},i,h.options,M),h.scrollParents={reference:ys(c)?Ro(c):c.contextElement?Ro(c.contextElement):[],popper:Ro(l)};var j=J1(ek([].concat(r,h.options.modifiers)));return h.orderedModifiers=j.filter(function(U){return U.enabled}),S(),_.update()},forceUpdate:function(){if(!m){var L=h.elements,M=L.reference,j=L.popper;if(Bg(M,j)){h.rects={reference:Q1(M,ca(j),h.options.strategy==="fixed"),popper:Zf(j)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(b){return h.modifiersData[b.name]=Object.assign({},b.data)});for(var U=0;U<h.orderedModifiers.length;U++){if(h.reset===!0){h.reset=!1,U=-1;continue}var X=h.orderedModifiers[U],Z=X.fn,w=X.options,y=w===void 0?{}:w,E=X.name;typeof Z=="function"&&(h=Z({state:h,options:y,name:E,instance:_})||h)}}}},update:Z1(function(){return new Promise(function(O){_.forceUpdate(),O(h)})}),destroy:function(){C(),m=!0}};if(!Bg(c,l))return _;_.setOptions(u).then(function(O){!m&&u.onFirstUpdate&&u.onFirstUpdate(O)});function S(){h.orderedModifiers.forEach(function(O){var L=O.name,M=O.options,j=M===void 0?{}:M,U=O.effect;if(typeof U=="function"){var X=U({state:h,name:L,instance:_,options:j}),Z=function(){};d.push(X||Z)}})}function C(){d.forEach(function(O){return O()}),d=[]}return _}}var tk=Pl(),nk=[nd,od,td,Jf],rk=Pl({defaultModifiers:nk}),sk=[nd,od,td,Jf,LT,kT,MT,NT,VT],ad=Pl({defaultModifiers:sk});const xT=Object.freeze(Object.defineProperty({__proto__:null,afterMain:vT,afterRead:_T,afterWrite:AT,applyStyles:Jf,arrow:NT,auto:Cl,basePlacements:Ni,beforeMain:yT,beforeRead:mT,beforeWrite:TT,bottom:Ht,clippingParents:dT,computeStyles:td,createPopper:ad,createPopperBase:tk,createPopperLite:rk,detectOverflow:yi,end:pi,eventListeners:nd,flip:kT,hide:VT,left:Rt,main:ET,modifierPhases:IT,offset:LT,placements:Qf,popper:Bs,popperGenerator:Pl,popperOffsets:od,preventOverflow:MT,read:gT,reference:pT,right:qt,start:_s,top:Ct,variationPlacements:Ah,viewport:Yf,write:wT},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const hr=new Map,Eu={set(t,e,n){hr.has(t)||hr.set(t,new Map);const r=hr.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return hr.has(t)&&hr.get(t).get(e)||null},remove(t,e){if(!hr.has(t))return;const n=hr.get(t);n.delete(e),n.size===0&&hr.delete(t)}},ik=1e6,ok=1e3,Sh="transitionend",FT=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),ak=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),ck=t=>{do t+=Math.floor(Math.random()*ik);while(document.getElementById(t));return t},lk=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),s=Number.parseFloat(n);return!r&&!s?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*ok)},UT=t=>{t.dispatchEvent(new Event(Sh))},Kn=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Mr=t=>Kn(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(FT(t)):null,Oi=t=>{if(!Kn(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},xr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",$T=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?$T(t.parentNode):null},Hc=()=>{},la=t=>{t.offsetHeight},BT=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,vu=[],uk=t=>{document.readyState==="loading"?(vu.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of vu)e()}),vu.push(t)):t()},Zt=()=>document.documentElement.dir==="rtl",tn=t=>{uk(()=>{const e=BT();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},kt=(t,e=[],n=t)=>typeof t=="function"?t.call(...e):n,jT=(t,e,n=!0)=>{if(!n){kt(t);return}const s=lk(e)+5;let i=!1;const o=({target:c})=>{c===e&&(i=!0,e.removeEventListener(Sh,o),kt(t))};e.addEventListener(Sh,o),setTimeout(()=>{i||UT(e)},s)},cd=(t,e,n,r)=>{const s=t.length;let i=t.indexOf(e);return i===-1?!n&&r?t[s-1]:t[0]:(i+=n?1:-1,r&&(i=(i+s)%s),t[Math.max(0,Math.min(i,s-1))])},hk=/[^.]*(?=\..*)\.|.*/,fk=/\..*/,dk=/::\d+$/,Tu={};let jg=1;const HT={mouseenter:"mouseover",mouseleave:"mouseout"},pk=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function qT(t,e){return e&&`${e}::${jg++}`||t.uidEvent||jg++}function WT(t){const e=qT(t);return t.uidEvent=e,Tu[e]=Tu[e]||{},Tu[e]}function mk(t,e){return function n(r){return ld(r,{delegateTarget:t}),n.oneOff&&W.off(t,r.type,e),e.apply(t,[r])}}function gk(t,e,n){return function r(s){const i=t.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const c of i)if(c===o)return ld(s,{delegateTarget:o}),r.oneOff&&W.off(t,s.type,e,n),n.apply(o,[s])}}function KT(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function zT(t,e,n){const r=typeof e=="string",s=r?n:e||n;let i=GT(t);return pk.has(i)||(i=t),[r,s,i]}function Hg(t,e,n,r,s){if(typeof e!="string"||!t)return;let[i,o,c]=zT(e,n,r);e in HT&&(o=(S=>function(C){if(!C.relatedTarget||C.relatedTarget!==C.delegateTarget&&!C.delegateTarget.contains(C.relatedTarget))return S.call(this,C)})(o));const l=WT(t),u=l[c]||(l[c]={}),h=KT(u,o,i?n:null);if(h){h.oneOff=h.oneOff&&s;return}const d=qT(o,e.replace(hk,"")),m=i?gk(t,n,o):mk(t,o);m.delegationSelector=i?n:null,m.callable=o,m.oneOff=s,m.uidEvent=d,u[d]=m,t.addEventListener(c,m,i)}function Ch(t,e,n,r,s){const i=KT(e[n],r,s);i&&(t.removeEventListener(n,i,!!s),delete e[n][i.uidEvent])}function _k(t,e,n,r){const s=e[n]||{};for(const[i,o]of Object.entries(s))i.includes(r)&&Ch(t,e,n,o.callable,o.delegationSelector)}function GT(t){return t=t.replace(fk,""),HT[t]||t}const W={on(t,e,n,r){Hg(t,e,n,r,!1)},one(t,e,n,r){Hg(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[s,i,o]=zT(e,n,r),c=o!==e,l=WT(t),u=l[o]||{},h=e.startsWith(".");if(typeof i<"u"){if(!Object.keys(u).length)return;Ch(t,l,o,i,s?n:null);return}if(h)for(const d of Object.keys(l))_k(t,l,d,e.slice(1));for(const[d,m]of Object.entries(u)){const _=d.replace(dk,"");(!c||e.includes(_))&&Ch(t,l,o,m.callable,m.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=BT(),s=GT(e),i=e!==s;let o=null,c=!0,l=!0,u=!1;i&&r&&(o=r.Event(e,n),r(t).trigger(o),c=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented());const h=ld(new Event(e,{bubbles:c,cancelable:!0}),n);return u&&h.preventDefault(),l&&t.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function ld(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}function qg(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function wu(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const zn={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${wu(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${wu(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let s=r.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1),e[s]=qg(t.dataset[r])}return e},getDataAttribute(t,e){return qg(t.getAttribute(`data-bs-${wu(e)}`))}};class ua{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=Kn(n)?zn.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Kn(n)?zn.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[r,s]of Object.entries(n)){const i=e[r],o=Kn(i)?"element":ak(i);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${o}" but expected type "${s}".`)}}}const yk="5.3.7";class fn extends ua{constructor(e,n){super(),e=Mr(e),e&&(this._element=e,this._config=this._getConfig(n),Eu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Eu.remove(this._element,this.constructor.DATA_KEY),W.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){jT(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Eu.get(Mr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return yk}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Au=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>FT(n)).join(","):null},ae={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!xr(n)&&Oi(n))},getSelectorFromElement(t){const e=Au(t);return e&&ae.findOne(e)?e:null},getElementFromSelector(t){const e=Au(t);return e?ae.findOne(e):null},getMultipleElementsFromSelector(t){const e=Au(t);return e?ae.find(e):[]}},Nl=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;W.on(document,n,`[data-bs-dismiss="${r}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),xr(this))return;const i=ae.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(i)[e]()})},Ek="alert",vk="bs.alert",YT=`.${vk}`,Tk=`close${YT}`,wk=`closed${YT}`,Ak="fade",Ik="show";class Ol extends fn{static get NAME(){return Ek}close(){if(W.trigger(this._element,Tk).defaultPrevented)return;this._element.classList.remove(Ik);const n=this._element.classList.contains(Ak);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),W.trigger(this._element,wk),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Ol.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Nl(Ol,"close");tn(Ol);const bk="button",Sk="bs.button",Ck=`.${Sk}`,Rk=".data-api",Pk="active",Wg='[data-bs-toggle="button"]',Nk=`click${Ck}${Rk}`;class Dl extends fn{static get NAME(){return bk}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Pk))}static jQueryInterface(e){return this.each(function(){const n=Dl.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}W.on(document,Nk,Wg,t=>{t.preventDefault();const e=t.target.closest(Wg);Dl.getOrCreateInstance(e).toggle()});tn(Dl);const Ok="swipe",Di=".bs.swipe",Dk=`touchstart${Di}`,kk=`touchmove${Di}`,Vk=`touchend${Di}`,Lk=`pointerdown${Di}`,Mk=`pointerup${Di}`,xk="touch",Fk="pen",Uk="pointer-event",$k=40,Bk={endCallback:null,leftCallback:null,rightCallback:null},jk={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class qc extends ua{constructor(e,n){super(),this._element=e,!(!e||!qc.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Bk}static get DefaultType(){return jk}static get NAME(){return Ok}dispose(){W.off(this._element,Di)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),kt(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=$k)return;const n=e/this._deltaX;this._deltaX=0,n&&kt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(W.on(this._element,Lk,e=>this._start(e)),W.on(this._element,Mk,e=>this._end(e)),this._element.classList.add(Uk)):(W.on(this._element,Dk,e=>this._start(e)),W.on(this._element,kk,e=>this._move(e)),W.on(this._element,Vk,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Fk||e.pointerType===xk)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Hk="carousel",qk="bs.carousel",Kr=`.${qk}`,QT=".data-api",Wk="ArrowLeft",Kk="ArrowRight",zk=500,eo="next",Ds="prev",js="left",lc="right",Gk=`slide${Kr}`,Iu=`slid${Kr}`,Yk=`keydown${Kr}`,Qk=`mouseenter${Kr}`,Xk=`mouseleave${Kr}`,Jk=`dragstart${Kr}`,Zk=`load${Kr}${QT}`,eV=`click${Kr}${QT}`,XT="carousel",xa="active",tV="slide",nV="carousel-item-end",rV="carousel-item-start",sV="carousel-item-next",iV="carousel-item-prev",JT=".active",ZT=".carousel-item",oV=JT+ZT,aV=".carousel-item img",cV=".carousel-indicators",lV="[data-bs-slide], [data-bs-slide-to]",uV='[data-bs-ride="carousel"]',hV={[Wk]:lc,[Kk]:js},fV={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},dV={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ha extends fn{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ae.findOne(cV,this._element),this._addEventListeners(),this._config.ride===XT&&this.cycle()}static get Default(){return fV}static get DefaultType(){return dV}static get NAME(){return Hk}next(){this._slide(eo)}nextWhenVisible(){!document.hidden&&Oi(this._element)&&this.next()}prev(){this._slide(Ds)}pause(){this._isSliding&&UT(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){W.one(this._element,Iu,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){W.one(this._element,Iu,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const s=e>r?eo:Ds;this._slide(s,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&W.on(this._element,Yk,e=>this._keydown(e)),this._config.pause==="hover"&&(W.on(this._element,Qk,()=>this.pause()),W.on(this._element,Xk,()=>this._maybeEnableCycle())),this._config.touch&&qc.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of ae.find(aV,this._element))W.on(r,Jk,s=>s.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(js)),rightCallback:()=>this._slide(this._directionToOrder(lc)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),zk+this._config.interval))}};this._swipeHelper=new qc(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=hV[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=ae.findOne(JT,this._indicatorsElement);n.classList.remove(xa),n.removeAttribute("aria-current");const r=ae.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(xa),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const r=this._getActive(),s=e===eo,i=n||cd(this._getItems(),r,s,this._config.wrap);if(i===r)return;const o=this._getItemIndex(i),c=_=>W.trigger(this._element,_,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:o});if(c(Gk).defaultPrevented||!r||!i)return;const u=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const h=s?rV:nV,d=s?sV:iV;i.classList.add(d),la(i),r.classList.add(h),i.classList.add(h);const m=()=>{i.classList.remove(h,d),i.classList.add(xa),r.classList.remove(xa,d,h),this._isSliding=!1,c(Iu)};this._queueCallback(m,r,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(tV)}_getActive(){return ae.findOne(oV,this._element)}_getItems(){return ae.find(ZT,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Zt()?e===js?Ds:eo:e===js?eo:Ds}_orderToDirection(e){return Zt()?e===Ds?js:lc:e===Ds?lc:js}static jQueryInterface(e){return this.each(function(){const n=ha.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}W.on(document,eV,lV,function(t){const e=ae.getElementFromSelector(this);if(!e||!e.classList.contains(XT))return;t.preventDefault();const n=ha.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(zn.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});W.on(window,Zk,()=>{const t=ae.find(uV);for(const e of t)ha.getOrCreateInstance(e)});tn(ha);const pV="collapse",mV="bs.collapse",fa=`.${mV}`,gV=".data-api",_V=`show${fa}`,yV=`shown${fa}`,EV=`hide${fa}`,vV=`hidden${fa}`,TV=`click${fa}${gV}`,bu="show",Ws="collapse",Fa="collapsing",wV="collapsed",AV=`:scope .${Ws} .${Ws}`,IV="collapse-horizontal",bV="width",SV="height",CV=".collapse.show, .collapse.collapsing",Rh='[data-bs-toggle="collapse"]',RV={parent:null,toggle:!0},PV={parent:"(null|element)",toggle:"boolean"};class Wo extends fn{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const r=ae.find(Rh);for(const s of r){const i=ae.getSelectorFromElement(s),o=ae.find(i).filter(c=>c===this._element);i!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return RV}static get DefaultType(){return PV}static get NAME(){return pV}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(CV).filter(c=>c!==this._element).map(c=>Wo.getOrCreateInstance(c,{toggle:!1}))),e.length&&e[0]._isTransitioning||W.trigger(this._element,_V).defaultPrevented)return;for(const c of e)c.hide();const r=this._getDimension();this._element.classList.remove(Ws),this._element.classList.add(Fa),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Fa),this._element.classList.add(Ws,bu),this._element.style[r]="",W.trigger(this._element,yV)},o=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[r]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||W.trigger(this._element,EV).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,la(this._element),this._element.classList.add(Fa),this._element.classList.remove(Ws,bu);for(const s of this._triggerArray){const i=ae.getElementFromSelector(s);i&&!this._isShown(i)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Fa),this._element.classList.add(Ws),W.trigger(this._element,vV)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(bu)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Mr(e.parent),e}_getDimension(){return this._element.classList.contains(IV)?bV:SV}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Rh);for(const n of e){const r=ae.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(e){const n=ae.find(AV,this._config.parent);return ae.find(e,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const r of e)r.classList.toggle(wV,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const r=Wo.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}W.on(document,TV,Rh,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of ae.getMultipleElementsFromSelector(this))Wo.getOrCreateInstance(e,{toggle:!1}).toggle()});tn(Wo);const Kg="dropdown",NV="bs.dropdown",ws=`.${NV}`,ud=".data-api",OV="Escape",zg="Tab",DV="ArrowUp",Gg="ArrowDown",kV=2,VV=`hide${ws}`,LV=`hidden${ws}`,MV=`show${ws}`,xV=`shown${ws}`,ew=`click${ws}${ud}`,tw=`keydown${ws}${ud}`,FV=`keyup${ws}${ud}`,Hs="show",UV="dropup",$V="dropend",BV="dropstart",jV="dropup-center",HV="dropdown-center",is='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',qV=`${is}.${Hs}`,uc=".dropdown-menu",WV=".navbar",KV=".navbar-nav",zV=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",GV=Zt()?"top-end":"top-start",YV=Zt()?"top-start":"top-end",QV=Zt()?"bottom-end":"bottom-start",XV=Zt()?"bottom-start":"bottom-end",JV=Zt()?"left-start":"right-start",ZV=Zt()?"right-start":"left-start",eL="top",tL="bottom",nL={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},rL={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Pn extends fn{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=ae.next(this._element,uc)[0]||ae.prev(this._element,uc)[0]||ae.findOne(uc,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return nL}static get DefaultType(){return rL}static get NAME(){return Kg}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!W.trigger(this._element,MV,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(KV))for(const r of[].concat(...document.body.children))W.on(r,"mouseover",Hc);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Hs),this._element.classList.add(Hs),W.trigger(this._element,xV,e)}}hide(){if(xr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!W.trigger(this._element,VV,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))W.off(r,"mouseover",Hc);this._popper&&this._popper.destroy(),this._menu.classList.remove(Hs),this._element.classList.remove(Hs),this._element.setAttribute("aria-expanded","false"),zn.removeDataAttribute(this._menu,"popper"),W.trigger(this._element,LV,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Kn(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Kg.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof xT>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:Kn(this._config.reference)?e=Mr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=ad(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Hs)}_getPlacement(){const e=this._parent;if(e.classList.contains($V))return JV;if(e.classList.contains(BV))return ZV;if(e.classList.contains(jV))return eL;if(e.classList.contains(HV))return tL;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(UV)?n?YV:GV:n?XV:QV}_detectNavbar(){return this._element.closest(WV)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(zn.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...kt(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:n}){const r=ae.find(zV,this._menu).filter(s=>Oi(s));r.length&&cd(r,n,e===Gg,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Pn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===kV||e.type==="keyup"&&e.key!==zg)return;const n=ae.find(qV);for(const r of n){const s=Pn.getInstance(r);if(!s||s._config.autoClose===!1)continue;const i=e.composedPath(),o=i.includes(s._menu);if(i.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===zg||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const c={relatedTarget:s._element};e.type==="click"&&(c.clickEvent=e),s._completeHide(c)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===OV,s=[DV,Gg].includes(e.key);if(!s&&!r||n&&!r)return;e.preventDefault();const i=this.matches(is)?this:ae.prev(this,is)[0]||ae.next(this,is)[0]||ae.findOne(is,e.delegateTarget.parentNode),o=Pn.getOrCreateInstance(i);if(s){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),i.focus())}}W.on(document,tw,is,Pn.dataApiKeydownHandler);W.on(document,tw,uc,Pn.dataApiKeydownHandler);W.on(document,ew,Pn.clearMenus);W.on(document,FV,Pn.clearMenus);W.on(document,ew,is,function(t){t.preventDefault(),Pn.getOrCreateInstance(this).toggle()});tn(Pn);const nw="backdrop",sL="fade",Yg="show",Qg=`mousedown.bs.${nw}`,iL={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},oL={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class rw extends ua{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return iL}static get DefaultType(){return oL}static get NAME(){return nw}show(e){if(!this._config.isVisible){kt(e);return}this._append();const n=this._getElement();this._config.isAnimated&&la(n),n.classList.add(Yg),this._emulateAnimation(()=>{kt(e)})}hide(e){if(!this._config.isVisible){kt(e);return}this._getElement().classList.remove(Yg),this._emulateAnimation(()=>{this.dispose(),kt(e)})}dispose(){this._isAppended&&(W.off(this._element,Qg),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(sL),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Mr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),W.on(e,Qg,()=>{kt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){jT(e,this._getElement(),this._config.isAnimated)}}const aL="focustrap",cL="bs.focustrap",Wc=`.${cL}`,lL=`focusin${Wc}`,uL=`keydown.tab${Wc}`,hL="Tab",fL="forward",Xg="backward",dL={autofocus:!0,trapElement:null},pL={autofocus:"boolean",trapElement:"element"};class sw extends ua{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return dL}static get DefaultType(){return pL}static get NAME(){return aL}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),W.off(document,Wc),W.on(document,lL,e=>this._handleFocusin(e)),W.on(document,uL,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,W.off(document,Wc))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=ae.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===Xg?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===hL&&(this._lastTabNavDirection=e.shiftKey?Xg:fL)}}const Jg=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Zg=".sticky-top",Ua="padding-right",e_="margin-right";class Ph{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ua,n=>n+e),this._setElementAttributes(Jg,Ua,n=>n+e),this._setElementAttributes(Zg,e_,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ua),this._resetElementAttributes(Jg,Ua),this._resetElementAttributes(Zg,e_)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const s=this.getWidth(),i=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,n);const c=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${r(Number.parseFloat(c))}px`)};this._applyManipulationCallback(e,i)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&zn.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=s=>{const i=zn.getDataAttribute(s,n);if(i===null){s.style.removeProperty(n);return}zn.removeDataAttribute(s,n),s.style.setProperty(n,i)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(Kn(e)){n(e);return}for(const r of ae.find(e,this._element))n(r)}}const mL="modal",gL="bs.modal",en=`.${gL}`,_L=".data-api",yL="Escape",EL=`hide${en}`,vL=`hidePrevented${en}`,iw=`hidden${en}`,ow=`show${en}`,TL=`shown${en}`,wL=`resize${en}`,AL=`click.dismiss${en}`,IL=`mousedown.dismiss${en}`,bL=`keydown.dismiss${en}`,SL=`click${en}${_L}`,t_="modal-open",CL="fade",n_="show",Su="modal-static",RL=".modal.show",PL=".modal-dialog",NL=".modal-body",OL='[data-bs-toggle="modal"]',DL={backdrop:!0,focus:!0,keyboard:!0},kL={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ei extends fn{constructor(e,n){super(e,n),this._dialog=ae.findOne(PL,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ph,this._addEventListeners()}static get Default(){return DL}static get DefaultType(){return kL}static get NAME(){return mL}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||W.trigger(this._element,ow,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(t_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||W.trigger(this._element,EL).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(n_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){W.off(window,en),W.off(this._dialog,en),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new rw({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new sw({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=ae.findOne(NL,this._dialog);n&&(n.scrollTop=0),la(this._element),this._element.classList.add(n_);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,W.trigger(this._element,TL,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){W.on(this._element,bL,e=>{if(e.key===yL){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),W.on(window,wL,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),W.on(this._element,IL,e=>{W.one(this._element,AL,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(t_),this._resetAdjustments(),this._scrollBar.reset(),W.trigger(this._element,iw)})}_isAnimated(){return this._element.classList.contains(CL)}_triggerBackdropTransition(){if(W.trigger(this._element,vL).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(Su)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Su),this._queueCallback(()=>{this._element.classList.remove(Su),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const s=Zt()?"paddingLeft":"paddingRight";this._element.style[s]=`${n}px`}if(!r&&e){const s=Zt()?"paddingRight":"paddingLeft";this._element.style[s]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=Ei.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}W.on(document,SL,OL,function(t){const e=ae.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),W.one(e,ow,s=>{s.defaultPrevented||W.one(e,iw,()=>{Oi(this)&&this.focus()})});const n=ae.findOne(RL);n&&Ei.getInstance(n).hide(),Ei.getOrCreateInstance(e).toggle(this)});Nl(Ei);tn(Ei);const VL="offcanvas",LL="bs.offcanvas",nr=`.${LL}`,aw=".data-api",ML=`load${nr}${aw}`,xL="Escape",r_="show",s_="showing",i_="hiding",FL="offcanvas-backdrop",cw=".offcanvas.show",UL=`show${nr}`,$L=`shown${nr}`,BL=`hide${nr}`,o_=`hidePrevented${nr}`,lw=`hidden${nr}`,jL=`resize${nr}`,HL=`click${nr}${aw}`,qL=`keydown.dismiss${nr}`,WL='[data-bs-toggle="offcanvas"]',KL={backdrop:!0,keyboard:!0,scroll:!1},zL={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Fr extends fn{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return KL}static get DefaultType(){return zL}static get NAME(){return VL}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||W.trigger(this._element,UL,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ph().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(s_);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(r_),this._element.classList.remove(s_),W.trigger(this._element,$L,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||W.trigger(this._element,BL).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(i_),this._backdrop.hide();const n=()=>{this._element.classList.remove(r_,i_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ph().reset(),W.trigger(this._element,lw)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){W.trigger(this._element,o_);return}this.hide()},n=!!this._config.backdrop;return new rw({className:FL,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new sw({trapElement:this._element})}_addEventListeners(){W.on(this._element,qL,e=>{if(e.key===xL){if(this._config.keyboard){this.hide();return}W.trigger(this._element,o_)}})}static jQueryInterface(e){return this.each(function(){const n=Fr.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}W.on(document,HL,WL,function(t){const e=ae.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),xr(this))return;W.one(e,lw,()=>{Oi(this)&&this.focus()});const n=ae.findOne(cw);n&&n!==e&&Fr.getInstance(n).hide(),Fr.getOrCreateInstance(e).toggle(this)});W.on(window,ML,()=>{for(const t of ae.find(cw))Fr.getOrCreateInstance(t).show()});W.on(window,jL,()=>{for(const t of ae.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Fr.getOrCreateInstance(t).hide()});Nl(Fr);tn(Fr);const GL=/^aria-[\w-]*$/i,uw={"*":["class","dir","id","lang","role",GL],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},YL=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),QL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,XL=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?YL.has(n)?!!QL.test(t.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(n))};function JL(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const s=new window.DOMParser().parseFromString(t,"text/html"),i=[].concat(...s.body.querySelectorAll("*"));for(const o of i){const c=o.nodeName.toLowerCase();if(!Object.keys(e).includes(c)){o.remove();continue}const l=[].concat(...o.attributes),u=[].concat(e["*"]||[],e[c]||[]);for(const h of l)XL(h,u)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const ZL="TemplateFactory",eM={allowList:uw,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},tM={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},nM={entry:"(string|element|function|null)",selector:"(string|element)"};class rM extends ua{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return eM}static get DefaultType(){return tM}static get NAME(){return ZL}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,i]of Object.entries(this._config.content))this._setContent(e,i,s);const n=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,r]of Object.entries(e))super._typeCheckConfig({selector:n,entry:r},nM)}_setContent(e,n,r){const s=ae.findOne(r,e);if(s){if(n=this._resolvePossibleFunction(n),!n){s.remove();return}if(Kn(n)){this._putElementInTemplate(Mr(n),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(n);return}s.textContent=n}}_maybeSanitize(e){return this._config.sanitize?JL(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return kt(e,[void 0,this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const sM="tooltip",iM=new Set(["sanitize","allowList","sanitizeFn"]),Cu="fade",oM="modal",$a="show",aM=".tooltip-inner",a_=`.${oM}`,c_="hide.bs.modal",to="hover",Ru="focus",Pu="click",cM="manual",lM="hide",uM="hidden",hM="show",fM="shown",dM="inserted",pM="click",mM="focusin",gM="focusout",_M="mouseenter",yM="mouseleave",EM={AUTO:"auto",TOP:"top",RIGHT:Zt()?"left":"right",BOTTOM:"bottom",LEFT:Zt()?"right":"left"},vM={allowList:uw,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},TM={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ki extends fn{constructor(e,n){if(typeof xT>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return vM}static get DefaultType(){return TM}static get NAME(){return sM}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),W.off(this._element.closest(a_),c_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=W.trigger(this._element,this.constructor.eventName(hM)),r=($T(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(s),W.trigger(this._element,this.constructor.eventName(dM))),this._popper=this._createPopper(s),s.classList.add($a),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))W.on(c,"mouseover",Hc);const o=()=>{W.trigger(this._element,this.constructor.eventName(fM)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||W.trigger(this._element,this.constructor.eventName(lM)).defaultPrevented)return;if(this._getTipElement().classList.remove($a),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))W.off(s,"mouseover",Hc);this._activeTrigger[Pu]=!1,this._activeTrigger[Ru]=!1,this._activeTrigger[to]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),W.trigger(this._element,this.constructor.eventName(uM)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Cu,$a),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=ck(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(Cu),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new rM({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[aM]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Cu)}_isShown(){return this.tip&&this.tip.classList.contains($a)}_createPopper(e){const n=kt(this._config.placement,[this,e,this._element]),r=EM[n.toUpperCase()];return ad(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return kt(e,[this._element,this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...kt(this._config.popperConfig,[void 0,n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")W.on(this._element,this.constructor.eventName(pM),this._config.selector,r=>{const s=this._initializeOnDelegatedTarget(r);s._activeTrigger[Pu]=!(s._isShown()&&s._activeTrigger[Pu]),s.toggle()});else if(n!==cM){const r=n===to?this.constructor.eventName(_M):this.constructor.eventName(mM),s=n===to?this.constructor.eventName(yM):this.constructor.eventName(gM);W.on(this._element,r,this._config.selector,i=>{const o=this._initializeOnDelegatedTarget(i);o._activeTrigger[i.type==="focusin"?Ru:to]=!0,o._enter()}),W.on(this._element,s,this._config.selector,i=>{const o=this._initializeOnDelegatedTarget(i);o._activeTrigger[i.type==="focusout"?Ru:to]=o._element.contains(i.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},W.on(this._element.closest(a_),c_,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=zn.getDataAttributes(this._element);for(const r of Object.keys(n))iM.has(r)&&delete n[r];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Mr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(e[n]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=ki.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}tn(ki);const wM="popover",AM=".popover-header",IM=".popover-body",bM={...ki.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},SM={...ki.DefaultType,content:"(null|string|element|function)"};class hd extends ki{static get Default(){return bM}static get DefaultType(){return SM}static get NAME(){return wM}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[AM]:this._getTitle(),[IM]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=hd.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}tn(hd);const CM="scrollspy",RM="bs.scrollspy",fd=`.${RM}`,PM=".data-api",NM=`activate${fd}`,l_=`click${fd}`,OM=`load${fd}${PM}`,DM="dropdown-item",ks="active",kM='[data-bs-spy="scroll"]',Nu="[href]",VM=".nav, .list-group",u_=".nav-link",LM=".nav-item",MM=".list-group-item",xM=`${u_}, ${LM} > ${u_}, ${MM}`,FM=".dropdown",UM=".dropdown-toggle",$M={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},BM={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class kl extends fn{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return $M}static get DefaultType(){return BM}static get NAME(){return CM}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Mr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(W.off(this._config.target,l_),W.on(this._config.target,l_,Nu,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const r=this._rootElement||window,s=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:s,behavior:"smooth"});return}r.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=o=>this._targetLinks.get(`#${o.target.id}`),r=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},s=(this._rootElement||document.documentElement).scrollTop,i=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const c=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&c){if(r(o),!s)return;continue}!i&&!c&&r(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=ae.find(Nu,this._config.target);for(const n of e){if(!n.hash||xr(n))continue;const r=ae.findOne(decodeURI(n.hash),this._element);Oi(r)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ks),this._activateParents(e),W.trigger(this._element,NM,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(DM)){ae.findOne(UM,e.closest(FM)).classList.add(ks);return}for(const n of ae.parents(e,VM))for(const r of ae.prev(n,xM))r.classList.add(ks)}_clearActiveClass(e){e.classList.remove(ks);const n=ae.find(`${Nu}.${ks}`,e);for(const r of n)r.classList.remove(ks)}static jQueryInterface(e){return this.each(function(){const n=kl.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}W.on(window,OM,()=>{for(const t of ae.find(kM))kl.getOrCreateInstance(t)});tn(kl);const jM="tab",HM="bs.tab",As=`.${HM}`,qM=`hide${As}`,WM=`hidden${As}`,KM=`show${As}`,zM=`shown${As}`,GM=`click${As}`,YM=`keydown${As}`,QM=`load${As}`,XM="ArrowLeft",h_="ArrowRight",JM="ArrowUp",f_="ArrowDown",Ou="Home",d_="End",os="active",p_="fade",Du="show",ZM="dropdown",hw=".dropdown-toggle",ex=".dropdown-menu",ku=`:not(${hw})`,tx='.list-group, .nav, [role="tablist"]',nx=".nav-item, .list-group-item",rx=`.nav-link${ku}, .list-group-item${ku}, [role="tab"]${ku}`,fw='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Vu=`${rx}, ${fw}`,sx=`.${os}[data-bs-toggle="tab"], .${os}[data-bs-toggle="pill"], .${os}[data-bs-toggle="list"]`;class vi extends fn{constructor(e){super(e),this._parent=this._element.closest(tx),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),W.on(this._element,YM,n=>this._keydown(n)))}static get NAME(){return jM}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),r=n?W.trigger(n,qM,{relatedTarget:e}):null;W.trigger(e,KM,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(os),this._activate(ae.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Du);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),W.trigger(e,zM,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(p_))}_deactivate(e,n){if(!e)return;e.classList.remove(os),e.blur(),this._deactivate(ae.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Du);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),W.trigger(e,WM,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(p_))}_keydown(e){if(![XM,h_,JM,f_,Ou,d_].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(s=>!xr(s));let r;if([Ou,d_].includes(e.key))r=n[e.key===Ou?0:n.length-1];else{const s=[h_,f_].includes(e.key);r=cd(n,e.target,s,!0)}r&&(r.focus({preventScroll:!0}),vi.getOrCreateInstance(r).show())}_getChildren(){return ae.find(Vu,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",n),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=ae.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const r=this._getOuterElement(e);if(!r.classList.contains(ZM))return;const s=(i,o)=>{const c=ae.findOne(i,r);c&&c.classList.toggle(o,n)};s(hw,os),s(ex,Du),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,r){e.hasAttribute(n)||e.setAttribute(n,r)}_elemIsActive(e){return e.classList.contains(os)}_getInnerElement(e){return e.matches(Vu)?e:ae.findOne(Vu,e)}_getOuterElement(e){return e.closest(nx)||e}static jQueryInterface(e){return this.each(function(){const n=vi.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}W.on(document,GM,fw,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!xr(this)&&vi.getOrCreateInstance(this).show()});W.on(window,QM,()=>{for(const t of ae.find(sx))vi.getOrCreateInstance(t)});tn(vi);const ix="toast",ox="bs.toast",zr=`.${ox}`,ax=`mouseover${zr}`,cx=`mouseout${zr}`,lx=`focusin${zr}`,ux=`focusout${zr}`,hx=`hide${zr}`,fx=`hidden${zr}`,dx=`show${zr}`,px=`shown${zr}`,mx="fade",m_="hide",Ba="show",ja="showing",gx={animation:"boolean",autohide:"boolean",delay:"number"},_x={animation:!0,autohide:!0,delay:5e3};class Vl extends fn{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return _x}static get DefaultType(){return gx}static get NAME(){return ix}show(){if(W.trigger(this._element,dx).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(mx);const n=()=>{this._element.classList.remove(ja),W.trigger(this._element,px),this._maybeScheduleHide()};this._element.classList.remove(m_),la(this._element),this._element.classList.add(Ba,ja),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||W.trigger(this._element,hx).defaultPrevented)return;const n=()=>{this._element.classList.add(m_),this._element.classList.remove(ja,Ba),W.trigger(this._element,fx)};this._element.classList.add(ja),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ba),super.dispose()}isShown(){return this._element.classList.contains(Ba)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){W.on(this._element,ax,e=>this._onInteraction(e,!0)),W.on(this._element,cx,e=>this._onInteraction(e,!1)),W.on(this._element,lx,e=>this._onInteraction(e,!0)),W.on(this._element,ux,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Vl.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Nl(Vl);tn(Vl);sb(m1).use(fT).mount("#app");export{Rx as A,Cx as B,Os as C,Px as D,Nx as E,yn as F,So as G,Ox as H,Vh as I,wx as J,Tx as K,QI as L,Ax as M,Q_ as N,Ty as O,YI as P,rs as Q,Ps as R,Dx as S,Ex as T,kx as U,ye as a,Fe as b,Qi as c,lp as d,zt as e,Ca as f,vx as g,Ls as h,Xc as i,Ga as j,yx as k,XI as l,Ft as m,mr as n,ey as o,Hh as p,Ys as q,Wa as r,uS as s,qa as t,hS as u,kp as v,rn as w,bx as x,Kh as y,Ix as z};
