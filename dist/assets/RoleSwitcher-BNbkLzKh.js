import{r as w,m as r,o as x,G as v,y as R,c,a as e,e as p,t as n,F as C,g as k,n as f,f as y,h as u,b as U,w as A,d as N,s as z}from"./index-CanbGPVk.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"card mb-4"},L={class:"card-body"},M={class:"row align-items-center"},P={class:"col-auto"},j={class:"avatar-placeholder bg-primary text-white rounded-circle d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px","font-size":"1.5rem"}},E={class:"col"},V={class:"mb-1"},B={class:"text-muted mb-1"},I={class:"d-flex gap-1 flex-wrap"},F={key:0,class:"bi bi-check-lg ms-1","aria-hidden":"true"},T={class:"row mt-4 pt-3 border-top"},G={class:"col-md-4"},J={class:"text-center"},q={class:"h4 mb-0 text-primary"},H={class:"col-md-4"},K={class:"text-center"},O={class:"h4 mb-0 text-success"},Q={class:"text-muted"},W={class:"col-md-4"},X={class:"text-center"},Y={class:"h4 mb-0 text-info"},Z={__name:"MyAccount",setup(D){const a=w({user:null,role:null,availableRoles:[],userName:null}),d=r(()=>a.value.user?.email||"No email"),l=r(()=>a.value.role||"member"),h=r(()=>a.value.availableRoles||[l.value]);x(async()=>{const t=await v.getCurrentUser();a.value=t});const _=v.onAuthStateChange(async(t,o)=>{if(t){const b=await v.getCurrentUser();a.value=b}else a.value={user:null,role:null,availableRoles:[],userName:null}});R(()=>{_&&_()});const g=r(()=>a.value.userName?a.value.userName:a.value.user?.email?a.value.user.email.split("@")[0]:"User"),i=r(()=>{const t=g.value;return t.length>=2?t.substring(0,2).toUpperCase():t.substring(0,1).toUpperCase()}),s=r(()=>({joinDate:new Date().toLocaleDateString("en-US",{month:"short",year:"numeric"}),programCount:l.value==="organizer"?"3":"5",activityLevel:"Active"}));function m(){alert("Profile editing will be implemented in future updates!")}return(t,o)=>(u(),c("div",$,[o[3]||(o[3]=e("div",{class:"card-header bg-primary text-white"},[e("h5",{class:"card-title mb-0"},[e("i",{class:"bi bi-person-circle me-2","aria-hidden":"true"}),p(" My Account ")])],-1)),e("div",L,[e("div",M,[e("div",P,[e("div",j,n(i.value),1)]),e("div",E,[e("h6",V,n(g.value),1),e("p",B,n(d.value),1),e("div",I,[(u(!0),c(C,null,k(h.value,b=>(u(),c("span",{key:b,class:f(["badge text-capitalize",b===l.value?"bg-primary":"bg-secondary"])},[p(n(b)+" ",1),b===l.value?(u(),c("i",F)):y("",!0)],2))),128))])]),e("div",{class:"col-auto"},[e("button",{onClick:m,class:"btn btn-outline-primary btn-sm"},[...o[0]||(o[0]=[e("i",{class:"bi bi-pencil me-1","aria-hidden":"true"},null,-1),p(" Edit Profile ",-1)])])])]),e("div",T,[e("div",G,[e("div",J,[e("div",q,n(s.value.joinDate),1),o[1]||(o[1]=e("small",{class:"text-muted"},"Member Since",-1))])]),e("div",H,[e("div",K,[e("div",O,n(s.value.programCount),1),e("small",Q,n(l.value==="organizer"?"Programs Created":"Programs Joined"),1)])]),e("div",W,[e("div",X,[e("div",Y,n(s.value.activityLevel),1),o[2]||(o[2]=e("small",{class:"text-muted"},"Activity Level",-1))])])])])]))}},ce=S(Z,[["__scopeId","data-v-b44ae6ef"]]),ee={key:0,class:"dropdown"},te=["aria-label"],se={class:"dropdown-menu","aria-labelledby":"roleSwitcher"},ae=["onClick","disabled"],le={class:"text-capitalize"},oe={key:0,class:"bi bi-check-lg ms-auto text-success","aria-hidden":"true"},ie={__name:"RoleSwitcher",setup(D){const a=z(),d=w({user:null,role:null,availableRoles:[]}),l=r(()=>d.value.role),h=r(()=>d.value.availableRoles||[]);x(async()=>{const i=await v.getCurrentUser();d.value=i});const _=v.onAuthStateChange(async(i,s)=>{if(i){const m=await v.getCurrentUser();d.value=m}else d.value={user:null,role:null,availableRoles:[]}});R(()=>{_&&_()});async function g(i){if(await v.switchRole(i)){const m=i==="organizer"?"organizer-account":"member-account";a.push({name:m})}}return(i,s)=>{const m=N("RouterLink");return h.value.length>1?(u(),c("div",ee,[e("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button",id:"roleSwitcher","data-bs-toggle":"dropdown","aria-expanded":"false","aria-label":`Switch role from ${l.value}`},[...s[0]||(s[0]=[e("i",{class:"bi bi-person-badge me-1","aria-hidden":"true"},null,-1),p(" Switch Role ",-1)])],8,te),e("ul",se,[s[2]||(s[2]=e("li",null,[e("h6",{class:"dropdown-header"},"Available Roles")],-1)),(u(!0),c(C,null,k(h.value,t=>(u(),c("li",{key:t},[e("button",{onClick:o=>g(t),class:f(["dropdown-item d-flex align-items-center",{active:t===l.value}]),disabled:t===l.value},[e("i",{class:f([t==="organizer"?"bi bi-people":"bi bi-person","me-2"]),"aria-hidden":"true"},null,2),e("span",le,n(t),1),t===l.value?(u(),c("i",oe)):y("",!0)],10,ae)]))),128)),s[3]||(s[3]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[U(m,{to:{name:"register"},class:"dropdown-item d-flex align-items-center"},{default:A(()=>[...s[1]||(s[1]=[e("i",{class:"bi bi-plus-circle me-2","aria-hidden":"true"},null,-1),p(" Add Another Role ",-1)])]),_:1})])])])):y("",!0)}}},ue=S(ie,[["__scopeId","data-v-1db057ab"]]);export{ce as M,ue as R};
