import{r as v,i as Z,m as re,o as ze,u as De,G as X,j as Ne,y as Re,c as o,a as s,b as de,w as ue,d as He,e as r,t as u,f as m,z as Le,k as b,v as C,n as k,l as H,F as S,g as M,K as je,q as ce,s as Oe,h as i,P as me,p as ve}from"./index-CanbGPVk.js";import{d as J}from"./DataService-z2Ih9ngB.js";import{m as F}from"./mapbox-gl-CQxWPcX7.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const We={class:"container py-4 py-lg-5"},Je={class:"row justify-content-center"},Ke={class:"col-12 col-xl-10"},Qe={class:"d-flex align-items-center mb-4"},Ze={class:"d-flex gap-2"},Xe=["disabled"],es={key:0,class:"text-center py-5"},ss={key:1,class:"alert alert-danger",role:"alert"},ts={key:2,class:"text-center py-5"},as={key:3},ls={key:0,class:"alert alert-success",role:"alert"},ns={key:1,class:"alert alert-danger",role:"alert"},os={key:2,class:"modal d-block",style:{"background-color":"rgba(0,0,0,0.5)"}},is={class:"modal-dialog modal-dialog-centered"},rs={class:"modal-content"},ds={class:"modal-header"},us={class:"modal-body"},cs={class:"modal-footer"},ms=["disabled"],vs={key:0,class:"spinner-border spinner-border-sm me-2"},ps={key:1,class:"bi bi-x-circle me-2"},gs={class:"row g-4"},bs={class:"col-md-8"},fs={class:"card"},ys={class:"card-body"},hs={class:"mb-3"},xs={key:0,class:"invalid-feedback"},ks={class:"mb-3"},Ps=["value"],ws={key:0,class:"invalid-feedback"},Us={class:"mb-3"},Ts={class:"row g-2"},$s={class:"form-check"},Cs=["id","value"],Ss=["for"],Ms={key:0,class:"text-danger small mt-1"},Is={class:"mb-3"},_s={key:0,class:"invalid-feedback"},As={class:"form-text"},qs={class:"row g-3 mb-3"},Vs={class:"col-md-6"},Bs={class:"input-group"},Fs={key:0,class:"invalid-feedback"},Es={class:"col-md-6"},Gs=["value"],zs={key:0,class:"invalid-feedback"},Ds={class:"mb-3"},Ns={key:0,class:"invalid-feedback"},Rs={key:1,class:"mt-3"},Hs={class:"row g-2"},Ls={class:"position-relative"},js=["src","alt"],Os=["onClick","aria-label"],Ys={class:"small text-muted mt-1 text-truncate"},Ws={key:2,class:"mt-2"},Js={key:0,class:"text-info"},Ks={key:1,class:"text-success"},Qs={key:2,class:"text-danger"},Zs={class:"card mt-4"},Xs={class:"card-body"},et={class:"mb-3"},st={key:0,class:"invalid-feedback"},tt={class:"mb-3"},at={class:"position-relative"},lt={class:"input-group"},nt=["disabled"],ot={key:0,class:"position-absolute top-50 end-0 translate-middle-y me-5"},it={key:1,class:"position-absolute w-100 bg-white border rounded-bottom shadow-lg",style:{top:"100%","z-index":"1000","max-height":"300px","overflow-y":"auto"}},rt=["onClick"],dt={class:"fw-medium"},ut={key:0,class:"mb-3"},ct={class:"alert alert-info d-flex align-items-center"},mt={class:"flex-grow-1"},vt={class:"mb-3"},pt={class:"position-relative"},gt={key:0,class:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-white bg-opacity-75 rounded",style:{"z-index":"1000"}},bt={class:"row g-3"},ft={class:"col-12"},yt={key:0,class:"invalid-feedback"},ht={class:"col-md-8"},xt={key:0,class:"invalid-feedback"},kt={class:"col-md-4"},Pt={key:0,class:"invalid-feedback"},wt={key:1,class:"mt-3"},Ut={class:"text-muted"},Tt={class:"col-md-4"},$t={class:"card sticky-top",style:{top:"2rem"}},Ct={class:"card-body"},St={class:"mb-3"},Mt={class:"d-flex flex-wrap gap-2"},It=["id","value"],_t=["for"],At={key:0,class:"text-danger small mt-1"},qt={class:"mb-3"},Vt={class:"row g-2"},Bt={class:"col-7"},Ft=["value"],Et={class:"col-5"},Gt=["value"],zt={key:0,class:"text-danger small mt-1"},Dt={class:"mb-3"},Nt={class:"row g-2"},Rt={class:"col-7"},Ht=["value"],Lt={class:"col-5"},jt=["value"],Ot={key:0,class:"text-danger small mt-1"},Yt={class:"mb-3"},Wt=["min"],Jt={key:0,class:"invalid-feedback"},Kt={class:"mb-4"},Qt={key:0,class:"invalid-feedback"},Zt=["disabled"],Xt={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},ea={key:1,class:"bi bi-check-circle me-2","aria-hidden":"true"},sa={__name:"EditProgramPage",props:{id:String},setup(pe){const ge=De(),ee=Oe(),be=pe,P=v(null),O=v(!0),A=v(null),z=v(!1),D=v(!1),E=v(""),I=v(""),N=v(!1),q=v([]),g=v(null),U=v([]),t=Z({title:"",sport:"",organizer_email:"",ageGroups:[],description:"",cost:0,costUnit:"per-session",accessibility:[],inclusivityTags:[],schedule:{days:[],startHour:"",startMinute:"",endHour:"",endMinute:"",startDate:""},venue:{name:"",address:"",suburb:"",postcode:"",lat:null,lng:null},equipment:{provided:!1,required:[]},contact:{email:"",phone:""},images:[],maxParticipants:20}),c=Z({title:!1,sport:!1,ageGroups:!1,description:!1,cost:!1,costUnit:!1,scheduleDays:!1,startTime:!1,endTime:!1,startDate:!1,venueName:!1,venueAddress:!1,venueSuburb:!1,venuePostcode:!1,contactEmail:!1,contactPhone:!1,maxParticipants:!1,images:!1}),n=Z({title:"",sport:"",ageGroups:"",description:"",cost:"",costUnit:"",scheduleDays:"",startTime:"",endTime:"",startDate:"",venueName:"",venueAddress:"",venueSuburb:"",venuePostcode:"",contactEmail:"",contactPhone:"",maxParticipants:"",images:""}),T=v(null),L=v(null),$=v(null),_=v(""),V=v([]),G=v(!1),R=v(!1),B=v(null),j=v(!1),se=v(null),te=v(null),ae=v(null),le=v(null),fe=["Football","Basketball","Tennis","Swimming","Running","Cycling","Yoga","Pilates","Boxing","Martial Arts","Dance","Volleyball","Badminton","Table Tennis","Cricket","Rugby","Netball","Golf","Rock Climbing","Walking Football","Wheelchair Basketball","Other"],ye=["5-8","8-12","12-17","18-40","40-60","60+"],he=["per-session","per-class","per-term","per-month","free"],xe=[{value:"monday",label:"Mon"},{value:"tuesday",label:"Tue"},{value:"wednesday",label:"Wed"},{value:"thursday",label:"Thu"},{value:"friday",label:"Fri"},{value:"saturday",label:"Sat"},{value:"sunday",label:"Sun"}],ne=Array.from({length:24},(l,e)=>e.toString().padStart(2,"0")),oe=["00","15","30","45"],ke=re(()=>new Date().toISOString().split("T")[0]);ze(async()=>{const l=be.id||ge.params.id;if(!l){A.value="No program ID provided.",O.value=!1;return}try{O.value=!0,A.value=null;const e=await X.getCurrentUser();if(!e.user){A.value="You must be logged in to edit programs.";return}if(P.value=await J.getProgram(l),!P.value){A.value="Program not found.";return}if(P.value.organizer_email!==e.user.email){A.value="You do not have permission to edit this program.";return}Pe(P.value)}catch(e){console.error("Error loading program:",e),A.value="Failed to load program details. Please try again."}finally{O.value=!1}}),Ne(L,l=>{l&&!T.value&&(console.log("Map container is now available, initializing map..."),we())},{immediate:!0}),Re(()=>{T.value&&T.value.remove()});function Pe(l){if(t.title=l.title||"",t.sport=l.sport||"",t.organizer_email=l.organizer_email||"",t.ageGroups=l.ageGroups||[],t.description=l.description||"",t.cost=l.cost||0,t.costUnit=l.costUnit||"per-session",t.accessibility=l.accessibility||[],t.inclusivityTags=l.inclusivityTags||[],t.maxParticipants=l.maxParticipants||20,l.schedule&&l.schedule.length>0){const e=l.schedule[0];t.schedule.days=l.schedule.map(d=>d.day.toLowerCase()),t.schedule.startHour=e.start?.split(":")[0]||"",t.schedule.startMinute=e.start?.split(":")[1]||"",t.schedule.endHour=e.end?.split(":")[0]||"",t.schedule.endMinute=e.end?.split(":")[1]||"",t.schedule.startDate=e.startDate||""}l.venue&&(t.venue.name=l.venue.name||"",t.venue.address=l.venue.address||"",t.venue.suburb=l.venue.suburb||"",t.venue.postcode=l.venue.postcode||"",t.venue.lat=l.venue.lat||null,t.venue.lng=l.venue.lng||null),l.equipment&&(t.equipment.provided=l.equipment.provided||!1,t.equipment.required=l.equipment.required||[]),l.contact&&(t.contact.email=l.contact.email||"",t.contact.phone=l.contact.phone||""),t.images=l.images||[],l.images&&l.images.length>0&&(q.value=l.images.map((e,d)=>({url:e,name:`Existing Image ${d+1}`,isExisting:!0})))}async function we(){try{if(F.accessToken="pk.eyJ1Ijoid2VpaGFuLXh1IiwiYSI6ImNtZ3BxZDRqdjFvdWkya3B5YWNsbnJmdjMifQ.78BuADj9y5fPLNfbz94dHg",!F.accessToken){console.error("Mapbox access token not found");return}if(await ve(),!L.value&&(console.log("Map container not found, waiting for DOM..."),await new Promise(e=>setTimeout(e,200)),!L.value)){console.error("Map container still not found after waiting");return}if(T.value){console.log("Map already initialized, skipping...");return}const l=t.venue.lat&&t.venue.lng?[t.venue.lng,t.venue.lat]:[144.9631,-37.8136];T.value=new F.Map({container:L.value,style:"mapbox://styles/mapbox/streets-v12",center:l,zoom:t.venue.lat&&t.venue.lng?15:10}),T.value.addControl(new F.NavigationControl,"top-right"),T.value.on("click",Ie),t.venue.lat&&t.venue.lng&&($.value=new F.Marker().setLngLat([t.venue.lng,t.venue.lat]).addTo(T.value)),console.log("Mapbox initialized successfully")}catch(l){console.error("Error initializing Mapbox:",l)}}let K=null;async function Ue(){if(!_.value.trim()||_.value.length<3){V.value=[],G.value=!1;return}K&&clearTimeout(K),K=setTimeout(async()=>{await Te()},300)}async function Te(){R.value=!0;try{const l=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(_.value)}.json?access_token=${F.accessToken}&country=AU&types=address,poi&limit=5&autocomplete=true`);if(!l.ok)throw new Error("Failed to fetch address suggestions");const e=await l.json();V.value=e.features.map(d=>({id:d.id,place_name:d.place_name,center:d.center,context:d.context||[],properties:d.properties||{}})),G.value=V.value.length>0}catch(l){console.error("Error searching addresses:",l),V.value=[],G.value=!1}finally{R.value=!1}}function ie(l){B.value=l,_.value=l.place_name,G.value=!1,j.value=!0,$.value&&$.value.remove(),$.value=new F.Marker().setLngLat(l.center).addTo(T.value),T.value.flyTo({center:l.center,zoom:15})}function $e(){if(!B.value)return;const l=Ce(B.value);t.venue.address=l.address,t.venue.suburb=l.suburb,t.venue.postcode=l.postcode,t.venue.lat=B.value.center[1],t.venue.lng=B.value.center[0],j.value=!1,p("venueAddress"),p("venueSuburb"),p("venuePostcode")}function Ce(l){const e={address:"",suburb:"",postcode:"",state:""},d=l.place_name.split(",");return d.length>0&&(e.address=d[0].trim()),l.context&&l.context.forEach(a=>{a.id.startsWith("postcode")?e.postcode=a.text:a.id.startsWith("place")?e.suburb=a.text:a.id.startsWith("region")&&(e.state=a.text)}),e}function Se(){B.value=null,j.value=!1,_.value="",$.value&&($.value.remove(),$.value=null)}function Me(){_.value="",V.value=[],G.value=!1,B.value=null,j.value=!1,$.value&&($.value.remove(),$.value=null),t.venue.address="",t.venue.suburb="",t.venue.postcode="",t.venue.lat=null,t.venue.lng=null}async function Ie(l){const{lng:e,lat:d}=l.lngLat;try{R.value=!0;const a=await _e(e,d);if(a){const y={id:`reverse-${Date.now()}`,place_name:a.place_name,center:[e,d],context:a.context||[],properties:a.properties||{}};ie(y)}}catch(a){console.error("Error with map click reverse geocoding:",a)}finally{R.value=!1}}async function _e(l,e){try{const d=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${l},${e}.json?access_token=${F.accessToken}&country=AU&types=address,poi&limit=1`);if(!d.ok)throw new Error("Failed to reverse geocode location");const a=await d.json();return a.features&&a.features.length>0?a.features[0]:null}catch(d){return console.error("Error in reverse geocoding:",d),null}}function p(l){let e="";switch(l){case"title":t.title.trim()?t.title.trim().length<3&&(e="Title must be at least 3 characters long."):e="Program title is required.";break;case"sport":t.sport||(e="Please select a sport.");break;case"ageGroups":t.ageGroups.length===0&&(e="Please select at least one age group.");break;case"description":t.description.trim()?t.description.trim().length<20?e="Description must be at least 20 characters long.":t.description.length>500&&(e="Description must not exceed 500 characters."):e="Program description is required.";break;case"cost":t.cost<0&&(e="Cost cannot be negative.");break;case"scheduleDays":t.schedule.days.length===0&&(e="Please select at least one day.");break;case"startTime":(!t.schedule.startHour||!t.schedule.startMinute)&&(e="Please select start time.");break;case"endTime":if(!t.schedule.endHour||!t.schedule.endMinute)e="Please select end time.";else if(t.schedule.startHour&&t.schedule.startMinute){const d=parseInt(t.schedule.startHour)*60+parseInt(t.schedule.startMinute);parseInt(t.schedule.endHour)*60+parseInt(t.schedule.endMinute)<=d&&(e="End time must be after start time.")}break;case"startDate":t.schedule.startDate||(e="Please select a start date.");break;case"costUnit":t.costUnit||(e="Please select a cost unit.");break;case"venueName":t.venue.name.trim()||(e="Venue name is required.");break;case"venueAddress":t.venue.address.trim()||(e="Venue address is required.");break;case"venueSuburb":t.venue.suburb.trim()||(e="Venue suburb is required.");break;case"venuePostcode":t.venue.postcode.trim()?/^\d{4}$/.test(t.venue.postcode.trim())||(e="Postcode must be 4 digits."):e="Venue postcode is required.";break;case"maxParticipants":!t.maxParticipants||t.maxParticipants<1?e="Maximum participants must be at least 1.":t.maxParticipants>1e3&&(e="Maximum participants cannot exceed 1000.");break;case"images":U.value.length>10&&(e="Maximum 10 images allowed.");break}return n[l]=e,!e}function Ae(){return p("title")&&p("sport")&&p("ageGroups")&&p("description")&&p("cost")&&p("costUnit")&&p("scheduleDays")&&p("startTime")&&p("endTime")&&p("startDate")&&p("venueName")&&p("venueAddress")&&p("venueSuburb")&&p("venuePostcode")&&p("maxParticipants")}const qe=re(()=>t.title.trim()&&t.sport&&t.ageGroups.length>0&&t.description.trim()&&t.cost>=0&&t.costUnit&&t.schedule.days.length>0&&t.schedule.startHour&&t.schedule.startMinute&&t.schedule.endHour&&t.schedule.endMinute&&t.schedule.startDate&&t.venue.name.trim()&&t.venue.address.trim()&&t.venue.suburb.trim()&&t.venue.postcode.trim()&&t.maxParticipants>0&&!n.title&&!n.sport&&!n.ageGroups&&!n.description&&!n.cost&&!n.costUnit&&!n.scheduleDays&&!n.startTime&&!n.endTime&&!n.startDate&&!n.venueName&&!n.venueAddress&&!n.venueSuburb&&!n.venuePostcode&&!n.maxParticipants);function x(l){c[l]=!0,p(l)}function f(l){c[l]&&p(l),I.value&&(I.value=""),E.value&&(E.value="")}async function Ve(){await ve();const l=[{name:"title",ref:se},{name:"sport",ref:te},{name:"description",ref:ae},{name:"cost",ref:le}];for(const{name:e,ref:d}of l)if(n[e]&&d.value){d.value.focus();break}}function Be(l){const e=Array.from(l.target.files);g.value=null;const d=[],a=5*1024*1024,y=["image/jpeg","image/jpg","image/png","image/gif"];for(const w of e){if(!y.includes(w.type)){g.value={type:"error",message:`${w.name} is not a valid image type. Please use JPG, PNG, or GIF.`};return}if(w.size>a){g.value={type:"error",message:`${w.name} is too large. Maximum size is 5MB.`};return}d.push(w)}if(q.value.length+d.length>10){g.value={type:"error",message:"Maximum 10 images allowed. Please remove some images first."};return}U.value.push(...d),d.forEach(w=>{const h=new FileReader;h.onload=W=>{q.value.push({url:W.target.result,name:w.name,file:w,isExisting:!1})},h.readAsDataURL(w)}),d.length>0&&(g.value={type:"success",message:`${d.length} image(s) ready for upload. Images will be uploaded when you update the program.`},setTimeout(()=>{g.value=null},5e3)),p("images")}function Fe(l){const e=q.value[l];if(!e.isExisting&&e.file){const d=U.value.findIndex(a=>a===e.file);d!==-1&&U.value.splice(d,1)}q.value.splice(l,1),n.images="",g.value={type:"success",message:"Image removed successfully."},setTimeout(()=>{g.value=null},2e3)}async function Ee(){if(I.value="",E.value="",!Ae()){await Ve();return}z.value=!0;try{if(!(await X.getCurrentUser()).user){I.value="You must be logged in to update programs.";return}const e=[];if(U.value.length>0){g.value={type:"uploading",message:`Uploading ${U.value.length} image(s) to storage...`};for(let h=0;h<U.value.length;h++){const W=U.value[h];try{const Q=await J.uploadImageToS3(W,P.value.id);e.push(Q.url),g.value={type:"uploading",message:`Uploading images... (${h+1}/${U.value.length})`}}catch(Q){console.error(`Failed to upload ${W.name}:`,Q)}}g.value={type:"success",message:`${e.length} of ${U.value.length} image(s) uploaded successfully.`},setTimeout(()=>{g.value=null},3e3)}const a=[...q.value.filter(h=>h.isExisting).map(h=>h.url),...e],y=t.schedule.days.map(h=>({day:h.charAt(0).toUpperCase()+h.slice(1),start:`${t.schedule.startHour}:${t.schedule.startMinute}`,end:`${t.schedule.endHour}:${t.schedule.endMinute}`,frequency:"weekly",startDate:t.schedule.startDate,endDate:null})),Y={title:t.title.trim(),sport:t.sport,organizer_email:t.organizer_email,description:t.description.trim(),ageGroups:t.ageGroups,cost:t.cost,costUnit:t.costUnit,accessibility:t.accessibility,inclusivityTags:t.inclusivityTags,schedule:y,venue:{name:t.venue.name.trim(),address:t.venue.address.trim(),suburb:t.venue.suburb.trim(),postcode:t.venue.postcode.trim(),lat:t.venue.lat,lng:t.venue.lng},equipment:{provided:t.equipment.provided,required:t.equipment.required},contact:{email:t.contact.email.trim(),phone:t.contact.phone.trim()},images:a,maxParticipants:t.maxParticipants};console.log("Updating program data:",Y);const w=await J.updateProgram(P.value.id,Y);console.log("Program updated successfully:",w),E.value="Program updated successfully! Your changes have been saved.",setTimeout(()=>{ee.push({name:"organizer-account"})},2e3)}catch(l){I.value=l.message||"Failed to update program. Please try again.",console.error("Update program error:",l)}finally{z.value=!1}}async function Ge(){if(P.value){D.value=!0;try{const l=await X.getCurrentUser();if(!l.user){I.value="You must be logged in to cancel programs.";return}const e=await J.cancelProgram(P.value.id,l.user.email);console.log("Program cancelled successfully:",e),E.value=`Program "${P.value.title}" has been cancelled successfully. Participants have been notified.`,N.value=!1,setTimeout(()=>{ee.push({name:"organizer-account"})},3e3)}catch(l){I.value=l.message||"Failed to cancel program. Please try again.",console.error("Cancel program error:",l),N.value=!1}finally{D.value=!1}}}return(l,e)=>{const d=He("RouterLink");return i(),o("div",We,[s("div",Je,[s("div",Ke,[s("div",Qe,[de(d,{to:{name:"organizer-account"},class:"btn btn-outline-secondary me-3"},{default:ue(()=>[...e[51]||(e[51]=[s("i",{class:"bi bi-arrow-left me-2","aria-hidden":"true"},null,-1),r(" Back to Dashboard ",-1)])]),_:1}),e[53]||(e[53]=s("div",{class:"flex-grow-1"},[s("h1",{class:"h3 mb-1"},"Edit Program"),s("p",{class:"text-muted mb-0"},"Update your community sports program details")],-1)),s("div",Ze,[s("button",{onClick:e[0]||(e[0]=a=>N.value=!0),class:"btn btn-outline-danger",disabled:z.value||D.value},[...e[52]||(e[52]=[s("i",{class:"bi bi-x-circle me-2"},null,-1),r(" Cancel Program ",-1)])],8,Xe)])]),O.value?(i(),o("div",es,[...e[54]||(e[54]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading program...")],-1),s("p",{class:"mt-2 mb-0 text-muted"},"Loading program details...",-1)])])):A.value?(i(),o("div",ss,[e[55]||(e[55]=s("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),r(" "+u(A.value),1)])):P.value?(i(),o("div",as,[E.value?(i(),o("div",ls,[e[60]||(e[60]=s("i",{class:"bi bi-check-circle-fill me-2","aria-hidden":"true"},null,-1)),r(" "+u(E.value),1)])):m("",!0),I.value?(i(),o("div",ns,[e[61]||(e[61]=s("i",{class:"bi bi-exclamation-triangle-fill me-2","aria-hidden":"true"},null,-1)),r(" "+u(I.value),1)])):m("",!0),N.value?(i(),o("div",os,[s("div",is,[s("div",rs,[s("div",ds,[e[62]||(e[62]=s("h5",{class:"modal-title"},"Cancel Program",-1)),s("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=a=>N.value=!1)})]),s("div",us,[e[65]||(e[65]=s("div",{class:"alert alert-warning"},[s("i",{class:"bi bi-exclamation-triangle me-2"}),s("strong",null,"Warning:"),r(" This action cannot be undone. ")],-1)),s("p",null,[e[63]||(e[63]=r('Are you sure you want to cancel the program "',-1)),s("strong",null,u(P.value.title),1),e[64]||(e[64]=r('"?',-1))]),e[66]||(e[66]=s("p",{class:"text-muted small"},[r(" This will: "),s("br"),r("• Send notifications to all participants "),s("br"),r("• Remove all existing appointments "),s("br"),r("• Mark the program as cancelled ")],-1))]),s("div",cs,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=a=>N.value=!1)}," Keep Program "),s("button",{type:"button",class:"btn btn-danger",onClick:Ge,disabled:D.value},[D.value?(i(),o("span",vs)):(i(),o("i",ps)),r(" "+u(D.value?"Canceling...":"Yes, Cancel Program"),1)],8,ms)])])])])):m("",!0),s("form",{onSubmit:Le(Ee,["prevent"]),novalidate:""},[s("div",gs,[s("div",bs,[s("div",fs,[e[82]||(e[82]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-info-circle me-2","aria-hidden":"true"}),r(" Program Information ")])],-1)),s("div",ys,[s("div",hs,[e[67]||(e[67]=s("label",{for:"title",class:"form-label"},[r(" Program Title "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"title",ref_key:"titleRef",ref:se,type:"text",class:k(["form-control",{"is-invalid":c.title&&n.title}]),"onUpdate:modelValue":e[3]||(e[3]=a=>t.title=a),onBlur:e[4]||(e[4]=a=>x("title")),onInput:e[5]||(e[5]=a=>f("title")),placeholder:"e.g. Beginner's Tennis Program",required:""},null,34),[[C,t.title,void 0,{trim:!0}]]),c.title&&n.title?(i(),o("div",xs,u(n.title),1)):m("",!0)]),s("div",ks,[e[69]||(e[69]=s("label",{for:"sport",class:"form-label"},[r(" Sport "),s("span",{class:"text-danger"},"*")],-1)),b(s("select",{id:"sport",ref_key:"sportRef",ref:te,class:k(["form-select",{"is-invalid":c.sport&&n.sport}]),"onUpdate:modelValue":e[6]||(e[6]=a=>t.sport=a),onBlur:e[7]||(e[7]=a=>x("sport")),onChange:e[8]||(e[8]=a=>f("sport")),required:""},[e[68]||(e[68]=s("option",{value:""},"Select a sport",-1)),(i(),o(S,null,M(fe,a=>s("option",{key:a,value:a},u(a),9,Ps)),64))],34),[[H,t.sport]]),c.sport&&n.sport?(i(),o("div",ws,u(n.sport),1)):m("",!0)]),s("div",Us,[e[70]||(e[70]=s("label",{class:"form-label"},[r(" Age Groups "),s("span",{class:"text-danger"},"*")],-1)),s("div",Ts,[(i(),o(S,null,M(ye,a=>s("div",{key:a,class:"col-md-4 col-6"},[s("div",$s,[b(s("input",{id:`age-${a}`,type:"checkbox",class:"form-check-input",value:a,"onUpdate:modelValue":e[9]||(e[9]=y=>t.ageGroups=y),onChange:e[10]||(e[10]=y=>f("ageGroups"))},null,40,Cs),[[me,t.ageGroups]]),s("label",{for:`age-${a}`,class:"form-check-label"},u(a),9,Ss)])])),64))]),c.ageGroups&&n.ageGroups?(i(),o("div",Ms,u(n.ageGroups),1)):m("",!0)]),s("div",Is,[e[71]||(e[71]=s("label",{for:"description",class:"form-label"},[r(" Description "),s("span",{class:"text-danger"},"*")],-1)),b(s("textarea",{id:"description",ref_key:"descriptionRef",ref:ae,rows:"4",class:k(["form-control",{"is-invalid":c.description&&n.description}]),"onUpdate:modelValue":e[11]||(e[11]=a=>t.description=a),onBlur:e[12]||(e[12]=a=>x("description")),onInput:e[13]||(e[13]=a=>f("description")),placeholder:"Describe your program, what participants can expect, skill level requirements, equipment needed, etc.",required:""},null,34),[[C,t.description,void 0,{trim:!0}]]),c.description&&n.description?(i(),o("div",_s,u(n.description),1)):m("",!0),s("div",As,u(t.description.length)+"/500 characters",1)]),s("div",qs,[s("div",Vs,[e[73]||(e[73]=s("label",{for:"cost",class:"form-label"},[r(" Cost "),s("span",{class:"text-danger"},"*")],-1)),s("div",Bs,[e[72]||(e[72]=s("span",{class:"input-group-text"},"$",-1)),b(s("input",{id:"cost",ref_key:"costRef",ref:le,type:"number",step:"0.01",min:"0",class:k(["form-control",{"is-invalid":c.cost&&n.cost}]),"onUpdate:modelValue":e[14]||(e[14]=a=>t.cost=a),onBlur:e[15]||(e[15]=a=>x("cost")),onInput:e[16]||(e[16]=a=>f("cost")),placeholder:"0.00",required:""},null,34),[[C,t.cost,void 0,{number:!0}]])]),c.cost&&n.cost?(i(),o("div",Fs,u(n.cost),1)):m("",!0),e[74]||(e[74]=s("div",{class:"form-text"},"Enter 0 for free programs",-1))]),s("div",Es,[e[75]||(e[75]=s("label",{for:"cost-unit",class:"form-label"},[r(" Cost Unit "),s("span",{class:"text-danger"},"*")],-1)),b(s("select",{id:"cost-unit",class:k(["form-select",{"is-invalid":c.costUnit&&n.costUnit}]),"onUpdate:modelValue":e[17]||(e[17]=a=>t.costUnit=a),onBlur:e[18]||(e[18]=a=>x("costUnit")),onChange:e[19]||(e[19]=a=>f("costUnit")),required:""},[(i(),o(S,null,M(he,a=>s("option",{key:a,value:a},u(a),9,Gs)),64))],34),[[H,t.costUnit]]),c.costUnit&&n.costUnit?(i(),o("div",zs,u(n.costUnit),1)):m("",!0)])]),s("div",Ds,[e[80]||(e[80]=s("label",{for:"program-images",class:"form-label"}," Program Images ",-1)),s("input",{id:"program-images",type:"file",class:k(["form-control",{"is-invalid":c.images&&n.images}]),multiple:"",accept:"image/*",onChange:Be,onBlur:e[20]||(e[20]=a=>x("images"))},null,34),c.images&&n.images?(i(),o("div",Ns,u(n.images),1)):m("",!0),e[81]||(e[81]=s("div",{class:"form-text"},"Upload images to showcase your program (JPG, PNG, GIF - Max 5MB each, up to 10 images)",-1)),q.value.length>0?(i(),o("div",Rs,[s("div",Hs,[(i(!0),o(S,null,M(q.value,(a,y)=>(i(),o("div",{key:y,class:"col-6 col-md-4 col-lg-3"},[s("div",Ls,[s("img",{src:a.url,alt:`Preview ${y+1}`,class:"img-thumbnail w-100",style:{height:"100px","object-fit":"cover"}},null,8,js),s("button",{type:"button",class:"btn btn-danger btn-sm position-absolute top-0 end-0 m-1",onClick:Y=>Fe(y),"aria-label":`Remove image ${y+1}`},[...e[76]||(e[76]=[s("i",{class:"bi bi-x","aria-hidden":"true"},null,-1)])],8,Os),s("div",Ys,u(a.name),1)])]))),128))])])):m("",!0),g.value?(i(),o("div",Ws,[g.value.type==="uploading"?(i(),o("div",Js,[...e[77]||(e[77]=[s("i",{class:"bi bi-cloud-arrow-up me-1","aria-hidden":"true"},null,-1),r(" Uploading images... ",-1)])])):g.value.type==="success"?(i(),o("div",Ks,[e[78]||(e[78]=s("i",{class:"bi bi-check-circle me-1","aria-hidden":"true"},null,-1)),r(" "+u(g.value.message),1)])):g.value.type==="error"?(i(),o("div",Qs,[e[79]||(e[79]=s("i",{class:"bi bi-exclamation-triangle me-1","aria-hidden":"true"},null,-1)),r(" "+u(g.value.message),1)])):m("",!0)])):m("",!0)])])]),s("div",Zs,[e[101]||(e[101]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-geo-alt me-2","aria-hidden":"true"}),r(" Venue Information ")])],-1)),s("div",Xs,[s("div",et,[e[83]||(e[83]=s("label",{for:"venue-name",class:"form-label"},[r(" Venue Name "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"venue-name",type:"text",class:k(["form-control",{"is-invalid":c.venueName&&n.venueName}]),"onUpdate:modelValue":e[21]||(e[21]=a=>t.venue.name=a),onBlur:e[22]||(e[22]=a=>x("venueName")),onInput:e[23]||(e[23]=a=>f("venueName")),placeholder:"e.g. Carlton Youth Centre",required:""},null,34),[[C,t.venue.name,void 0,{trim:!0}]]),c.venueName&&n.venueName?(i(),o("div",st,u(n.venueName),1)):m("",!0)]),s("div",tt,[e[86]||(e[86]=s("label",{for:"address-search",class:"form-label"},[r(" Address Search "),s("span",{class:"text-danger"},"*")],-1)),s("div",at,[s("div",lt,[b(s("input",{id:"address-search",type:"text",class:"form-control","onUpdate:modelValue":e[24]||(e[24]=a=>_.value=a),onInput:Ue,onFocus:e[25]||(e[25]=a=>G.value=V.value.length>0),placeholder:"Start typing an address...",autocomplete:"off"},null,544),[[C,_.value]]),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:Me,disabled:!_.value},[...e[84]||(e[84]=[s("i",{class:"bi bi-x-lg"},null,-1)])],8,nt)]),R.value?(i(),o("div",ot,[...e[85]||(e[85]=[s("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Searching...")],-1)])])):m("",!0),G.value&&V.value.length>0?(i(),o("div",it,[(i(!0),o(S,null,M(V.value,a=>(i(),o("div",{key:a.id,class:"p-3 border-bottom suggestion-item",onClick:y=>ie(a),style:{cursor:"pointer"}},[s("div",dt,u(a.place_name),1)],8,rt))),128))])):m("",!0)]),e[87]||(e[87]=s("div",{class:"form-text"}," Search for your venue address. Select from the suggestions to auto-fill address details. ",-1))]),j.value?(i(),o("div",ut,[s("div",ct,[e[92]||(e[92]=s("i",{class:"bi bi-info-circle me-2"},null,-1)),s("div",mt,[e[88]||(e[88]=s("strong",null,"Selected Address:",-1)),e[89]||(e[89]=s("br",null,null,-1)),r(" "+u(B.value.place_name),1)]),s("div",{class:"ms-3"},[s("button",{type:"button",class:"btn btn-success btn-sm me-2",onClick:$e},[...e[90]||(e[90]=[s("i",{class:"bi bi-check-lg me-1"},null,-1),r("Confirm ",-1)])]),s("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:Se},[...e[91]||(e[91]=[s("i",{class:"bi bi-x-lg me-1"},null,-1),r("Cancel ",-1)])])])])])):m("",!0),s("div",vt,[e[94]||(e[94]=s("label",{class:"form-label"},"Location Map",-1)),s("div",pt,[s("div",{ref_key:"mapContainer",ref:L,class:"map-container border rounded",style:{height:"300px",width:"100%"}},null,512),R.value?(i(),o("div",gt,[...e[93]||(e[93]=[s("div",{class:"text-center"},[s("div",{class:"spinner-border text-primary mb-2",role:"status"},[s("span",{class:"visually-hidden"},"Finding address...")]),s("div",{class:"small text-muted"},"Finding address...")],-1)])])):m("",!0)]),e[95]||(e[95]=je('<div class="form-text" data-v-87a56346><i class="bi bi-info-circle me-1" data-v-87a56346></i><strong data-v-87a56346>Interactive Map:</strong> Click anywhere on the map to automatically find the address at that location, or use the address search above to find a specific address. </div><div class="mt-2" data-v-87a56346><small class="text-muted" data-v-87a56346><i class="bi bi-cursor me-1" data-v-87a56346></i> Tip: The map cursor changes to a crosshair to indicate it&#39;s clickable </small></div>',2))]),s("div",bt,[s("div",ft,[e[96]||(e[96]=s("label",{for:"venue-address",class:"form-label"},[r(" Street Address "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"venue-address",type:"text",class:k(["form-control",{"is-invalid":c.venueAddress&&n.venueAddress}]),"onUpdate:modelValue":e[26]||(e[26]=a=>t.venue.address=a),onBlur:e[27]||(e[27]=a=>x("venueAddress")),onInput:e[28]||(e[28]=a=>f("venueAddress")),placeholder:"e.g. 88 Rathdowne St",required:""},null,34),[[C,t.venue.address,void 0,{trim:!0}]]),c.venueAddress&&n.venueAddress?(i(),o("div",yt,u(n.venueAddress),1)):m("",!0),e[97]||(e[97]=s("div",{class:"form-text"},"Auto-filled from address search or manually editable",-1))]),s("div",ht,[e[98]||(e[98]=s("label",{for:"venue-suburb",class:"form-label"},[r(" Suburb "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"venue-suburb",type:"text",class:k(["form-control",{"is-invalid":c.venueSuburb&&n.venueSuburb}]),"onUpdate:modelValue":e[29]||(e[29]=a=>t.venue.suburb=a),onBlur:e[30]||(e[30]=a=>x("venueSuburb")),onInput:e[31]||(e[31]=a=>f("venueSuburb")),placeholder:"e.g. Carlton",required:""},null,34),[[C,t.venue.suburb,void 0,{trim:!0}]]),c.venueSuburb&&n.venueSuburb?(i(),o("div",xt,u(n.venueSuburb),1)):m("",!0)]),s("div",kt,[e[99]||(e[99]=s("label",{for:"venue-postcode",class:"form-label"},[r(" Postcode "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"venue-postcode",type:"text",class:k(["form-control",{"is-invalid":c.venuePostcode&&n.venuePostcode}]),"onUpdate:modelValue":e[32]||(e[32]=a=>t.venue.postcode=a),onBlur:e[33]||(e[33]=a=>x("venuePostcode")),onInput:e[34]||(e[34]=a=>f("venuePostcode")),placeholder:"e.g. 3053",maxlength:"4",required:""},null,34),[[C,t.venue.postcode,void 0,{trim:!0}]]),c.venuePostcode&&n.venuePostcode?(i(),o("div",Pt,u(n.venuePostcode),1)):m("",!0)])]),t.venue.lat&&t.venue.lng?(i(),o("div",wt,[s("small",Ut,[e[100]||(e[100]=s("i",{class:"bi bi-geo me-1"},null,-1)),r(" Coordinates: "+u(t.venue.lat.toFixed(6))+", "+u(t.venue.lng.toFixed(6)),1)])])):m("",!0)])])]),s("div",Tt,[s("div",$t,[e[112]||(e[112]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-calendar-event me-2","aria-hidden":"true"}),r(" Schedule & Details ")])],-1)),s("div",Ct,[s("div",St,[e[102]||(e[102]=s("label",{class:"form-label"},[r(" Days "),s("span",{class:"text-danger"},"*")],-1)),s("div",Mt,[(i(),o(S,null,M(xe,a=>s("div",{key:a.value,class:"form-check"},[b(s("input",{id:`day-${a.value}`,type:"checkbox",class:"form-check-input",value:a.value,"onUpdate:modelValue":e[35]||(e[35]=y=>t.schedule.days=y),onChange:e[36]||(e[36]=y=>f("scheduleDays"))},null,40,It),[[me,t.schedule.days]]),s("label",{for:`day-${a.value}`,class:"form-check-label"},u(a.label),9,_t)])),64))]),c.scheduleDays&&n.scheduleDays?(i(),o("div",At,u(n.scheduleDays),1)):m("",!0)]),s("div",qt,[e[105]||(e[105]=s("label",{for:"start-time",class:"form-label"},[r(" Start Time "),s("span",{class:"text-danger"},"*")],-1)),s("div",Vt,[s("div",Bt,[b(s("select",{id:"start-hour",class:"form-select form-select-sm","onUpdate:modelValue":e[37]||(e[37]=a=>t.schedule.startHour=a),onChange:e[38]||(e[38]=a=>f("startTime"))},[e[103]||(e[103]=s("option",{value:""},"Hour",-1)),(i(!0),o(S,null,M(ce(ne),a=>(i(),o("option",{key:a,value:a},u(a),9,Ft))),128))],544),[[H,t.schedule.startHour]])]),s("div",Et,[b(s("select",{id:"start-minute",class:"form-select form-select-sm","onUpdate:modelValue":e[39]||(e[39]=a=>t.schedule.startMinute=a),onChange:e[40]||(e[40]=a=>f("startTime"))},[e[104]||(e[104]=s("option",{value:""},"Min",-1)),(i(),o(S,null,M(oe,a=>s("option",{key:a,value:a},u(a),9,Gt)),64))],544),[[H,t.schedule.startMinute]])])]),c.startTime&&n.startTime?(i(),o("div",zt,u(n.startTime),1)):m("",!0)]),s("div",Dt,[e[108]||(e[108]=s("label",{for:"end-time",class:"form-label"},[r(" End Time "),s("span",{class:"text-danger"},"*")],-1)),s("div",Nt,[s("div",Rt,[b(s("select",{id:"end-hour",class:"form-select form-select-sm","onUpdate:modelValue":e[41]||(e[41]=a=>t.schedule.endHour=a),onChange:e[42]||(e[42]=a=>f("endTime"))},[e[106]||(e[106]=s("option",{value:""},"Hour",-1)),(i(!0),o(S,null,M(ce(ne),a=>(i(),o("option",{key:a,value:a},u(a),9,Ht))),128))],544),[[H,t.schedule.endHour]])]),s("div",Lt,[b(s("select",{id:"end-minute",class:"form-select form-select-sm","onUpdate:modelValue":e[43]||(e[43]=a=>t.schedule.endMinute=a),onChange:e[44]||(e[44]=a=>f("endTime"))},[e[107]||(e[107]=s("option",{value:""},"Min",-1)),(i(),o(S,null,M(oe,a=>s("option",{key:a,value:a},u(a),9,jt)),64))],544),[[H,t.schedule.endMinute]])])]),c.endTime&&n.endTime?(i(),o("div",Ot,u(n.endTime),1)):m("",!0)]),s("div",Yt,[e[109]||(e[109]=s("label",{for:"start-date",class:"form-label"},[r(" Start Date "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"start-date",type:"date",class:k(["form-control",{"is-invalid":c.startDate&&n.startDate}]),"onUpdate:modelValue":e[45]||(e[45]=a=>t.schedule.startDate=a),onBlur:e[46]||(e[46]=a=>x("startDate")),onChange:e[47]||(e[47]=a=>f("startDate")),min:ke.value,required:""},null,42,Wt),[[C,t.schedule.startDate]]),c.startDate&&n.startDate?(i(),o("div",Jt,u(n.startDate),1)):m("",!0)]),s("div",Kt,[e[110]||(e[110]=s("label",{for:"max-participants",class:"form-label"},[r(" Max Participants "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"max-participants",type:"number",min:"1",max:"1000",class:k(["form-control",{"is-invalid":c.maxParticipants&&n.maxParticipants}]),"onUpdate:modelValue":e[48]||(e[48]=a=>t.maxParticipants=a),onBlur:e[49]||(e[49]=a=>x("maxParticipants")),onInput:e[50]||(e[50]=a=>f("maxParticipants")),placeholder:"20",required:""},null,34),[[C,t.maxParticipants,void 0,{number:!0}]]),c.maxParticipants&&n.maxParticipants?(i(),o("div",Qt,u(n.maxParticipants),1)):m("",!0),e[111]||(e[111]=s("div",{class:"form-text"},"Maximum number of participants allowed",-1))]),s("button",{type:"submit",class:"btn btn-success w-100",disabled:z.value||!qe.value},[z.value?(i(),o("span",Xt)):(i(),o("i",ea)),r(" "+u(z.value?"Updating...":"Update Program"),1)],8,Zt)])])])])],32)])):(i(),o("div",ts,[e[57]||(e[57]=s("i",{class:"bi bi-exclamation-triangle display-1 text-muted mb-4"},null,-1)),e[58]||(e[58]=s("h4",{class:"mb-3"},"Program Not Found",-1)),e[59]||(e[59]=s("p",{class:"text-muted mb-4"}," The program you're looking for doesn't exist or you don't have permission to edit it. ",-1)),de(d,{to:{name:"organizer-account"},class:"btn btn-primary"},{default:ue(()=>[...e[56]||(e[56]=[s("i",{class:"bi bi-arrow-left me-2"},null,-1),r("Back to Dashboard ",-1)])]),_:1})]))])])])}}},oa=Ye(sa,[["__scopeId","data-v-87a56346"]]);export{oa as default};
