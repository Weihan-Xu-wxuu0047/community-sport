import{i as _,r as m,m as S,c as d,a as s,f as p,e as n,t as c,z as I,k as b,L as C,v as h,n as P,M as T,b as D,w as F,d as L,s as O,h as u,G as Y,p as J}from"./index-CanbGPVk.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"container py-4 py-lg-5"},H={class:"row justify-content-center"},W={class:"col-12 col-md-8 col-lg-6"},Z={class:"card shadow-sm"},K={class:"card-body p-4"},Q={key:0,class:"alert alert-success",role:"alert"},X={key:1,class:"alert alert-info",role:"alert"},ee={key:2,class:"alert alert-danger",role:"alert"},se={class:"mb-4"},re={class:"row g-2"},ae={class:"col-6"},oe={class:"col-6"},ie={class:"mb-3"},le=["aria-invalid","aria-describedby"],te={key:0,id:"userName-error",class:"invalid-feedback"},ne={class:"mb-3"},de=["aria-invalid","aria-describedby"],ue={key:0,id:"email-error",class:"invalid-feedback"},me={class:"mb-3"},ce={class:"input-group"},fe=["type","aria-invalid","aria-describedby"],pe=["aria-label"],ve={key:0,id:"password-error",class:"invalid-feedback"},be={key:1,id:"password-help",class:"form-text"},we={class:"mb-4"},ye=["aria-invalid","aria-describedby"],ge={key:0,id:"confirm-password-error",class:"invalid-feedback"},Pe=["disabled"],ke={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Ne={class:"text-center"},xe={class:"mb-0"},_e={__name:"RegisterPage",setup(he){const U=O(),r=_({role:"member",userName:"",email:"",password:"",confirmPassword:""}),t=_({userName:!1,email:!1,password:!1,confirmPassword:!1}),a=_({userName:"",email:"",password:"",confirmPassword:""}),w=m(!1),y=m(!1),g=m(""),f=m(""),k=m(!1),R=m(null),V=m(null),$=m(null),q=m(null),z=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i;function v(i){const e=r[i]?.trim?.()??"";let l="";switch(i){case"userName":e?e.length<2?l="User name must be at least 2 characters long.":e.length>30?l="User name must be less than 30 characters.":/^[a-zA-Z0-9\s_-]+$/.test(e)||(l="User name can only contain letters, numbers, spaces, underscores, and hyphens."):l="User name is required.";break;case"email":e?z.test(e)||(l="Please enter a valid email address."):l="Email is required.";break;case"password":e?e.length<6&&(l="Password must be at least 6 characters long."):l="Password is required.";break;case"confirmPassword":e?e!==r.password&&(l="Passwords do not match."):l="Please confirm your password.";break}return a[i]=l,!l}function A(){const i=v("userName"),e=v("email"),l=v("password"),o=v("confirmPassword");return i&&e&&l&&o}const M=S(()=>r.role&&r.userName&&r.email&&r.password&&r.confirmPassword&&!a.userName&&!a.email&&!a.password&&!a.confirmPassword);function N(i){t[i]=!0,v(i)}function x(i){t[i]&&v(i),f.value&&(f.value="")}async function B(){await J();const i=[{name:"userName",ref:R},{name:"email",ref:V},{name:"password",ref:$},{name:"confirmPassword",ref:q}];for(const{name:e,ref:l}of i)if(a[e]&&l.value){l.value.focus();break}}async function E(){if(f.value="",g.value="",!A()){await B();return}w.value=!0;try{const i=await Y.register(r.userName,r.email,r.password,r.role);i.availableRoles&&i.availableRoles.length>1?(g.value=`${r.role} role added successfully! You now have access to both member and organizer features.`,k.value=!0):g.value=`Account created successfully! Welcome to Community Sport as a ${r.role}.`,setTimeout(()=>{const e=r.role==="organizer"?"organizer-account":"member-account";U.push({name:e})},2e3)}catch(i){i.message.includes("email-already-in-use")?f.value="This email is already registered. Please sign in first, then you can add additional roles from your account page.":f.value=i.message,console.error("Registration error:",i)}finally{w.value=!1}}return(i,e)=>{const l=L("RouterLink");return u(),d("div",G,[s("div",H,[s("div",W,[s("div",Z,[s("div",K,[e[29]||(e[29]=s("div",{class:"text-center mb-4"},[s("h1",{class:"h3 mb-2"},"Create Account"),s("p",{class:"text-muted"},"Join our community sport platform")],-1)),g.value?(u(),d("div",Q,[e[15]||(e[15]=s("i",{class:"bi bi-check-circle-fill me-2","aria-hidden":"true"},null,-1)),n(" "+c(g.value),1)])):p("",!0),k.value?(u(),d("div",X,[e[16]||(e[16]=s("i",{class:"bi bi-info-circle-fill me-2","aria-hidden":"true"},null,-1)),n(" You're already registered! You can add "+c(r.role)+" role to your existing account. ",1)])):p("",!0),f.value?(u(),d("div",ee,[e[17]||(e[17]=s("i",{class:"bi bi-exclamation-triangle-fill me-2","aria-hidden":"true"},null,-1)),n(" "+c(f.value),1)])):p("",!0),s("form",{onSubmit:I(E,["prevent"]),novalidate:""},[s("div",se,[e[20]||(e[20]=s("label",{class:"form-label fw-semibold"},"Register as:",-1)),s("div",re,[s("div",ae,[b(s("input",{type:"radio",class:"btn-check",name:"role",id:"role-member",value:"member","onUpdate:modelValue":e[0]||(e[0]=o=>r.role=o),required:""},null,512),[[C,r.role]]),e[18]||(e[18]=s("label",{class:"btn btn-outline-primary w-100",for:"role-member"},[s("i",{class:"bi bi-person me-2","aria-hidden":"true"}),n(" Member ")],-1))]),s("div",oe,[b(s("input",{type:"radio",class:"btn-check",name:"role",id:"role-organizer",value:"organizer","onUpdate:modelValue":e[1]||(e[1]=o=>r.role=o),required:""},null,512),[[C,r.role]]),e[19]||(e[19]=s("label",{class:"btn btn-outline-primary w-100",for:"role-organizer"},[s("i",{class:"bi bi-people me-2","aria-hidden":"true"}),n(" Organizer ")],-1))])]),e[21]||(e[21]=s("div",{class:"form-text mt-2"},[s("strong",null,"Member:"),n(" Join programs and events"),s("br"),s("strong",null,"Organizer:"),n(" Create and manage programs ")],-1))]),s("div",ie,[e[22]||(e[22]=s("label",{for:"userName",class:"form-label"},[n(" User Name "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"userName",ref_key:"userNameRef",ref:R,type:"text",class:P(["form-control",{"is-invalid":t.userName&&a.userName}]),"onUpdate:modelValue":e[2]||(e[2]=o=>r.userName=o),onBlur:e[3]||(e[3]=o=>N("userName")),onInput:e[4]||(e[4]=o=>x("userName")),"aria-required":"true","aria-invalid":t.userName&&!!a.userName,"aria-describedby":t.userName&&a.userName?"userName-error":void 0,placeholder:"Enter your user name",autocomplete:"username",required:""},null,42,le),[[h,r.userName,void 0,{trim:!0}]]),t.userName&&a.userName?(u(),d("div",te,c(a.userName),1)):p("",!0),e[23]||(e[23]=s("div",{class:"form-text"}," This will be displayed as your profile name ",-1))]),s("div",ne,[e[24]||(e[24]=s("label",{for:"email",class:"form-label"},[n(" Email "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"email",ref_key:"emailRef",ref:V,type:"email",class:P(["form-control",{"is-invalid":t.email&&a.email}]),"onUpdate:modelValue":e[5]||(e[5]=o=>r.email=o),onBlur:e[6]||(e[6]=o=>N("email")),onInput:e[7]||(e[7]=o=>x("email")),"aria-required":"true","aria-invalid":t.email&&!!a.email,"aria-describedby":t.email&&a.email?"email-error":void 0,placeholder:"you@example.com",autocomplete:"email",required:""},null,42,de),[[h,r.email,void 0,{trim:!0}]]),t.email&&a.email?(u(),d("div",ue,c(a.email),1)):p("",!0)]),s("div",me,[e[25]||(e[25]=s("label",{for:"password",class:"form-label"},[n(" Password "),s("span",{class:"text-danger"},"*")],-1)),s("div",ce,[b(s("input",{id:"password",ref_key:"passwordRef",ref:$,type:y.value?"text":"password",class:P(["form-control",{"is-invalid":t.password&&a.password}]),"onUpdate:modelValue":e[8]||(e[8]=o=>r.password=o),onBlur:e[9]||(e[9]=o=>N("password")),onInput:e[10]||(e[10]=o=>x("password")),"aria-required":"true","aria-invalid":t.password&&!!a.password,"aria-describedby":t.password&&a.password?"password-error":"password-help",placeholder:"Enter your password",autocomplete:"new-password",required:""},null,42,fe),[[T,r.password]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[11]||(e[11]=o=>y.value=!y.value),"aria-label":y.value?"Hide password":"Show password"},[s("i",{class:P(y.value?"bi bi-eye-slash":"bi bi-eye"),"aria-hidden":"true"},null,2)],8,pe)]),t.password&&a.password?(u(),d("div",ve,c(a.password),1)):(u(),d("div",be," Password must be at least 6 characters long "))]),s("div",we,[e[26]||(e[26]=s("label",{for:"confirmPassword",class:"form-label"},[n(" Confirm Password "),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{id:"confirmPassword",ref_key:"confirmPasswordRef",ref:q,type:"password",class:P(["form-control",{"is-invalid":t.confirmPassword&&a.confirmPassword}]),"onUpdate:modelValue":e[12]||(e[12]=o=>r.confirmPassword=o),onBlur:e[13]||(e[13]=o=>N("confirmPassword")),onInput:e[14]||(e[14]=o=>x("confirmPassword")),"aria-required":"true","aria-invalid":t.confirmPassword&&!!a.confirmPassword,"aria-describedby":t.confirmPassword&&a.confirmPassword?"confirm-password-error":void 0,placeholder:"Confirm your password",autocomplete:"new-password",required:""},null,42,ye),[[h,r.confirmPassword]]),t.confirmPassword&&a.confirmPassword?(u(),d("div",ge,c(a.confirmPassword),1)):p("",!0)]),s("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:w.value||!M.value},[w.value?(u(),d("span",ke)):p("",!0),n(" "+c(w.value?k.value?"Adding Role...":"Creating Account...":k.value?`Add ${r.role} Role`:"Create Account"),1)],8,Pe),s("div",Ne,[s("p",xe,[e[28]||(e[28]=n(" Already have an account? ",-1)),D(l,{to:{name:"login"},class:"link-primary"},{default:F(()=>[...e[27]||(e[27]=[n("Sign in",-1)])]),_:1})])])],32)])])])])])}}},$e=j(_e,[["__scopeId","data-v-1279d486"]]);export{$e as default};
