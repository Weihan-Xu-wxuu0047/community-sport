import{i as y,r as u,m as q,c as p,a,K as C,f,e as n,t as g,z as I,k as w,L as V,v as $,n as x,M as B,b as E,w as U,d as D,s as A,h as v,G as F,p as O}from"./index-CanbGPVk.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"container py-4 py-lg-5"},H={class:"row justify-content-center"},J={class:"col-12 col-md-8 col-lg-6"},K={class:"card shadow-sm"},N={class:"card-body p-4"},W={key:0,class:"alert alert-danger",role:"alert"},Q={class:"mb-4"},X={class:"row g-2"},Y={class:"col-6"},Z={class:"col-6"},ee={class:"mb-3"},ae=["aria-invalid","aria-describedby"],se={key:0,id:"email-error",class:"invalid-feedback"},ie={class:"mb-4"},te={class:"input-group"},oe=["type","aria-invalid","aria-describedby"],re=["aria-label"],le={key:0,id:"password-error",class:"invalid-feedback"},ne=["disabled"],de={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},ce={class:"text-center"},me={class:"mb-0"},ue={__name:"LoginPage",setup(pe){const P=A(),i=y({loginType:"member",email:"",password:""}),l=y({email:!1,password:!1}),t=y({email:"",password:""}),c=u(!1),m=u(!1),d=u(""),k=u(null),_=u(null),S=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i;function b(s){const e=i[s]?.trim?.()??"";let o="";switch(s){case"email":e?S.test(e)||(o="Please enter a valid email address."):o="Email is required.";break;case"password":e||(o="Password is required.");break}return t[s]=o,!o}function z(){const s=b("email"),e=b("password");return s&&e}const L=q(()=>i.loginType&&i.email&&i.password&&!t.email&&!t.password);function h(s){l[s]=!0,b(s)}function T(s){l[s]&&b(s),d.value&&(d.value="")}async function M(){await O();const s=[{name:"email",ref:k},{name:"password",ref:_}];for(const{name:e,ref:o}of s)if(t[e]&&o.value){o.value.focus();break}}async function R(){if(d.value="",!z()){await M();return}c.value=!0;try{const s=await F.login(i.email,i.password,i.loginType);await new Promise(o=>setTimeout(o,100));const e=i.loginType==="organizer"?"organizer-account":"member-account";console.log("Login successful, redirecting to:",e),console.log("User role:",s.role),await P.push({name:e}),console.log("Redirect completed")}catch(s){d.value=s.message,console.error("Login error:",s)}finally{c.value=!1}}return(s,e)=>{const o=D("RouterLink");return v(),p("div",G,[a("div",H,[a("div",J,[a("div",K,[a("div",N,[e[18]||(e[18]=a("div",{class:"text-center mb-4"},[a("h1",{class:"h3 mb-2"},"Sign In"),a("p",{class:"text-muted"},"Welcome back to Community Sport")],-1)),d.value?(v(),p("div",W,[e[9]||(e[9]=a("i",{class:"bi bi-exclamation-triangle-fill me-2","aria-hidden":"true"},null,-1)),n(" "+g(d.value),1)])):f("",!0),a("form",{onSubmit:I(R,["prevent"]),novalidate:""},[a("div",Q,[e[12]||(e[12]=a("label",{class:"form-label fw-semibold"},"Login as:",-1)),a("div",X,[a("div",Y,[w(a("input",{type:"radio",class:"btn-check",name:"loginType",id:"login-member",value:"member","onUpdate:modelValue":e[0]||(e[0]=r=>i.loginType=r),required:""},null,512),[[V,i.loginType]]),e[10]||(e[10]=a("label",{class:"btn btn-outline-primary w-100",for:"login-member"},[a("i",{class:"bi bi-person me-2","aria-hidden":"true"}),n(" Member ")],-1))]),a("div",Z,[w(a("input",{type:"radio",class:"btn-check",name:"loginType",id:"login-organizer",value:"organizer","onUpdate:modelValue":e[1]||(e[1]=r=>i.loginType=r),required:""},null,512),[[V,i.loginType]]),e[11]||(e[11]=a("label",{class:"btn btn-outline-primary w-100",for:"login-organizer"},[a("i",{class:"bi bi-people me-2","aria-hidden":"true"}),n(" Organizer ")],-1))])]),e[13]||(e[13]=a("div",{class:"form-text mt-2"}," Select the portal you want to access ",-1))]),a("div",ee,[e[14]||(e[14]=a("label",{for:"email",class:"form-label"},[n(" Email "),a("span",{class:"text-danger"},"*")],-1)),w(a("input",{id:"email",ref_key:"emailRef",ref:k,type:"email",class:x(["form-control",{"is-invalid":l.email&&t.email}]),"onUpdate:modelValue":e[2]||(e[2]=r=>i.email=r),onBlur:e[3]||(e[3]=r=>h("email")),onInput:e[4]||(e[4]=r=>T("email")),"aria-required":"true","aria-invalid":l.email&&!!t.email,"aria-describedby":l.email&&t.email?"email-error":void 0,placeholder:"you@example.com",autocomplete:"email",required:""},null,42,ae),[[$,i.email,void 0,{trim:!0}]]),l.email&&t.email?(v(),p("div",se,g(t.email),1)):f("",!0)]),a("div",ie,[e[15]||(e[15]=a("label",{for:"password",class:"form-label"},[n(" Password "),a("span",{class:"text-danger"},"*")],-1)),a("div",te,[w(a("input",{id:"password",ref_key:"passwordRef",ref:_,type:m.value?"text":"password",class:x(["form-control",{"is-invalid":l.password&&t.password}]),"onUpdate:modelValue":e[5]||(e[5]=r=>i.password=r),onBlur:e[6]||(e[6]=r=>h("password")),onInput:e[7]||(e[7]=r=>T("password")),"aria-required":"true","aria-invalid":l.password&&!!t.password,"aria-describedby":l.password&&t.password?"password-error":void 0,placeholder:"Enter your password",autocomplete:"current-password",required:""},null,42,oe),[[B,i.password]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[8]||(e[8]=r=>m.value=!m.value),"aria-label":m.value?"Hide password":"Show password"},[a("i",{class:x(m.value?"bi bi-eye-slash":"bi bi-eye"),"aria-hidden":"true"},null,2)],8,re)]),l.password&&t.password?(v(),p("div",le,g(t.password),1)):f("",!0)]),a("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:c.value||!L.value},[c.value?(v(),p("span",de)):f("",!0),n(" "+g(c.value?"Signing In...":`Sign In as ${i.loginType}`),1)],8,ne),a("div",ce,[a("p",me,[e[17]||(e[17]=n(" Don't have an account? ",-1)),E(o,{to:{name:"register"},class:"link-primary"},{default:U(()=>[...e[16]||(e[16]=[n("Create account",-1)])]),_:1})])])],32)])]),e[19]||(e[19]=C('<div class="text-center mt-4" data-v-4e37c8bf><div class="card bg-light border-0" data-v-4e37c8bf><div class="card-body p-3" data-v-4e37c8bf><h6 class="card-title mb-2" data-v-4e37c8bf>Account Access</h6><div class="row g-2 text-sm" data-v-4e37c8bf><div class="col-6" data-v-4e37c8bf><div class="d-flex align-items-center" data-v-4e37c8bf><i class="bi bi-person text-primary me-2" aria-hidden="true" data-v-4e37c8bf></i><div data-v-4e37c8bf><strong data-v-4e37c8bf>Member Portal</strong><br data-v-4e37c8bf><small class="text-muted" data-v-4e37c8bf>Join programs &amp; events</small></div></div></div><div class="col-6" data-v-4e37c8bf><div class="d-flex align-items-center" data-v-4e37c8bf><i class="bi bi-people text-primary me-2" aria-hidden="true" data-v-4e37c8bf></i><div data-v-4e37c8bf><strong data-v-4e37c8bf>Organizer Portal</strong><br data-v-4e37c8bf><small class="text-muted" data-v-4e37c8bf>Manage programs &amp; events</small></div></div></div></div></div></div></div>',1))])])])}}},fe=j(ue,[["__scopeId","data-v-4e37c8bf"]]);export{fe as default};
